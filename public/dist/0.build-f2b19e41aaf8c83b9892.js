webpackJsonp([0,66,68],{1022:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("player-screen",{ref:"playerScreen"})},staticRenderFns:[]}},1047:function(e,t,i){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[e._l(e.episodes,function(t){return e.episodes&&e.episodes.length?n("div",{staticClass:"feat-card",on:{click:function(i){e.getContentToPlay(t)}}},[t?n("div",{staticClass:"detail"},[t.progress?n("p",{staticClass:"alt-tag"},[100!=t.progress?n("span",[e._v("watching")]):n("span",[e._v("watched")])]):e._e(),e._v(" "),t.title?n("h2",[e._v(e._s(t.title))]):e._e(),e._v(" "),n("ul",{staticClass:"info-tags"},[t.noShow?e._e():n("li",[e._v("Episode "+e._s(t.episodeNumber))]),e._v(" "),t.duration?n("li",[e._v(e._s(t.duration))]):e._e(),e._v(" "),t.mainLanguage?n("li",[e._v(e._s(t.mainLanguage))]):e._e()])]):e._e(),e._v(" "),t&&t.images&&t.images.cover?n("img",{attrs:{src:t.images.cover,alt:"alt-cover"}}):n("img",{attrs:{src:i(87),alt:"alt-cover"}}),e._v(" "),t&&t.progress&&100!=t.progress?n("div",{staticClass:"line-progress"},[n("div",{staticClass:"progress",style:{width:t.progress+"%"}})]):n("div",{staticClass:"color-line sm"})]):e._e()}),e._v(" "),n("KidsPlayer",{directives:[{name:"show",rawName:"v-show",value:e.togglePlayer,expression:"togglePlayer"}]})],2)},staticRenderFns:[]}},106:function(e,t,i){function n(e){i(129)}var r=i(77)(i(116),i(128),n,null,null);e.exports=r.exports},116:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r,o,a,s,l,h=i(92),u=i.n(h),c=i(1),d=i(5),p=i(4),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},g=function(){return i.e(49).then(i.bind(null,126))},v=function(){return i.e(49).then(i.bind(null,127))};t.default={data:function(){return{contentName:void 0,id:void 0,altUser:void 0,altOrder:void 0,contentType:void 0,contentId:void 0,episodeId:void 0,seriesId:void 0,mediaId:void 0,seasonId:void 0,progressId:void 0,seriesSeasons:void 0,manifestUrl:void 0,licenseUrl:void 0,drmTicket:void 0,trailerEnabled:void 0,loadedContent:void 0,showVideoLoader:!1,altPlayer:void 0,videoTag:void 0,isPlayerReady:!1,isPlayerPlaying:!1,currentTime:"00:00",duration:"00:00",durationInSec:void 0,playTime:0,seekPosition:0,videoStep:0,videoTimer:0,contentRestricted:!1,contentGeoBlocked:!1,contentDrmBlocked:!1,showLoginTag:!1,showSubTag:!1,showRentTag:!1,videoCanPlay:!1,vContain:void 0,vPlayer:void 0,vShaka:void 0,vControls:void 0,vToggler:void 0,vLoader:void 0,vProgress:void 0,vCurrentTime:void 0,vDuration:void 0,vFullsrcSwitch:void 0,trailerPlayFlag:!0,continueProgress:void 0,playerPlaylist:void 0,playlistEpisodes:new Array,playlistEpisodeCount:0,playListPosition:0,currentPlaylistItem:void 0,playlistCallbackEvent:!1,toggleControlTimer:void 0,toggleCtrlTimerTime:5e3,nextPlaylistMediaTitle:void 0,nextPlaylistMediaSNo:void 0,nextPlaylistMediaENo:void 0,nextPlaylistPosition:0,showComUpNextTag:!1,showComUpNextTime:void 0,showComUpNextTimeNextEpisode:void 0,showComUpNextTimeNextEpisodeCountDown:0,replayFlag:!0,showDrmNotSupportError:!0,showEnablePcError:!0,limit:10,offset:0,comingSoonTag:!1,plrPosterImage:void 0,playerPosterImage:void 0,plrDuration:void 0,plrStreamAvailable:!1,plrStreamUrl:void 0,plrIsStreamDrm:!1,plrStreamId:void 0,plrTrailerAvailable:!1,plrTrailerUrl:void 0,plrIsTrailerDrm:!1,plrTrailerId:void 0,plrVideoUrl:void 0,plrIsDrmVideo:!1,plrVideoLoaded:!1,plrVideoEnded:!1,plrContentLength:void 0,plrLoadedVideoType:void 0,silentTrack:"/src/assets/silent-track.mp3",plrInitialized:!1,showTagTrailer:!1,showTagComingsoon:!1,showTagLogin:!1,showTagSubscribe:!1,showTagRentTvod:!1,playNextPlaylistItemFlag:!1,isVPlayerBuffering:!1,playRelatedEpisodeClickFlag:!1,contentSeekStartTime:void 0,contentSeekStopTime:void 0,contentBufferStartTime:void 0,contentBufferStopTime:void 0,countBufferFlag:!1,webenageState:"null",crossDomainCheck:!0,showTagGeoCta:!1,trailerCountinueGeoCheck:!1,showTagGeoCtaCheck:!1,flagRouteChanged:!1,bufferStartTime:0,gt_next_episode_thumbnail_url:void 0,gt_next_episode_description:void 0,gt_next_episode_id:void 0,completeEventChecker:!1,currentAWSEvent:void 0,vForward:void 0,vBackward:void 0,flagVideoTag:!1,episodeIdentifier:!1,headerEpisodeDetails:void 0,playerVideoTrackList:[],showPopupEpisodeList:!1,showVideoResolution:!1,ShowSkipTag:!1,nextEpisodeImage:!1,skipIntroEventFlag:!0,checkChromeCast:void 0,plrLoadedVideoTypeMovieTrailer:void 0,nextEpisodePlayLoadMainfest:void 0,eventContentViewData:void 0,returnFromLoadAfterStop:!1,loaderCheck:void 0,episodePopupPlayState:void 0,videoResolutionPopupState:void 0,containInfoDetails:void 0,showOnlyPlayButton:void 0,showEpisodeIcon:void 0,playerPageheader:void 0,popupPlayer:!1,contentTitle:void 0,movieTagName:void 0,isPlaybackExitEvent:!1,isPlaylistEnd:!1,episodeListContent:!1,gt_next_episode_id_webenage:void 0,stopMatrixInfo:{},isHeaderTitleSet:!1,chromeCaseShow:!1,handleEventPlayer:!0,trailerCheckCounter:!1,isActiveAdd:!1,isContinousPlayback:!1,fullscreenExitProgress:{},buffer_campaign:null}},computed:f({},i.i(p.a)(["appActive","playerContent","relatedEpisodes","previewEnabled","videoPoster","altMessages","chromecastState","onboardPlayer","homeActiveSectionTitle","defaultModeCurrentSubcategory","currentEpisodeInfo","currentShowPlaylists","showTrailerInfo","playerScreenSource"])),watch:{appActive:function(){this.initActivePlayerScreen()},$route:function(e,t){this.flagRouteChanged=!0,this.containInfoDetails=void 0,this.routeChangeCB(),this.initRoutePlayerScreen()}},methods:f({},i.i(p.b)(["setPlayerContent","setVideoPoster","setTrailerAvailable","setShowTrailerButton","setShowMovieButton","setRouterFromParam","setEpisodeListing","setPlayerVideoResolution","setShowtrailerInfo","setCurrentShowPlaylists","setCurrentEpisodeInfo","setRelatedEpisodes","setPopupPlaylist","setPlayerScreenSource"]),i.i(p.c)(["actGetMediaSeries","actGetMediaVideo","actGetSingleEpisode","actGetEpisodes","actGetMediaAccess","actGetDrmTickt","actGetPlayerProgress","actPutPlayerProgress","actGetSeriesSeasons","actAddtoFavouriteMedia","actGetMediaGeoAccess"]),{initActivePlayerScreen:function(){this.initMountedPlayerScreen()},playAds:function(){l.load(),o.initialize();try{var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;n.init(e,t,google.ima.ViewMode.NORMAL),n.start()}catch(e){l.play()}},ads:function(){function e(){t(),r=new google.ima.AdsLoader(o),r.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,i,!1),r.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,c,!1);var e=function(){r.contentComplete()};l.onended=e;var n=new google.ima.AdsRequest;n.adTagUrl="https://pubads.g.doubleclick.net/gampad/ads?sz=720x480|360x240|640x360&iu=/21719602/"+f.playerContent.campaign_ads+"&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&url=[referrer_url]&description_url=[description_url]&correlator=[timestamp]",r.requestAds(n)}function t(){o=new google.ima.AdDisplayContainer(document.getElementById("adContainer"),l)}function i(e){var t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!0,n=e.getAdsManager(l,t),n.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,c),n.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,d),n.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,p),n.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,h),n.removeEventListener(google.ima.AdEvent.Type.LOADED,h),n.removeEventListener(google.ima.AdEvent.Type.STARTED,h),n.removeEventListener(google.ima.AdEvent.Type.COMPLETE,h),n.addEventListener(google.ima.AdEvent.Type.LOADED,h),n.addEventListener(google.ima.AdEvent.Type.STARTED,h),n.addEventListener(google.ima.AdEvent.Type.COMPLETE,h)}function h(e){var t=e.getAd();switch(e.type){case google.ima.AdEvent.Type.LOADED:t.isLinear()&&(f.vToggleLoader(!0),document.getElementById("v-controls").style.display="none");break;case google.ima.AdEvent.Type.STARTED:t.isLinear()&&(document.getElementById("v-controls").style.display="none",a=setInterval(function(){n.getRemainingTime()&&(document.getElementById("v-toggle")&&(document.getElementById("v-toggle").style.display="none"),f.vToggleLoader(!1))},300));break;case google.ima.AdEvent.Type.COMPLETE:t.isLinear();break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:u()}}function u(){document.getElementById("v-controls").style.display="block",document.getElementById("v-toggle")&&(document.getElementById("v-toggle").style.display="flex"),f.isActiveAdd=!1,f.isContinousPlayback=!1,f.vToggler.addEventListener("click",f.vTogglePlay),f.vTogglePlay(),s.removeEventListener("click",f.playAds),clearInterval(a)}function c(e){}function d(){}function p(){}var f=this;!function(){if(!google)return void f.vToggler.addEventListener("click",f.vTogglePlay);l=document.getElementById("v-player"),s=document.getElementById("v-toggler"),s.removeEventListener("click",f.playAds),f.vToggler.removeEventListener("click",f.vTogglePlay),s.addEventListener("click",f.playAds),e()}()},initRoutePlayerScreen:function(){this.showComUpNextTag=!1,this.plrVideoLoaded=!1,this.plrVideoEnded=!1,this.contentDrmBlocked=!1,this.limit=10,this.offset=0,this.playlistEpisodeCount=0,this.playlistEpisodes=new Array,this.skipIntroEventFlag=!1,this.checkChromeCast=!1,this.plrLoadedVideoTypeMovieTrailer=!1,this.nextEpisodePlayLoadMainfest=!0,this.eventContentViewData=!1,this.loaderCheck=!1,this.setCurrentShowPlaylists(void 0),c.eventBus.$emit("toggleGeoBlockEvent",!1),c.eventBus.$emit("toggleVideoAddToFavError",!1),document.getElementById("alt-app")&&(document.getElementById("alt-app").style.position="relative"),this.vPlayer&&(this.vToggleLoader(!0),this.toggleControls(!1),this.vToggleToggler(!1,"initRoutePlayerScreen"),this.vToggleMainControls(!1)),this.initMountedPlayerScreen()},initMountedPlayerScreen:function(){document.getElementsByClassName("app-bar")[0]&&(document.getElementsByClassName("app-bar")[0].style.display="block"),this.isActiveAdd=!1,this.isContinousPlayback=!1,this.hideVideoController(!1),this.hidePosterPlayerScreen("block","none"),document.getElementById("v-player")&&(document.getElementById("v-player").style.height="auto"),this.setPlayerContent(void 0),this.showEpisodeIcon=!1,this.comingSoonTag=!1,this.showLoginTag=!1,this.showSubTag=!1,this.showRentTag=!1,this.contentRestricted=!1,this.contentGeoBlocked=!1,this.showComUpNextTag=!1,this.showDrmNotSupportError=!0,this.showEnablePcError=!0,this.movieTagName=!1,this.plrPosterImage="/src/assets/alt-cover.jpg",this.containInfoDetails?(this.contentName=this.containInfoDetails.contentName,this.id=this.containInfoDetails.id):(this.contentName=this.$route.name,this.id=this.$route.params.id),document.getElementById("alt-app")&&(document.getElementById("alt-app").style.position="relative"),"show"==this.contentName?(this.seriesId=this.id,this.processSeriesContent()):"media"!=this.contentName&&"episode"!=this.contentName||("episode"==this.contentName&&c.eventBus.$off("toggleSendDataToPlayerScreen",this.loadContentAtPlayerScreen),"media"==this.contentName&&(this.containInfoDetails&&this.containInfoDetails.bts||this.setShowtrailerInfo(void 0)),this.mediaId=this.id,this.processMediaContent())},outputUpdate:function(e){var t=document.querySelector("#volume");t.value=e,t.style.left=e+"px"},skipActionForward:function(){if(this.vPlayer&&this.vPlayer.currentTime&&this.playerContent&&this.playerContent.skipIntro){var e=this.vPlayer.currentTime,t=this.playerContent.skipIntro.endskipintro?parseInt(this.playerContent.skipIntro.endskipintro):void 0;t&&(this.vPlayer.currentTime=t),this.ShowSkipTag=!1;var i=void 0;if(i=t-e,window.mobileAnalyticsClient){var n=this.getAWSMACommonAttributes();n.start_time=e||"N.A",n.stop_time=t||"N.A",n.duration=i||"N.A",window.mobileAnalyticsClient.recordEvent("_skip.intro",n,{})}}},makeTitleUpperCase:function(e){return e.toUpperCase()},filterVideoTrackList:function(e){var t=e[0].height,i=[];i.push(e[0]),e.shift();for(var n in e){if(t==e[n].height)break;i.push(e[n])}return i.sort(function(e,t){return e.height-t.height}),i},vPlayerVideoQuality:function(){if(this.vShaka){var e=void 0,t=void 0;e=this.vShaka.getVariantTracks(),t=this.filterVideoTrackList(e),this.filterVideoResolutation(t),this.twoSeratePart(),c.eventBus.$emit("togglePlayerVideoResolution",!0)}},twoSeratePart:function(){for(var e=[],t=[],i=[],n=0;n<this.playerVideoTrackList.length;n++)n%2==0?e.push(this.playerVideoTrackList[n]):t.push(this.playerVideoTrackList[n]);i.push(e),i.push(t),this.setPlayerVideoResolution(i)},filterVideoResolutation:function(e){if(localStorage.setItem("videoResolution",JSON.stringify(e)),!(this.playerVideoTrackList&&this.playerVideoTrackList.length>0)){var t=void 0,i=void 0;if(i=localStorage.getItem("altConfig")?JSON.parse(localStorage.getItem("altConfig")):void 0,t=i&&i.qualitySelection&&i.qualitySelection.options?i.qualitySelection.options:void 0){var n=void 0,r={};for(var o in t)n=parseInt(t[o].bitrateIndex),n>=0?(e[n].info=t[o].info,e[n].title=t[o].title,this.playerVideoTrackList.push(e[n])):(r.info=t[o].info,r.title=t[o].title,this.playerVideoTrackList.push(r))}}},processSeriesContent:function(){var e=this,t=void 0;localStorage.getItem("altProfileMode")?t=localStorage.getItem("altProfileMode"):(t="default",localStorage.setItem("altProfileMode",t)),this.ShowSkipTag=!1,this.setShowtrailerInfo(void 0),this.getTheContents(function(){if(e.playerContent){if(e.playerPageheader=e.playerContent.title,"kids"==t&&!e.playerContent.kidsContent)return void e.$router.push({name:"home"});e.getSeriesSeasons(function(){e.getSeriesEpisodes(function(){e.setShowtrailerInfo(e.playerContent),e.renderSeriesScreen()})})}})},renderSeriesScreen:function(){var e=this;this.showTagTrailer=!1,this.showTagComingsoon=!1,this.showTagLogin=!1,this.showTagSubscribe=!1,this.showTagRentTvod=!1,this.configurePlayerMetadata(),this.showTagTrailer=!0,this.gt_next_episode_id="",this.progressId=void 0,this.showComUpNextTime=!1,this.showComUpNextTimeNextEpisode=!1,this.showComUpNextTimeNextEpisodeCountDown=0,this.playerContent&&this.playerContent.stream?(this.plrVideoUrl=this.plrStreamUrl,this.plrIsDrmVideo=this.plrIsStreamDrm):this.playerContent&&this.playerContent.trailer&&(this.plrVideoUrl=this.plrTrailerUrl,this.plrIsDrmVideo=!1),this.contentRestricted=!1;var t=void 0;if(localStorage.getItem("altUser")&&(t=JSON.parse(localStorage.getItem("altUser"))),this.configurePlayer(function(){e.vToggleLoader(!0),t?e.plrIsDrmVideo?e.configureDrmPlayback(function(){e.vToggleLoader(!1),e.toggleLoader(!1),e.plrLoadedVideoType="trailer"}):(e.vToggleLoader(!1),e.toggleLoader(!1),e.containInfoDetails&&(e.vToggleLoader(!1),e.toggleLoader(!1),e.hideVideoController(!0,"renderSeriesScreen")),e.plrLoadedVideoType="trailer"):(e.plrIsDrmVideo?(e.toggleControls(!1),e.vToggleToggler(!1,"renderSeriesScreen"),e.vToggleMainControls(!1)):e.vToggleLoader(!1),e.toggleLoader(!1),e.containInfoDetails&&(e.vToggleLoader(!1),e.toggleLoader(!1),e.hideVideoController(!0,"renderSeriesScreen")),e.plrLoadedVideoType="trailer")}),window.mobileAnalyticsClient){var i=this.getAWSMACommonAttributes();if(this.eventContentViewData)return;i.content_id=this.playerContent&&this.playerContent.seriesId?this.playerContent.seriesId:"N.A",i.content_title=this.playerContent&&this.playerContent.title?this.playerContent.title.toLowerCase():"N.A",i.content_url=this.getContentUrl(),i.content_type="show details";var n=localStorage.getItem("event_source")?localStorage.getItem("event_source"):"category";i.content_source=n,this.eventContentViewData=i,window.mobileAnalyticsClient.recordEvent("_content.view",i,{})}},geoCtaCheck:function(){this.vPlayer&&!this.vPlayer.paused&&this.vPlayer.pause(),this.vExitFullScreenMode(),c.eventBus.$emit("toggleGeoBlockEvent",!0)},processMediaContent:function(){var e=this,t=void 0;localStorage.getItem("altProfileMode")?t=localStorage.getItem("altProfileMode"):(t="default",localStorage.setItem("altProfileMode",t)),this.getTheContents(function(){if(e.playerContent){if(e.playerPageheader=e.playerContent.title,"kids"==t&&!e.playerContent.kidsContent)return void e.$router.push({name:"home"});switch(e.playerContent.contentType){case"trailer":e.processTrailerContent();break;case"movie":e.processMovieContent();break;case"poster":e.processPosterContent();break;case"episode":e.processEpisodeContent();break;case"video":e.processMovieContent()}}})},setContentInformationLocal:function(e){void 0!=e&&(void 0==e.contentId?"series"==e.contentType&&localStorage.setItem("awsContentId",e.seriesId):localStorage.setItem("awsContentId",e.contentId),localStorage.setItem("awsContentTitle",e.title),localStorage.setItem("awsContentType",e.contentType),localStorage.setItem("awsContentDuration",e.durationInSec))},processTrailerContent:function(){this.playerPlaylist=void 0,this.renderTrailerScreen()},renderTrailerScreen:function(){var e=this;this.configurePlayerMetadata(),this.progressId=void 0,this.playerContent&&this.playerContent.trailer?(this.plrVideoUrl=this.plrTrailerUrl,this.plrIsDrmVideo=!1):this.plrVideoUrl=this.playerContent.stream.streamUrl;var t=void 0;localStorage.getItem("altUser")&&(t=JSON.parse(localStorage.getItem("altUser"))),this.configurePlayer(function(){t?e.plrIsDrmVideo?e.configureDrmPlayback(function(){e.vToggleLoader(!1),e.toggleLoader(!1),e.plrLoadedVideoType="trailer"}):(e.vToggleLoader(!1),e.toggleLoader(!1),e.plrLoadedVideoType="trailer"):(e.plrIsDrmVideo?(e.toggleControls(!1),e.vToggleToggler(!1,"renderTrailerScreen"),e.vToggleMainControls(!1)):e.vToggleLoader(!1),e.toggleLoader(!1),e.plrLoadedVideoType="trailer"),e.containInfoDetails&&e.hideVideoController(!0,"renderSeriesScreen")})},processEpisodeContent:function(){var e=this;this.seriesId=this.playerContent.seriesId,this.seasonId=this.playerContent.seasonId,this.showTagTrailer=!1,this.showTagComingsoon=!1,this.showTagLogin=!1,this.showTagSubscribe=!1,this.showTagGeoCta=!1;var t=function(){localStorage.getItem("altUser")?e.getMediaAccess(function(){e.renderEpisodeScreen()}):e.renderEpisodeScreen()};"Watching"===this.homeActiveSectionTitle||"Continue Watching"===this.defaultModeCurrentSubcategory||"Watching"===this.defaultModeCurrentSubcategory?(this.gt_next_episode_id=!0,this.getSeriesEpisodes(function(){t()})):this.getSeriesEpisodes(function(){t()})},renderEpisodeScreen:function(){var e=this;if(this.showTagTrailer=!1,this.showTagComingsoon=!1,this.showTagLogin=!1,this.showTagSubscribe=!1,this.showTagRentTvod=!1,this.episodeIdentifier=!0,this.playerPlaylist&&this.playerPlaylist.length&&(this.gt_next_episode_id=!(this.playListPosition===this.playerPlaylist.length)),this.configurePlayerMetadata(),this.plrTrailerAvailable=!1,this.plrIsTrailerDrm=!1,this.plrTrailerId=void 0,this.playerContent){this.headerEpisodeDetails={episodeNumber:this.playerContent.episodeNumber?this.playerContent.episodeNumber:"",seasonNumber:this.playerContent.seasonNumber?this.playerContent.seasonNumber:""},this.playerPageheader=this.playerContent.title,this.mediaId=this.progressId=this.playerContent.id,this.showComUpNextTime=this.playerContent.nextIn?this.playerContent.nextIn:15;var t=void 0;localStorage.getItem("altUser")&&(t=JSON.parse(localStorage.getItem("altUser"))),this.playerContent&&this.playerContent.stream&&(this.plrVideoUrl=this.playerContent.stream.streamUrl);var i=void 0;localStorage.getItem("prevPlayedMediaId")&&(i=localStorage.getItem("prevPlayedMediaId")),this.id==i&&(this.playlistCallbackEvent=!1),this.configurePlayer(function(){e.vToggleLoader(!0),e.plrLoadedVideoType="episode",e.hideVideoController(!0,"renderEpisodeScreen"),e.showEpisodeIcon=!0,document.getElementById("v-toggle")&&(document.getElementById("v-toggle").style.display="flex"),e.playerContent.campaign_ads&&!e.getProgressForAds()&&(e.isContinousPlayback=!0,e.isActiveAdd=!0,e.ads()),t?e.getPlayerProgress(function(){e.playerContent&&e.playerContent.stream&&e.playerContent.stream.streamUrl&&(e.playerContent.isFreeContent||e.playerContent.userHasAccess)?(e.plrIsDrmVideo=!0,e.contentRestricted=!1):(e.plrIsDrmVideo=!1,e.contentRestricted=!0),e.vToggleLoader(!1),e.toggleLoader(!1),e.playlistCallbackEvent&&e.vTogglePlay()}):(e.playerContent.stream&&e.playerContent.stream.streamUrl&&e.playerContent.anonymousAccess?e.contentRestricted=!1:e.contentRestricted=!0,e.vToggleLoader(!1),e.vToggleToggler(!0,"renderEpisodeScreen"),e.toggleControls(!0),e.toggleLoader(!1),e.playlistCallbackEvent&&e.vTogglePlay())})}},processMovieContent:function(){var e=this;this.playerPlaylist=void 0,localStorage.getItem("altUser")?this.getMediaAccess(function(){e.renderMovieScreen()}):this.renderMovieScreen()},renderMovieScreen:function(){var e=this;this.showTagTrailer=!1,this.showTagComingsoon=!1,this.showTagLogin=!1,this.showTagSubscribe=!1,this.showTagRentTvod=!1,this.showTagGeoCta=!1,this.showTagGeoCtaCheck=!1,this.movieTagName=!0,this.playerContent&&"video"==this.playerContent.contentType&&(this.movieTagName=!1),this.configurePlayerMetadata(),this.mediaId=this.progressId=this.playerContent.contentId,this.gt_next_episode_id="",this.playerPlaylist=void 0,this.gt_next_episode_thumbnail_url="",this.gt_next_episode_description="",this.gt_next_episode_id="",this.gt_next_episode_id_webenage=" ";var t=void 0;if(localStorage.getItem("altUser")&&(t=JSON.parse(localStorage.getItem("altUser"))),this.$route.name&&"media"!=this.$route.name&&(this.loaderCheck=!0),this.plrVideoLoaded=!1,this.configurePlayer(function(){e.vToggleLoader(!0),t?(e.playerContent.isFreeContent||e.playerContent.userHasAccess?(e.contentRestricted=!1,e.playerContent.stream?(e.plrVideoUrl=e.playerContent.stream.streamUrl,e.plrLoadedVideoType="movie",e.plrIsDrmVideo=!0):(e.toggleControls(!1),e.vToggleToggler(!1,"renderMovieScreen"),e.vToggleLoader(!1))):(e.contentRestricted=!0,e.vToggleLoader(!1)),e.getPlayerProgress(function(){e.vToggleLoader(!1),e.toggleLoader(!1)})):(e.playerContent.anonymousAccess&&e.playerContent.stream?(e.plrVideoUrl=e.playerContent.stream.streamUrl,e.plrIsDrmVideo=!1,e.plrLoadedVideoType="movie",e.contentRestricted=!1,e.contentGeoBlocked=!1):(e.toggleControls(!1),e.vToggleToggler(!1,"renderMovieScreen else"),e.vToggleLoader(!1),e.contentRestricted=!0),e.vToggleLoader(!1),e.toggleLoader(!1)),e.vToggleLoader(!1),e.containInfoDetails&&(e.toggleControls(!0),e.vToggler&&(e.vToggler.style.display="block"),e.hideVideoController(!0)),e.containInfoDetails=null}),window.mobileAnalyticsClient){var i=this.getAWSMACommonAttributes();i.content_id=this.playerContent.contentId,i.content_title=this.playerContent.title.toLowerCase(),i.content_url=this.getContentUrl(),i.content_type="movie details";var n=localStorage.getItem("event_source")?localStorage.getItem("event_source"):"category";if(i.content_source=n,this.playerContent&&this.playerContent.contentType&&"series"==this.playerContent.contentType&&(i.content_type="trailer"),this.$route.name&&"media"==this.$route.name&&this.plrLoadedVideoType&&"trailer"==this.plrLoadedVideoType&&(i.content_type="trailer"),this.eventContentViewData)return;this.eventContentViewData=i,window.mobileAnalyticsClient.recordEvent("_content.view",i,{})}},processPosterContent:function(){this.playerPlaylist=void 0,this.renderPosterScreen()},renderPosterScreen:function(){var e=this;this.configurePlayerMetadata(),this.progressId=void 0,this.contentRestricted=!1,this.playerContent&&this.playerContent.trailer?this.plrVideoUrl=this.playerContent.trailer.trailerUrl:this.plrVideoUrl=void 0;var t=void 0;localStorage.getItem("altUser")&&(t=JSON.parse(localStorage.getItem("altUser"))),this.configurePlayer(function(){if(!e.plrVideoUrl)return e.toggleControls(!1),e.vToggleToggler(!1,"renderPosterScreen"),e.vToggleMainControls(!1),e.vToggleLoader(!1),void e.toggleLoader(!1);e.vToggleLoader(!0),e.toggleLoader(!1),t?e.plrIsDrmVideo?e.configureDrmPlayback(function(){e.vToggleLoader(!1),e.plrLoadedVideoType="poster"}):(e.vToggleLoader(!1),e.containInfoDetails&&(e.vToggleLoader(!1),e.toggleLoader(!1),e.hideVideoController(!0,"renderPosterScreen"),e.contentRestricted=!1),e.plrLoadedVideoType="poster"):(e.plrIsDrmVideo?(e.toggleControls(!1),e.vToggleToggler(!1,"renderPosterScreen altUser"),e.vToggleMainControls(!1)):(e.vToggleLoader(!1),e.toggleLoader(!1),e.containInfoDetails&&e.hideVideoController(!0,"renderPosterScreen")),e.plrLoadedVideoType="poster")})},configurePlayerMetadata:function(){if(this.playerContent){this.comingSoonTag=this.playerContent.comingSoon,this.plrPosterImage=this.playerContent.images&&this.playerContent.images.cover?this.playerContent.images.cover:"/src/assets/alt-cover.jpg","episode"==this.playerContent.contentName||this.playerContent.bts||(this.playerPosterImage=this.playerContent.images&&this.playerContent.images.cover?this.playerContent.images.cover:"/src/assets/alt-cover.jpg"),this.plrDuration=this.playerContent.durationInSec?this.playerContent.durationInSec:0,this.playerContent.stream&&(this.plrStreamAvailable=!0,this.plrStreamUrl=this.playerContent.stream.streamUrl?this.playerContent.stream.streamUrl:void 0,this.plrStreamId=this.playerContent.stream.streamId?this.playerContent.stream.streamId:void 0,this.plrIsStreamDrm=this.playerContent.stream.drm),this.playerContent.trailer&&(this.plrTrailerAvailable=!0,this.plrTrailerUrl=this.playerContent.trailer.trailerUrl?this.playerContent.trailer.trailerUrl:void 0,this.plrTrailerId=this.playerContent.trailer.trailerId?this.playerContent.trailer.trailerId:void 0),this.comingSoonTag?this.showTagComingsoon=!0:this.showTagComingsoon=!1;return this.playerContent&&this.playerContent.geoBlock&&this.geoBlockCountryWise(this.playerContent.geoBlock)?(this.plrPosterImage="/src/assets/alt-cover.jpg",void c.eventBus.$emit("toggleCountrywiseVideoBlock",!0)):void 0}},getProgressForAds:function(e){var t=void 0;localStorage.getItem("mediaProgressList")&&(t=JSON.parse(localStorage.getItem("mediaProgressList")));var i=e||this.playerContent.id;for(var n in t)if(t[n].media_id==i&&t[n].progress&&100!=t[n].progress)return!0;return!1},loginRedirection:function(){var e={fullPath:this.$route.fullPath,name:this.$route.name,params:this.$route.params,path:this.$route.path,query:this.$route.query,extra:{name:"player"}};this.setRouterFromParam(e),this.$router.push({name:"login"})},configurePlayer:function(e){var t=this;this.vShaka?this.vShaka.destroy().then(function(){t.vPlayer=document.getElementById("v-player"),t.vShaka=new u.a.Player(t.vPlayer),t.configurePlayerSettings(),e&&e()}):(this.vPlayer=document.getElementById("v-player"),this.vShaka=new u.a.Player(this.vPlayer),this.configurePlayerSettings(),e&&e())},nextEpisodePlayEventTrigger:function(e){if(window.mobileAnalyticsClient){var t=this.getAWSMACommonAttributes();t.start_time=this.vPlayer&&this.vPlayer.currentTime?this.vPlayer.currentTime:"N.A",t.content_id=this.playerContent&&this.playerContent.id?this.playerContent.id:"N.A";var i=this.playerContent&&this.playerContent.contentType?this.playerContent.contentType:null;t.content_type=i;var n=this.playerContent&&this.playerContent.title?this.playerContent.title:null;"episode"===i&&n&&(n="Ep"+this.playerContent.episodeNumber+"-"+n,t.parent_content_title=this.playerContent&&this.playerContent.seriesTitle?this.playerContent.seriesTitle.toLowerCase():"N.A"),t.content_title=n?n.toLowerCase():"N.A",t.content_title=this.playerContent&&this.playerContent.title?this.playerContent.title.toLowerCase():"N.A",t.content_streamid=this.playerContent&&this.playerContent.stream&&this.playerContent.stream.streamId?this.playerContent.stream.streamId:"N.A",t.content_url=this.getContentUrl(),t.content_type=this.playerContent&&this.playerContent.contentType?this.playerContent.contentType:"N.A",t.content_duration=this.vPlayer&&this.vPlayer.duration?this.vPlayer.duration:"N.A";var r=this.getPlayerEventMode();if(t.event_mode=r||"N.A",t.event_action=e,this.playerContent&&this.playerContent.contentType&&"series"==this.playerContent.contentType&&(t.content_type="trailer",this.playerContent&&this.playerContent.trailer&&(t.content_streamid=this.playerContent&&this.playerContent.trailer&&this.playerContent.trailer.trailerId?this.playerContent.trailer.trailerId:null)),this.$route.name&&"media"==this.$route.name&&"trailer"==this.plrLoadedVideoType&&(t.content_type="trailer"),this.$route.name&&"episode"==this.$route.name){var o="Ep"+this.playerContent.episodeNumber+"-"+this.playerContent.title;t.content_title=o.toLowerCase(),this.playerContent&&this.playerContent.seriesId,this.playerContent&&this.playerContent.seriesTitle&&(t.parent_content_title=this.playerContent.seriesTitle.toLowerCase())}window.mobileAnalyticsClient.recordEvent("_next.playback",t,{})}},videoResolutionEventTrigger:function(e){if(window.mobileAnalyticsClient){var t=this.getAWSMACommonAttributes();t.content_id=this.playerContent&&this.playerContent.id?this.playerContent.id:null,t.content_title=this.playerContent&&this.playerContent.title?this.playerContent.title.toLowerCase():null,t.content_streamid=this.playerContent&&this.playerContent.stream&&this.playerContent.stream.streamId?this.playerContent.stream.streamId:null,t.content_url=this.getContentUrl(),t.content_duration=this.vPlayer&&this.vPlayer.duration?this.vPlayer.duration:null;var i=this.getPlayerEventMode();if(t.event_mode=i||"N.A",t.event_action=e,this.playerContent&&this.playerContent.contentType&&"series"==this.playerContent.contentType&&this.playerContent&&this.playerContent.trailer&&(t.content_streamid=this.playerContent&&this.playerContent.trailer&&this.playerContent.trailer.trailerId?this.playerContent.trailer.trailerId:null),this.$route.name&&"media"==this.$route.name&&this.plrLoadedVideoType,this.playerContent&&"episode"==this.playerContent.contentName){var n="Ep"+this.playerContent.episodeNumber+"-"+this.playerContent.title;t.content_title=n?n.toLowerCase():"N.A"}this.playerContent&&this.playerContent.seriesTitle&&(t.parent_content_title=this.playerContent.seriesTitle.toLowerCase()),t.event_source="player",window.mobileAnalyticsClient.recordEvent("_content.quality",t,{})}},backwardForwardEventTrigger:function(e,t,i){if(window.mobileAnalyticsClient){var n=this.getAWSMACommonAttributes(),r=this.playerContent&&this.playerContent.contentType?this.playerContent.contentType:null;n.content_type=r;var o=this.playerContent&&this.playerContent.title?this.playerContent.title:null;"episode"===r&&o&&(o="Ep"+this.playerContent.episodeNumber+"-"+o),n.content_title=o?o.toLowerCase():"N.A",n.content_id=this.playerContent&&this.playerContent.id?this.playerContent.id:null,n.language_code=this.playerContent&&this.playerContent.mainLanguage?this.playerContent.mainLanguage:null,n.content_streamid=this.playerContent&&this.playerContent.stream&&this.playerContent.stream.streamId?this.playerContent.stream.streamId:null,n.content_url=this.getContentUrl(),n.content_duration=this.vPlayer&&this.vPlayer.duration?this.vPlayer.duration:null,n.event_source=localStorage.getItem("event_source")?localStorage.getItem("event_source"):"N.A";var a=this.getPlayerEventMode();if(n.event_mode=a||"N.A",n.event_action=i,this.playerContent&&this.playerContent.contentType&&"series"==this.playerContent.contentType&&(n.content_type="trailer",this.playerContent&&this.playerContent.trailer&&(n.content_streamid=this.playerContent&&this.playerContent.trailer&&this.playerContent.trailer.trailerId?this.playerContent.trailer.trailerId:null)),this.$route.name&&"media"==this.$route.name&&"trailer"==this.plrLoadedVideoType&&(n.content_type="trailer"),this.$route.name&&"episode"==this.$route.name){var s="Ep"+this.playerContent.episodeNumber+"-"+this.playerContent.title;n.content_title=s.toLowerCase(),this.playerContent&&this.playerContent.seriesId,this.playerContent&&this.playerContent.seriesTitle&&(n.parent_content_title=this.playerContent.seriesTitle.toLowerCase())}var l={start_time:e,stop_time:t};window.mobileAnalyticsClient.recordEvent("_content.playback",n,l)}},vBackwardPlay:function(){if(this.vPlayer){var e=void 0,t=void 0,i=void 0;e=this.vPlayer.currentTime?this.vPlayer.currentTime:0,this.vPlayer.currentTime=this.vPlayer.currentTime>10?this.vPlayer.currentTime-10:0,t=this.vPlayer.currentTime?this.vPlayer.currentTime:0,i="quick_seek_backward",this.backwardForwardEventTrigger(e,t,i)}},vForwardPlay:function(){if(this.vPlayer){var e=void 0,t=void 0,i=void 0;e=this.vPlayer.currentTime?this.vPlayer.currentTime:0,this.vPlayer.currentTime=this.vPlayer.currentTime+10<this.vPlayer.duration?this.vPlayer.currentTime+10:this.vPlayer.duration,t=this.vPlayer.currentTime?this.vPlayer.currentTime:0,i="quick_seek_forward",this.backwardForwardEventTrigger(e,t,i)}},vEpisodesListDisplay:function(){this.episodePopupPlayState=this.vPlayer.paused?"pause":"play",this.vPlayer&&!this.vPlayer.paused&&this.vPlayer.pause(),document.getElementById("listingEpisodeBody").style.height=parseInt(screen.height)-120+"px",document.getElementById("listingEpisodeBody").style.overflow="auto",document.getElementById("body").style.height=parseInt(screen.height)+"px",document.getElementById("body").style.overflow="auto",c.eventBus.$emit("toggleEpisodelistPopup",!0)},configurePlayerSettings:function(){this.vContain=document.getElementById("v-contain"),this.vControls=document.getElementById("v-controls"),this.vProgress=document.getElementById("v-progress"),this.vLoader=document.getElementById("v-loader"),this.vToggler=document.getElementById("v-toggler"),this.vCurrentTime=document.getElementById("v-current-time"),this.vDuration=document.getElementById("v-duration"),this.vMainCtrls=document.getElementById("v-main-ctrls"),this.vMainHeader=document.getElementById("v-main-header"),this.vBackward=document.getElementById("v-backward"),this.vForward=document.getElementById("v-forward"),this.vEpisodesList=document.getElementById("v-episodesList"),this.vShaka.addEventListener("buffering",this.vShakaBufferingCB),this.vPlayer,this.vPlayer.addEventListener("play",this.vPlayEventCB),this.vPlayer.addEventListener("pause",this.vPauseEventCB),this.vPlayer.addEventListener("timeupdate",this.vHandleProgress),this.vPlayer.addEventListener("loadstart",this.vToggleLoader(!0)),this.vPlayer.addEventListener("loadeddata",this.vLoadedData),this.vPlayer.addEventListener("ended",this.vEndedCB),this.vPlayer.addEventListener("seeking",this.vSeekingCB),this.vPlayer.addEventListener("seeked",this.vSeekedCB),this.vPlayer.addEventListener("canplaythrough",this.vCanPlayThroughCB),this.vProgress.addEventListener("input",this.vSeek),this.vProgress.addEventListener("change",this.contentSeeked),this.vProgress.addEventListener("touchstart",this.vProgressTouchStartCB),this.vPlayer.addEventListener("error",this.vErrorCB),this.vPlayer.addEventListener("stalled",this.vStalledCB),this.vToggler,(!this.playerContent.campaign_ads||this.playerContent.campaign_ads&&this.getProgressForAds())&&(this.vToggler.removeEventListener("click",this.playAds),this.vToggler.removeEventListener("click",this.vTogglePlay),this.vToggler.addEventListener("click",this.vTogglePlay)),this.vForward&&this.vBackward&&(this.vBackward.removeEventListener("click",this.vBackwardPlay),this.vForward.removeEventListener("click",this.vForwardPlay)),this.vBackward.addEventListener("click",this.vBackwardPlay),this.vForward.addEventListener("click",this.vForwardPlay),this.vControls.removeEventListener("click",this.vControlsClickEventCB),this.toggleControlTimer&&clearTimeout(this.toggleControlTimer),this.vUpdateButton(),this.vToggleToggler(!0,"configurePlayerSettings"),this.vToggleMainControls(!1),this.toggleControls(!0)},renderNormalPlayer:function(e){var t=this;u.a.polyfill.installAll(),u.a.Player.isBrowserSupported()&&this.vShaka.destroy().then(function(){t.vPlayer=document.getElementById("v-player"),t.vShaka=new u.a.Player(t.vPlayer),t.vShaka.load(t.plrVideoUrl).then(function(){t.vDuration.innerHTML=t.vCalcTimeLine(t.vPlayer.duration),t.vPlayer.play(),t.vPlayer.addEventListener("loadeddata",function(){}),e&&e()})})},renderDrmPlayer:function(e){var t=this;u.a.polyfill.installAll(),u.a.Player.isBrowserSupported()&&this.vShaka.destroy().then(function(){t.vPlayer=document.getElementById("v-player"),t.vShaka=new u.a.Player(t.vPlayer),t.configureDrmPlayback(function(){t.vShaka.load(t.plrVideoUrl).then(function(){t.vDuration.innerHTML=t.vCalcTimeLine(t.vPlayer.duration),e&&e()})})})},configureDrmPlayback:function(e){function t(e){i(e.detail)}function i(e){r.showDrmNotSupportError&&3016==e.code&&(r.contentDrmBlocked=!0,r.showDrmNotSupportError=!1,this.vExitFullScreenMode(),c.eventBus.$emit("toggleVideoErrorPopupEvent",!0),r.vShaka&&r.vShaka.destroy().then(function(){r.configurePlayerSettings(),r.vToggleLoader(!1),r.vToggleMainControls(!1)}))}var n=this,r=this;r.showDrmNotSupportError=!0,r.showEnablePcError=!0,this.actGetDrmTickt(this.plrStreamId).then(function(i){n.licenseUrl=window.licenseUrl=i.license_server_url,n.drmTicket=window.drmTicket=i.ticket,n.vShaka.configure({drm:{servers:{"com.widevine.alpha":n.licenseUrl},advanced:{"com.widevine.alpha":{videoRobustness:"SW_SECURE_CRYPTO",audioRobustness:"SW_SECURE_CRYPTO"}}}}),n.vShaka.getNetworkingEngine().registerRequestFilter(function(e,t){u.a.util.StringUtils,u.a.util.Uint8ArrayUtils;if(e==u.a.net.NetworkingEngine.RequestType.LICENSE){var i=new Uint8Array(t.body),n={};t.allowCrossSiteCredentials=!0,n.payload=btoa(String.fromCharCode.apply(null,i)),n.content_id="undefined",n.ticket=window.drmTicket;var r=JSON.stringify(n);t.body=new Uint8Array(r.length);for(var o=0;o<r.length;++o)t.body[o]=r.charCodeAt(o)}}),n.vShaka.getNetworkingEngine().registerResponseFilter(function(e,t){u.a.util.StringUtils,u.a.util.Uint8ArrayUtils;if(e==u.a.net.NetworkingEngine.RequestType.LICENSE){var i=new Uint8Array(t.data),n=String.fromCharCode.apply(null,i),r=JSON.parse(n),o=r.license,a=atob(o);t.data=new Uint8Array(a.length);for(var s=0;s<a.length;++s)t.data[s]=a.charCodeAt(s)}}),e&&e(),window.vShaka=n.vShaka,n.vShaka.addEventListener("error",t)},function(e){if(400==e.code)return c.eventBus.$emit("togglePopupDeviceRemoved",!0),n.vExitFullScreenMode(),n.toggleControls(!1),void n.vToggleLoader(!1);n.vShaka.destroy().then(function(){n.vToggleToggler(!1,"configureDrmPlayback shaka destroy"),n.vToggleMainControls(!1),n.vToggleLoader(!1)}),404==e.code&&"Media not available for domain row"==e.message&&c.eventBus.$emit("toggleVideoBlockPopupEvent",!0),c.eventBus.$emit("toggleVideoBlockPopupEvent",!0)})},makeFullscreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=document.getElementById("v-contain");document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||(t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)),e&&e()},landscapeRotation:function(){var e=this;screen.orientation.lock("landscape").then(function(e){},function(t){e.vToggleLoader(!1),e.returnFromLoadAfterStop=!0})},screenRotationLandscape:function(){"orientation"in screen&&(matchMedia("(orientation: portrait)").matches?(this.vToggleLoader(!0),this.makeFullscreen(this.landscapeRotation)):document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||(this.vContain.requestFullscreen?this.vContain.requestFullscreen():this.vContain.msRequestFullscreen?this.vContain.msRequestFullscreen():this.vContain.mozRequestFullScreen?this.vContain.mozRequestFullScreen():this.vContain.webkitRequestFullscreen&&this.vContain.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)))},hideEpisodeListingIcon:function(){switch(this.playerContent.contentType){case"trailer":case"movie":case"poster":this.episodeIdentifier=!1;break;case"series":this.episodeIdentifier=!0;break;case"episode":"Watching"===this.defaultModeCurrentSubcategory||this.defaultModeCurrentSubcategory,this.episodeIdentifier=!0;break;default:this.episodeIdentifier=!1}},vTogglePlay:function(e){var t=this,i=void 0;this.returnFromLoadAfterStop=!1,this.hideEpisodeListingIcon(),i=e||!1,"episode"==this.playerContent.contentName?this.episodeIdentifier=!0:this.episodeIdentifier=!1;var n=void 0;if(localStorage.getItem("altUser")&&(n=JSON.parse(localStorage.getItem("altUser"))),this.contentDrmBlocked)return this.vExitFullScreenMode(),c.eventBus.$emit("toggleVideoErrorPopupEvent",!0),void this.vToggleLoader(!1);if(!this.crossDomainCheck)return document.getElementById("alt-app")&&(document.getElementById("alt-app").style.position="fixed"),this.vToggleLoader(!1),void(this.vShaka?this.vShaka.unload().then(function(){c.eventBus.$emit("toggleGeoBlockEvent",!0)}):c.eventBus.$emit("toggleGeoBlockEvent",!0));if(this.contentGeoBlocked&&"trailer"!==this.plrLoadedVideoType)return this.vToggleLoader(!1),void(this.vShaka?this.vShaka.unload().then(function(){c.eventBus.$emit("toggleGeoBlockEvent",!0)}):c.eventBus.$emit("toggleGeoBlockEvent",!0));if(this.contentRestricted)return this.playlistCallbackEvent=!1,n?this.playerContent.tvod?this.vShaka?this.vShaka.unload().then(function(){c.eventBus.$emit("toggleRentNowPopupEvent",!0)}):c.eventBus.$emit("toggleRentNowPopupEvent",!0):this.vShaka?this.vShaka.unload().then(function(){c.eventBus.$emit("toggleSubscribePopupEvent",!0)}):c.eventBus.$emit("toggleSubscribePopupEvent",!0):this.playerContent.tvod?this.playerContent.isFreeContent?this.vShaka?this.vShaka.unload().then(function(){c.eventBus.$emit("togglePlayerSigninPopupEvent",!0)}):c.eventBus.$emit("togglePlayerSigninPopupEvent",!0):this.vShaka?this.vShaka.unload().then(function(){c.eventBus.$emit("toggleRentTvodItemEvent",!0)}):c.eventBus.$emit("toggleRentTvodItemEvent",!0):this.vShaka?this.vShaka.unload().then(function(){c.eventBus.$emit("togglePlayerSigninPopupEvent",!0)}):c.eventBus.$emit("togglePlayerSigninPopupEvent",!0),this.vToggleLoader(!1),void this.vExitFullScreenMode();localStorage.getItem("currentPlayerDetails")&&localStorage.getItem("currentPlayerDetails");if(this.chromecastState&&this.playerContent&&"play"==i){var r=void 0;if(r=this.playerContent,r.timeProgress=this.vPlayer.currentTime?Math.ceil(this.vPlayer.currentTime):0,this.$route.name&&"media"==this.$route.name&&(r.contentName=this.plrLoadedVideoType?this.plrLoadedVideoType:"trailer"),c.eventBus.$emit("chromecastPlayback",r),this.checkChromeCast=!0,"play"==i)return void this.vToggleLoader(!1);this.vPlayer&&!this.vPlayer.paused&&this.vPlayer.pause()}this.loaderCheck=!0,this.hidePosterPlayerScreen("block","none"),this.screenRotationLandscape(),this.vToggler.src="/src/assets/player/v2/ic_Play.png",document.getElementById("v-player")&&(document.getElementById("v-player").style.height="-webkit-fill-available");if(("play"==i||this.nextEpisodePlayLoadMainfest)&&(this.plrVideoLoaded=!1,this.nextEpisodePlayLoadMainfest=!1),this.plrVideoLoaded){var o=this.vPlayer.paused?"play":"pause";this.vPlayer[o](),this.vToggleLoader(!1)}else{if(this.isActiveAdd)return void(this.isContinousPlayback||(document.getElementById("v-controls").style.display="none"));this.vToggleLoader(!0),this.plrInitialized||(this.vPlayer.play(),this.plrInitialized=!0),this.plrVideoEnded&&this.plrIsDrmVideo?this.configurePlayer(function(){t.getPlayerProgress(function(){t.configureDrmPlayback(function(){t.vShaka.unload().then(function(){t.vShaka.load(t.plrVideoUrl).then(function(){},function(e){6001==e.code&&(t.vExitFullScreenMode(),c.eventBus.$emit("toggleEnablePcPrompt",!0),t.toggleControlTimer&&clearTimeout(t.toggleControlTimer),t.vControls.removeEventListener("click",t.vControlsClickEventCB),t.vToggler.src="/src/assets/player/v2/ic_Play.png",t.vToggleToggler(!0,"vTogglePlay plrIsDrmVideo"),t.vToggleMainControls(!1),t.vToggleLoader(!1))})})})})}):n&&this.plrIsDrmVideo?this.getPlayerProgress(function(){t.configureDrmPlayback(function(){t.vShaka.unload().then(function(){t.vShaka.load(t.plrVideoUrl).then(function(){},function(e){6001==e.code&&(t.vExitFullScreenMode(),c.eventBus.$emit("toggleEnablePcPrompt",!0),t.toggleControlTimer&&clearTimeout(t.toggleControlTimer),t.vControls.removeEventListener("click",t.vControlsClickEventCB),t.vToggleToggler(!0,"vTogglePlay !plrIsDrmVideo"),t.vToggleMainControls(!1),t.vToggleLoader(!1))})})})}):this.vShaka.unload().then(function(){t.vShaka.load(t.plrVideoUrl).then(function(){t.vToggler.src="/src/assets/player/v2/ic_Play.png"},function(e){6001==e.code&&(t.vExitFullScreenMode(),c.eventBus.$emit("toggleEnablePcPrompt",!0),t.toggleControlTimer&&clearTimeout(t.toggleControlTimer),t.vControls.removeEventListener("click",t.vControlsClickEventCB),t.vToggler.src="/src/assets/player/v2/ic_Play.png",t.vToggleToggler(!0,"vTogglePlay !plrIsDrmVideo"),t.vToggleMainControls(!1),t.vToggleLoader(!1))})})}},vUpdateButton:function(){if(this.vPlayer)return this.plrVideoEnded?void(this.vToggler.src="/src/assets/player/v2/ic_Play.png"):void(this.vToggler.src=this.vPlayer.paused?"/src/assets/player/v2/ic_Play.png":"/src/assets/player/v2/ic_Pause.png")},vProgressMouseDownCB:function(e){},vProgressTouchStartCB:function(e){this.vPlayer&&(this.contentSeekStartTime=this.vPlayer.currentTime)},completeEventTrigger:function(e){if(localStorage.getItem("currentPlayerDetails")&&window.mobileAnalyticsClient){var t=this.getAWSMACommonAttributes();this.countBufferFlag=!1,this.currentAWSEvent=!1;var i={progress:e},n=void 0;i.stop_time=this.vPlayer?this.vPlayer.currentTime:"N.A",n=JSON.parse(localStorage.getItem("currentPlayerDetails")),this.webenageEventTrigger("complete",e),t.event_action="complete",t.content_id=n&&n.eventAttributeObj&&n.eventAttributeObj.content_id?n.eventAttributeObj.content_id:" ",t.language_code=this.playerContent&&this.playerContent.mainLanguage?this.playerContent.mainLanguage:null;var r=this.playerContent&&this.playerContent.contentType?this.playerContent.contentType:null;t.content_type=r;var o=this.playerContent&&this.playerContent.title?this.playerContent.title:null;"episode"===r&&o&&(o="Ep"+this.playerContent.episodeNumber+"-"+o),t.content_title=o?o.toLowerCase():"N.A",t.content_streamid=n&&n.eventAttributeObj&&n.eventAttributeObj.content_streamid?n.eventAttributeObj.content_streamid:"",t.content_url=this.getContentUrl(),t.content_duration=n&&n.eventAttributeObj&&n.eventAttributeObj.content_duration?n.eventAttributeObj.content_duration:"",t.event_source=localStorage.getItem("event_source")?localStorage.getItem("event_source"):"N.A",n&&n.currentPlayerType&&"episode"==n.currentPlayerType&&(t.parent_content_title=n&&n.eventAttributeObj&&n.eventAttributeObj.parent_content_title?n.eventAttributeObj.parent_content_title.toLowerCase():""),window.mobileAnalyticsClient.recordEvent("_content.playback",t,i),localStorage.removeItem("currentPlayerDetails")}},vHandleProgress:function(){this.durationInSec=this.vPlayer.currentTime;if(this.vPlayer&&(this.vProgress.value=this.vPlayer.currentTime/this.vPlayer.duration*100,this.vCurrentTime.innerHTML=this.vCalcTimeLine(this.vPlayer.currentTime),this.showComUpNextTimeNextEpisodeCountDown=Math.ceil(this.vPlayer.duration-this.vPlayer.currentTime)),this.playerPlaylist&&this.playerPlaylist.length&&this.vPlayer&&this.vPlayer.duration&&this.vPlayer.currentTime&&this.showComUpNextTime&&this.vPlayer.duration-this.vPlayer.currentTime<this.showComUpNextTime?"show"!=this.playerContent.contentName&&(this.showComUpNextTag=this.playListPosition!==this.playerPlaylist.length):this.showComUpNextTag=!1,this.vPlayer&&this.vPlayer.currentTime&&this.playerContent&&this.playerContent.skipIntro){var e=Math.floor(this.vPlayer.currentTime),t=parseInt(this.playerContent.skipIntro.startskipintro),i=this.playerContent.skipIntro.endskipintro?parseInt(this.playerContent.skipIntro.endskipintro):void 0;e>=t&&e<i?"show"!=this.playerContent.contentName&&(this.ShowSkipTag=!0):this.ShowSkipTag=!1}if(this.vPlayer&&this.vPlayer.currentTime){var n=void 0;n=this.vPlayer.currentTime/this.vPlayer.duration*100,this.fullscreenExitProgress={progress:this.vPlayer.currentTime,duration:this.vPlayer.duration,id:this.playerContent.id};var r=void 0,o=void 0;o=localStorage.getItem("altConfig")?JSON.parse(localStorage.getItem("altConfig")):void 0,r=o&&o.webEngage&&o.webEngage.completePercentage?100*parseFloat(o.webEngage.completePercentage):90,n>=r&&this.completeEventTrigger(n)}},vLoadedData:function(){var e=this;if(this.isPlaybackExitEvent=!1,this.playRelatedEpisodeClickFlag=!1,this.flagRouteChanged=!1,this.vToggleLoader(!0),this.returnFromLoadAfterStop)return this.vToggleLoader(!1),this.vPlayer&&!this.vPlayer.paused&&this.vPlayer.pause(),void this.hideVideoController(!1,"vLoadedData");if(this.vToggler.src="/src/assets/player/v2/ic_Play.png",this.plrVideoEnded=!1,this.continueProgress&&"trailer"!=this.plrLoadedVideoType&&(this.vPlayer.currentTime=100==this.continueProgress?0:this.continueProgress),this.vPlayer.play(),this.vDuration.innerHTML=this.vCalcTimeLine(this.vPlayer.duration),this.vUpdateButton(),this.plrVideoLoaded=!0,this.plrContentLength=this.vPlayer.duration,this.vToggleMainControls(!0),this.toggleControls(!0),this.vToggleLoader(!1),this.toggleControlTimer&&(console.log(this.toggleControlTimer),clearTimeout(this.toggleControlTimer)),this.toggleControlTimer=setTimeout(function(){e.toggleControls(!1),e.vToggleMainControls(!1),e.vToggleToggler(!1,"vLoadedData toggleControlTimer")},this.toggleCtrlTimerTime),document.getElementById("v-progress").style.display="block",window.mobileAnalyticsClient){var t=this.getAWSMACommonAttributes();t.content_id=this.playerContent&&this.playerContent.id?this.playerContent.id:null;var i=this.playerContent&&this.playerContent.contentType?this.playerContent.contentType:null;t.content_type=i;var n=this.playerContent&&this.playerContent.title?this.playerContent.title:null;"episode"===i&&n&&(n="Ep"+this.playerContent.episodeNumber+"-"+n),t.content_title=n?n.toLowerCase():"N.A",this.playerContent&&this.playerContent.contentType&&"series"==this.playerContent.contentType&&(t.content_type="trailer"),t.content_streamid=this.playerContent&&this.playerContent.stream&&this.playerContent.stream.streamId?this.playerContent.stream.streamId:null,t.content_url=this.getContentUrl(),t.content_duration=this.vPlayer&&this.vPlayer.duration?this.vPlayer.duration:null,t.event_source=localStorage.getItem("event_source")?localStorage.getItem("event_source"):"N.A",t.language_code=this.playerContent&&this.playerContent.mainLanguage?this.playerContent.mainLanguage:null;var r=this.getPlayerEventMode();t.event_mode=r||"N.A";if(this.playerContent&&this.playerContent.contentType&&"series"==this.playerContent.contentType&&(t.content_type="trailer",this.playerContent&&this.playerContent.trailer&&(t.content_streamid=this.playerContent&&this.playerContent.trailer&&this.playerContent.trailer.trailerId?this.playerContent.trailer.trailerId:null)),this.$route.name&&"media"==this.$route.name&&"trailer"==this.plrLoadedVideoType&&(t.content_type="trailer"),this.playerContent&&this.playerContent.bts&&(t.content_type="bts"),this.$route.name&&"episode"==this.$route.name){var o="Ep"+this.playerContent.episodeNumber+"-"+this.playerContent.title;t.content_title=o.toLowerCase(),this.playerContent&&this.playerContent.seriesId,this.playerContent&&this.playerContent.seriesTitle&&(t.parent_content_title=this.playerContent.seriesTitle.toLowerCase())}t.event_action="start",localStorage.setItem("currentPlayerDetails",JSON.stringify({eventAttributeObj:t,currentPlayerType:this.$route.name})),this.currentAWSEvent=!0;var a=this.vPlayer.currentTime/this.vPlayer.duration*100;a=isNaN(a)?0:a;var s=this.vPlayer?this.vPlayer.currentTime:"N.A",l={start_time:s,progress:a};window.mobileAnalyticsClient.recordEvent("_content.playback",t,l),this.webenageEventTrigger("start",a)}"trailer"==this.plrLoadedVideoType?this.showTagTrailer=!0:this.showTagTrailer=!1,this.comingSoonTag?this.showTagComingsoon=!0:this.showTagComingsoon=!1;var h=void 0;localStorage.getItem("altUser")&&(h=JSON.parse(localStorage.getItem("altUser")));var u=void 0;if(h&&localStorage.getItem("altOrder")&&(u=JSON.parse(localStorage.getItem("altOrder"))),this.playerContent)if(h){if(this.showTagLogin=!1,"episode"==this.playerContent.contentType)return this.showTagSubscribe=!1,void(this.showTagRentTvod=!1);if(this.showTagGeoCtaCheck?this.showTagGeoCta=!0:this.showTagGeoCta=!1,u&&u.subscription&&u.subscription.hasOrder&&0==u.subscription.expired)return this.showTagSubscribe=!1,void(this.showTagRentTvod=!1);if(this.playerContent.isFreeContent||this.playerContent.anonymousAccess||this.playerContent.comingSoon)return this.showTagSubscribe=!1,void(this.showTagRentTvod=!1);if(this.playerContent.tvod){this.showTagSubscribe=!1;var c=localStorage.getItem("homeDomain").toLowerCase();if(u&&u.tvod&&u.tvod.hasOrder){var d=void 0;for(d in u.tvod.products){if(u.tvod.products[d].product.id==this.playerContent.tvod[c]){this.showTagRentTvod=!1;break}this.showTagRentTvod=this.altMessages.playerRentSubscribeLabel}}else this.showTagRentTvod=this.altMessages.playerRentSubscribeLabel}else this.showTagRentTvod=!1,this.showTagSubscribe=this.altMessages.playerSubscribeLabel;this.showTagGeoCtaCheck?this.showTagGeoCta=!0:this.showTagGeoCta=!1}else if(this.playerContent.tvod){if("episode"==this.playerContent.contentType)return;this.showTagLogin=this.altMessages.playerSignInToRentLabel}else{if(this.playerContent.anonymousAccess||this.playerContent.comingSoon)return void(this.showTagLogin=!1);"movie"==this.playerContent.contentType&&this.playerContent.isFreeContent?this.showTagLogin=this.altMessages.playerSignInLabel:this.showTagLogin=this.altMessages.playerSignInAndSubscribeLabel}},vResetForReplay:function(){this.vPlayer.currentTime=0,this.vCurrentTime.innerHTML=this.vCalcTimeLine(0),this.vProgress.value=0,this.vDuration.innerHTML=this.vCalcTimeLine(isNaN(this.vPlayer.duration)?0:this.vPlayer.duration),this.updateButton(!0)},vCanPlayThroughCB:function(){},getTitleNameWebEnage:function(){if(!this.playerContent)return"";var e="";return"trailer"==this.playerContent.contentType?(this.playerContent.contentId,e=this.playerContent.seriesTitle?this.playerContent.seriesTitle:this.playerContent.title):"series"==this.playerContent.contentType||"standup"==this.playerContent.contentType?(this.playerContent.seriesId,e=this.playerContent.seriesTitle?this.playerContent.seriesTitle:this.playerContent.title):"movie"==this.playerContent.contentType?(this.playerContent.contentId,e=this.playerContent.seriesTitle?this.playerContent.seriesTitle:this.playerContent.title):"episode"==this.playerContent.contentType&&(e=this.showTrailerInfo&&this.showTrailerInfo.title?this.showTrailerInfo.title:""),String(e).toLowerCase()},getContentTypeForWebenage:function(){var e=void 0;return e=this.playerContent&&this.playerContent.contentType?this.playerContent.contentType:"",this.playerContent&&this.playerContent.contentType&&"series"==this.playerContent.contentType&&(e="trailer"),this.$route.name&&"media"==this.$route.name&&this.plrLoadedVideoType&&"trailer"==this.plrLoadedVideoType&&(e="trailer"),e},webenageEventTrigger:function(e,t){if("pause"!=e&&"resume"!=e&&"stop"!=e){var i=this.altDetectPlatform(),n=void 0;localStorage.getItem("altGeoData")&&(n=JSON.parse(localStorage.getItem("altGeoData")));var r=this.playerContent&&this.playerContent.contentType?String(this.playerContent.contentType):"N.A",o=this.playerContent&&this.playerContent.isFreeContent?"free":"paid";this.playerContent&&"series"==this.playerContent.contentType&&(o="free"),this.$route.name&&"media"==this.$route.name&&"trailer"==this.plrLoadedVideoType&&(o="free");var a={gt_platform:i&&i.os&&i.osVersion?i.os+" "+i.osVersion:" ",gt_device_make:i&&i.device_model?i.device_model:" ",gt_country:n&&n.country&&n.country.names&&n.country.names.en?n.country.names.en:"",gt_city:n&&n.city&&n.city.names&&n.city.names.en?String(n.city.names.en):"",gt_device_timestamp:new Date,gt_content_source:localStorage.getItem("event_source")?localStorage.getItem("event_source"):"",gt_content_id:this.playerContent&&this.playerContent.id?this.playerContent.id:"",gt_content_type:this.getContentTypeForWebenage(),gt_content_alt_id:this.playerContent&&this.playerContent.externalId?this.playerContent.externalId:"",gt_playback_mode:"live",gt_playback_media_type:o,gt_playback_state:e||"",percentage_video_played:t,gt_content_parent_title:this.getTitleNameWebEnage()?this.getTitleNameWebEnage():"",gt_episode_title:this.playerContent&&this.playerContent.title?String(this.playerContent.title).toLowerCase():"",gt_content_parent_ID:this.showTrailerInfo&&this.showTrailerInfo.id?this.showTrailerInfo.id:""};"episode"==r&&(a.gt_episode_count=this.playerContent&&this.playerContent.episodeNumber?this.playerContent.episodeNumber:"","start"==e?(a.gt_episode_thumbnail_url=this.playerContent&&this.playerContent.images&&this.playerContent.images.webengage?this.playerContent.images.webengage:"",a.gt_episode_description=this.playerContent&&this.playerContent.shortDescription?this.playerContent.shortDescription:""):"complete"==e&&(a.gt_next_episode_thumbnail_url=this.gt_next_episode_thumbnail_url&&this.gt_next_episode_id_webenage!=this.playerContent.id?this.gt_next_episode_thumbnail_url:"",a.gt_next_episode_description=this.gt_next_episode_description&&this.gt_next_episode_id_webenage!=this.playerContent.id?this.gt_next_episode_description:"",a.gt_next_episode_id=this.gt_next_episode_id_webenage&&this.gt_next_episode_id_webenage!=this.playerContent.id?this.gt_next_episode_id_webenage:"")),webengage&&webengage.track("gt_play",a)}},vPlayEventCB:function(){var e=this;if(this.playNextPlaylistItemFlag=!1,this.vUpdateButton(),this.toggleControlTimer&&clearTimeout(this.toggleControlTimer),this.toggleControlTimer=setTimeout(function(){e.toggleControls(!1),e.vToggleToggler(!1,"vPlayEventCB toggleControlTimer"),e.vToggleMainControls(!1)},this.toggleCtrlTimerTime),this.vControls.addEventListener("click",this.vControlsClickEventCB),"trailer"==this.plrLoadedVideoType&&c.eventBus.$emit("plrPlayingTrailerEvent",!0),window.mobileAnalyticsClient&&this.plrVideoLoaded){var t=this.getAWSMACommonAttributes();t.content_id=this.playerContent&&this.playerContent.id?this.playerContent.id:null;var i=this.playerContent&&this.playerContent.contentType?this.playerContent.contentType:null;t.content_type=i;var n=this.playerContent&&this.playerContent.title?this.playerContent.title:null;if("episode"===i&&n&&(n="Ep"+this.playerContent.episodeNumber+"-"+n),t.content_title=n?n.toLowerCase():"N.A",t.content_streamid=this.playerContent&&this.playerContent.stream&&this.playerContent.stream.streamId?this.playerContent.stream.streamId:null,t.content_url=this.getContentUrl(),t.content_duration=this.vPlayer&&this.vPlayer.duration?this.vPlayer.duration:null,t.event_source=localStorage.getItem("event_source")?localStorage.getItem("event_source"):"N.A",t.language_code=this.playerContent&&this.playerContent.mainLanguage?this.playerContent.mainLanguage:null,this.playerContent&&this.playerContent.contentType&&"series"==this.playerContent.contentType&&(t.content_type="trailer",this.playerContent&&this.playerContent.trailer&&(t.content_streamid=this.playerContent&&this.playerContent.trailer&&this.playerContent.trailer.trailerId?this.playerContent.trailer.trailerId:null)),this.$route.name&&"episode"==this.$route.name){var r="Ep"+this.playerContent.episodeNumber+"-"+this.playerContent.title;t.content_title=r.toLowerCase(),this.playerContent&&this.playerContent.seriesId,this.playerContent&&this.playerContent.seriesTitle&&(t.parent_content_title=this.playerContent.seriesTitle.toLowerCase())}this.$route.name&&"media"==this.$route.name&&"trailer"==this.plrLoadedVideoType&&(t.content_type="trailer"),this.playerContent&&this.playerContent.bts&&(t.content_type="bts");t.event_action="resume";var o=this.getPlayerEventMode();t.event_mode=o||"N.A";var a=this.vPlayer.currentTime/this.vPlayer.duration*100;a=isNaN(a)?0:a;var s=this.vPlayer?this.vPlayer.currentTime:"N.A",l={start_time:s,progress:a};if(this.currentAWSEvent)return;window.mobileAnalyticsClient.recordEvent("_content.playback",t,l)}if(this.playerContent){var h="";"trailer"==this.playerContent.contentType?(this.playerContent.contentId,h=this.playerContent.seriesTitle?this.playerContent.seriesTitle:this.playerContent.title):"series"==this.playerContent.contentType||"standup"==this.playerContent.contentType?(this.playerContent.seriesId,h=this.playerContent.seriesTitle?this.playerContent.seriesTitle:this.playerContent.title):"movie"==this.playerContent.contentType?(this.playerContent.contentId,h=this.playerContent.seriesTitle?this.playerContent.seriesTitle:this.playerContent.title):"episode"==this.playerContent.contentType&&(this.playerContent.contentId,this.playerContent.seasonId,this.playerContent.seriesId,h=this.playerContent.seriesTitle?this.playerContent.seriesTitle:this.playerContent.title);var u=this.altDetectPlatform(),d=void 0;localStorage.getItem("altGeoData")&&(d=JSON.parse(localStorage.getItem("altGeoData"))),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"gt_play",eventAction:"playback",eventCategory:"gt_play",eventLabel:"playback",eventValue:1,gtl_content_parent_title:h||"",gtl_episode_title:this.playerContent&&this.playerContent.title&&this.playerContent.seriesTitle?this.playerContent.title:"",gtl_platform:u&&u.os&&u.osVersion?u.os+" "+u.osVersion:" ",gtl_device_make:u&&u.device_model?u.device_model:" ",gtl_country:d&&d.country&&d.country.names&&d.country.names.en?d.country.names.en:"",gtl_city:d&&d.city&&d.city.names&&d.city.names.en?d.city.names.en:"",gtl_device_timestamp:(new Date).getTime(),gtl_content_source:localStorage.getItem("event_source")?localStorage.getItem("event_source"):"",gtl_content_id:this.playerContent&&this.playerContent.id?this.playerContent.id:"",gtl_content_type:this.playerContent&&this.playerContent.contentType?this.playerContent.contentType:"",gtl_content_alt_id:this.playerContent&&this.playerContent.externalId?this.playerContent.externalId:"",gtl_episode_count:this.playerContent&&this.playerContent.episodeNumber?this.playerContent.episodeNumber:""})}},vPauseEventCB:function(){if(this.vUpdateButton(),this.toggleControlTimer&&clearTimeout(this.toggleControlTimer),this.vToggleToggler(!0),this.vToggleMainControls(!0),this.toggleControls(!0),0!=this.plrVideoLoaded||!this.plrVideoEnded||!this.playNextPlaylistItemFlag){if(window.mobileAnalyticsClient){var e=this.getAWSMACommonAttributes();e.content_id=this.playerContent&&this.playerContent.id?this.playerContent.id:null;var t=this.playerContent&&this.playerContent.contentType?this.playerContent.contentType:null;e.content_type=t;var i=this.playerContent&&this.playerContent.title?this.playerContent.title:null;if("episode"===t&&i&&(i="Ep"+this.playerContent.episodeNumber+"-"+i),e.content_title=i?i.toLowerCase():"N.A",this.playerContent&&this.playerContent.contentType&&"series"==this.playerContent.contentType&&(e.content_type="trailer"),e.content_streamid=this.playerContent&&this.playerContent.stream&&this.playerContent.stream.streamId?this.playerContent.stream.streamId:null,e.content_url=this.getContentUrl(),e.content_duration=this.vPlayer&&this.vPlayer.duration?this.vPlayer.duration:null,e.event_source=localStorage.getItem("event_source")?localStorage.getItem("event_source"):"N.A",e.language_code=this.playerContent&&this.playerContent.mainLanguage?this.playerContent.mainLanguage:null,this.playerContent&&this.playerContent.contentType&&"series"==this.playerContent.contentType&&(e.content_type="trailer",this.playerContent&&this.playerContent.trailer&&(e.content_streamid=this.playerContent&&this.playerContent.trailer&&this.playerContent.trailer.trailerId?this.playerContent.trailer.trailerId:null)),this.$route.name&&"episode"==this.$route.name){var n=this.playerContent&&this.playerContent.episodeNumber?this.playerContent.episodeNumber:"N.A",r=this.playerContent&&this.playerContent.title?this.playerContent.title:"N.A",o="Ep"+n+"-"+r;e.content_title=o.toLowerCase(),this.playerContent&&this.playerContent.seriesId,this.playerContent&&this.playerContent.seriesTitle&&(e.parent_content_title=this.playerContent.seriesTitle.toLowerCase())}this.$route.name&&"media"==this.$route.name&&"trailer"==this.plrLoadedVideoType&&(e.content_type="trailer"),this.playerContent&&this.playerContent.bts&&(e.content_type="bts");var a=this.playRelatedEpisodeClickFlag||this.flagRouteChanged?"stop":"pause";"stop"==a&&(this.returnFromLoadAfterStop=!0,this.nextEpisodePlayLoadMainfest=!0),this.currentAWSEvent=!1;var s=this.vPlayer&&this.vPlayer.currentTime&&this.vPlayer.duration?this.vPlayer.currentTime/this.vPlayer.duration*100:0;s=isNaN(s)?0:s,e.event_action=a;var l=this.getPlayerEventMode();e.event_mode=l||"N.A";var h={progress:s};"pause"==a&&s&&s<95&&(h.start_time=this.vPlayer&&this.vPlayer.currentTime?this.vPlayer.currentTime:"N.A",this.isPlaybackExitEvent||window.mobileAnalyticsClient.recordEvent("_content.playback",e,h));var u=this;setTimeout(function(){if("stop"==a){var t=void 0;localStorage.getItem("currentPlayerDetails")&&(h.stop_time=u.stopMatrixInfo&&u.stopMatrixInfo.stop_time?u.stopMatrixInfo.stop_time:0,h.progress=u.stopMatrixInfo&&u.stopMatrixInfo.progress?u.stopMatrixInfo.progress:0,t=JSON.parse(localStorage.getItem("currentPlayerDetails")),e.content_id=t&&t.eventAttributeObj&&t.eventAttributeObj.content_id?t.eventAttributeObj.content_id:" ",e.content_type=t&&t.eventAttributeObj&&t.eventAttributeObj.content_type?t.eventAttributeObj.content_type:"N.A",e.content_title=t&&t.eventAttributeObj&&t.eventAttributeObj.content_title?t.eventAttributeObj.content_title.toLowerCase():"N.A",e.content_streamid=t&&t.eventAttributeObj&&t.eventAttributeObj.content_streamid?t.eventAttributeObj.content_streamid:"",e.content_url=t&&t.eventAttributeObj&&t.eventAttributeObj.content_url?t.eventAttributeObj.content_url:" ",e.content_duration=t&&t.eventAttributeObj&&t.eventAttributeObj.content_duration?t.eventAttributeObj.content_duration:"",e.event_source=localStorage.getItem("event_source")?localStorage.getItem("event_source"):"N.A",e.language_code=this.playerContent&&this.playerContent.mainLanguage?this.playerContent.mainLanguage:null,t&&t.currentPlayerType&&"episode"==t.currentPlayerType&&(e.parent_content_title=t&&t.eventAttributeObj&&t.eventAttributeObj.parent_content_title?t.eventAttributeObj.parent_content_title.toLowerCase():""),window.mobileAnalyticsClient.recordEvent("_content.playback",e,h),localStorage.removeItem("currentPlayerDetails"))}},500),"pause"==a&&h&&100==h.progress&&(a="complete")}var c=void 0;if(localStorage.getItem("altUser")&&(c=!0),c){var d=(this.$route.name,this.$route.params.id),p=this.vPlayer?this.vPlayer.currentTime:void 0,f=this.vPlayer?this.vPlayer.duration:void 0;d&&this.plrVideoLoaded&&d==this.id&&this.updateMediaProgress(this.id,p,f)}}},updateMediaProgressList:function(){var e=Math.round(this.vPlayer.duration),t=Math.round(this.vPlayer.currentTime),i=Math.ceil(t/e*100);if(i=0==i?100:i,!isNaN(e)&&!isNaN(i)){var n={media_id:this.mediaId,progress:i,length:e};if(localStorage.getItem("mediaProgressList")){var r=JSON.parse(localStorage.getItem("mediaProgressList")),o=this.getUniqueProgressList(n,r);localStorage.setItem("mediaProgressList",JSON.stringify(o))}else{var r=new Array;r.push(n),localStorage.setItem("mediaProgressList",JSON.stringify(r))}}},updateMediaProgress:function(e,t,i){if("trailer"!=this.plrLoadedVideoType&&"poster"!=this.plrLoadedVideoType&&t&&i&&!isNaN(t)&&!isNaN(i)){t=t>i?i:t,t==i&&(t=0),this.actPutPlayerProgress({media_id:e,progress:t}).then(function(e){},function(e){});var n=Math.ceil(Math.round(t)/Math.round(i)*100);n=100==n?0:n;var r={media_id:e,progress:n,length:i};if(localStorage.getItem("mediaProgressList")){var o=JSON.parse(localStorage.getItem("mediaProgressList")),a=this.getUniqueProgressList(r,o);localStorage.setItem("mediaProgressList",JSON.stringify(a))}else{var o=new Array;o.push(r),localStorage.setItem("mediaProgressList",JSON.stringify(o))}c.eventBus.$emit("DetailButtonChangeExitButtonChange",!0)}},vEndedCB:function(){var e=this;this.toggleControlTimer&&clearTimeout(this.toggleControlTimer),this.vControls.removeEventListener("click",this.vControlsClickEventCB),this.vToggleToggler(!1,"vEndedCB"),this.vToggleMainControls(!1),this.toggleControls(!1),this.plrVideoEnded=!0,this.plrVideoLoaded=!1,this.showTagLogin=!1,this.showTagSubscribe=!1,this.showTagGeoCta=!1;var t=100,i=void 0;if(this.vPlayer&&(t=this.vPlayer.currentTime/this.vPlayer.duration*100,t=isNaN(t)?100:t,i=this.vPlayer.currentTime),this.playerPlaylist&&this.playerPlaylist.length)return this.playNextPlaylistItemFlag=!0,void this.vShaka.unload().then(function(){e.playNextPlaylistItem()});var n=void 0;if(localStorage.getItem("altUser")&&(n=JSON.parse(localStorage.getItem("altUser"))),"trailer"==this.plrLoadedVideoType){if("movie"==this.playerContent.contentType)if(n){if(this.playerContent.stream&&(this.playerContent.isFreeContent||this.playerContent.userHasAccess))return this.plrIsDrmVideo=!0,void this.vShaka.unload().then(function(){if(e.playMovieBtnClickCB(),window.mobileAnalyticsClient){var n=e.getAWSMACommonAttributes();n.content_id=e.playerContent&&e.playerContent.id?e.playerContent.id:null;var r=e.playerContent&&e.playerContent.contentType?e.playerContent.contentType:null;n.content_type=r;var o=e.playerContent&&e.playerContent.title?e.playerContent.title:null;if("episode"===r&&o&&(o="Ep"+e.playerContent.episodeNumber+"-"+o),n.content_title=o?o.toLowerCase():"N.A",n.content_streamid=e.playerContent&&e.playerContent.stream&&e.playerContent.stream.streamId?e.playerContent.stream.streamId:null,n.content_url=e.getContentUrl(),n.content_duration=e.vPlayer&&e.vPlayer.duration?e.vPlayer.duration:null,n.event_source=localStorage.getItem("event_source")?localStorage.getItem("event_source"):"N.A",n.language_code=e.playerContent&&e.playerContent.mainLanguage?e.playerContent.mainLanguage:null,e.$route.name&&"episode"==e.$route.name){var a="Ep"+e.playerContent.episodeNumber+"-"+e.playerContent.title;n.content_title=a.toLowerCase(),e.playerContent&&e.playerContent.seriesId,e.playerContent&&e.playerContent.seriesTitle&&(n.parent_content_title=e.playerContent.seriesTitle.toLowerCase())}n.event_action="complete";var s=e.getPlayerEventMode();n.event_mode=s||"N.A";var l={progress:t,stop_time:i};window.mobileAnalyticsClient.recordEvent("_content.playback",n,l)}})}else if(this.playerContent.anonymousAccess&&this.playerContent.stream)return this.plrIsDrmVideo=!1,void this.vShaka.unload().then(function(){if(e.playMovieBtnClickCB(),window.mobileAnalyticsClient){var n=e.getAWSMACommonAttributes();n.content_id=e.playerContent&&e.playerContent.id?e.playerContent.id:null;var r=e.playerContent&&e.playerContent.contentType?e.playerContent.contentType:null;n.content_type=r;var o=e.playerContent&&e.playerContent.title?e.playerContent.title:null;if("episode"===r&&o&&(o="Ep"+e.playerContent.episodeNumber+"-"+o),n.content_title=o?o.toLowerCase():"N.A",n.content_streamid=e.playerContent&&e.playerContent.stream&&e.playerContent.stream.streamId?e.playerContent.stream.streamId:null,n.content_url=e.getContentUrl(),n.content_duration=e.vPlayer&&e.vPlayer.duration?e.vPlayer.duration:null,n.event_source=localStorage.getItem("event_source")?localStorage.getItem("event_source"):"N.A",n.language_code=e.playerContent&&e.playerContent.mainLanguage?e.playerContent.mainLanguage:null,e.$route.name&&"episode"==e.$route.name){var a="Ep"+e.playerContent.episodeNumber+"-"+e.playerContent.title;n.content_title=a.toLowerCase(),e.playerContent&&e.playerContent.seriesId,e.playerContent&&e.playerContent.seriesTitle&&(n.parent_content_title=e.playerContent.seriesTitle.toLowerCase())}n.event_action="complete";var s=e.getPlayerEventMode();n.event_mode=s||"N.A";var l={progress:t,stop_time:i};window.mobileAnalyticsClient.recordEvent("_content.playback",n,l)}});c.eventBus.$emit("plrPlayingTrailerEvent",!1)}"movie"==this.plrLoadedVideoType&&(this.plrIsDrmVideo=!!n),this.vShaka.unload().then(function(){e.vUpdateButton(),e.vToggleMainControls(!1),e.vToggleToggler(!0,"vEndedCB unload"),e.toggleControls(!0)}),this.vLoadedEndedCB()},vLoadedEndedCB:function(){if(this.showComUpNextTag||(this.vExitFullScreenMode(),c.eventBus.$emit("togglePlayerScreenEvent",!1)),"movie"!=!this.playerContent.contentType){var e=void 0;localStorage.getItem("altUser")&&(e=JSON.parse(localStorage.getItem("altUser")));var t=void 0;if(e&&localStorage.getItem("altOrder")&&(t=JSON.parse(localStorage.getItem("altOrder"))),"trailer"==this.plrLoadedVideoType&&this.trailerCountinueGeoCheck)return void c.eventBus.$emit("toggleGeoBlockEvent",!0);if("trailer"==this.plrLoadedVideoType||"episode"==this.plrLoadedVideoType||"movie"==this.plrLoadedVideoType)if(e){if(t&&t.subscription&&t.subscription.hasOrder&&0==t.subscription.expired)return!1;c.eventBus.$emit("toggleSubscribePopupEvent",!0)}else c.eventBus.$emit("toggleSigninPopupEvent",!0)}},vSeekingCB:function(e){},vSeekedCB:function(e){this.vPlayer&&this.vPlayer.paused&&(this.toggleControlTimer&&clearTimeout(this.toggleControlTimer),this.vToggleToggler(!0,"vSeekedCB"),this.vToggleMainControls(!0),this.toggleControls(!0))},vHanleError:function(e){},vShakaBufferingCB:function(e){if(this.isVPlayerBuffering=e.buffering,e.buffering&&(this.contentBufferStartTime=e.timeStamp),e.buffering||(this.contentBufferStopTime=e.timeStamp),this.plrVideoLoaded&&(this.vToggleLoader(e.buffering),window.mobileAnalyticsClient)){var t=this.getAWSMACommonAttributes();t.content_id=this.playerContent&&this.playerContent.id?this.playerContent.id:null;var i=this.playerContent&&this.playerContent.contentType?this.playerContent.contentType:null;t.content_type=i;var n=this.playerContent&&this.playerContent.title?this.playerContent.title:null;if("episode"===i&&n&&(n="Ep"+this.playerContent.episodeNumber+"-"+n),t.content_title=n?n.toLowerCase():"N.A",t.content_streamid=this.playerContent&&this.playerContent.stream&&this.playerContent.stream.streamId?this.playerContent.stream.streamId:null,t.content_url=this.getContentUrl(),t.content_duration=this.vPlayer&&this.vPlayer.duration?this.vPlayer.duration:null,t.language_code=this.playerContent&&this.playerContent.mainLanguage?this.playerContent.mainLanguage:null,this.playerContent&&this.playerContent.contentType&&"series"==this.playerContent.contentType&&(t.content_type="trailer",this.playerContent&&this.playerContent.trailer&&(t.content_streamid=this.playerContent&&this.playerContent.trailer&&this.playerContent.trailer.trailerId?this.playerContent.trailer.trailerId:null)),this.$route.name&&"episode"==this.$route.name){var r="Ep"+this.playerContent.episodeNumber+"-"+this.playerContent.title;t.content_title=r.toLowerCase(),this.playerContent&&this.playerContent.seriesId,this.playerContent&&this.playerContent.seriesTitle&&(t.parent_content_title=this.playerContent.seriesTitle.toLowerCase())}if(this.$route.name&&"media"==this.$route.name&&"trailer"==this.plrLoadedVideoType&&(t.content_type="trailer"),e.buffering){t.event_action="buffer";var o=this.getPlayerEventMode();t.event_mode=o||"N.A";var a=this.vPlayer?this.vPlayer.currentTime:"N.A";this.bufferStartTime=a;var s=Math.abs((this.contentBufferStopTime-this.contentBufferStartTime)/1e3/15);isNaN(s)&&(s=1)}else{if(!this.countBufferFlag)return void(this.countBufferFlag=!0);var l=Math.abs((this.contentBufferStopTime-this.contentBufferStartTime)/1e3),h=void 0,u=void 0,c=void 0;this.currentAWSEvent=!1;var d=this.getAWSMACommonAttributes();d.content_id=this.playerContent&&this.playerContent.id?this.playerContent.id:null;var p=this.playerContent&&this.playerContent.contentType?this.playerContent.contentType:null;t.content_type=p;var f=this.playerContent&&this.playerContent.title?this.playerContent.title:null;if("episode"===p&&f&&(f="Ep"+this.playerContent.episodeNumber+"-"+f),t.content_title=f?f.toLowerCase():"N.A",d.content_streamid=this.playerContent&&this.playerContent.stream&&this.playerContent.stream.streamId?this.playerContent.stream.streamId:null,d.content_url=this.getContentUrl(),d.content_duration=this.vPlayer&&this.vPlayer.duration?this.vPlayer.duration:null,t.event_source=localStorage.getItem("event_source")?localStorage.getItem("event_source"):"N.A",t.language_code=this.playerContent&&this.playerContent.mainLanguage?this.playerContent.mainLanguage:null,this.playerContent&&this.playerContent.contentType&&"series"==this.playerContent.contentType&&(d.content_type="trailer",this.playerContent&&this.playerContent.trailer&&(d.content_streamid=this.playerContent&&this.playerContent.trailer&&this.playerContent.trailer.trailerId?this.playerContent.trailer.trailerId:null)),this.$route.name&&"episode"==this.$route.name){var g="Ep"+this.playerContent.episodeNumber+"-"+this.playerContent.title;d.content_title=g.toLowerCase(),this.playerContent&&this.playerContent.seriesId&&(d.parent_content_id=this.playerContent.seriesId),this.playerContent&&this.playerContent.seriesTitle&&(d.parent_content_title=this.playerContent.seriesTitle.toLowerCase())}this.$route.name&&"media"==this.$route.name&&"trailer"==this.plrLoadedVideoType&&(d.content_type="trailer"),this.playerContent&&this.playerContent.bts&&(t.content_type="bts"),u="buffer",d.event_action=u;var v=this.getPlayerEventMode();d.event_mode=v||"N.A",c=this.vPlayer?this.vPlayer.currentTime:"N.A",c=this.continueProgress?this.continueProgress:"N.A",h={start_time:c,duration:l},this.isPlaybackExitEvent||window.mobileAnalyticsClient.recordEvent("_content.playback",d,h),u="resume";var m=this.vPlayer.paused?"pause":"play";t.event_action=u;var y=this.getPlayerEventMode();t.event_mode=y||"N.A";var b=this.vPlayer.currentTime/this.vPlayer.duration*100;b=isNaN(b)?0:b,c=this.vPlayer?this.vPlayer.currentTime:"N.A",h={start_time:c,progress:b},t.event_source=localStorage.getItem("even_source"),"play"==m&&(this.isPlaybackExitEvent||window.mobileAnalyticsClient.recordEvent("_content.playback",t,h))}}},vBuggeringCB:function(e){this.vToggleLoader(e.buffering)},vControlsClickEventCB:function(){var e=this;this.toggleControls(!0),this.vToggleToggler(!0,"vControlsClickEventCB"),this.vToggleMainControls(!0),this.toggleControlTimer&&clearTimeout(this.toggleControlTimer),this.toggleControlTimer=setTimeout(function(){console.log("test1 done"),e.toggleControls(!1),e.vToggleToggler(!1,"vControlsClickEventCB toggleControlTimer"),e.vToggleMainControls(!1)},this.toggleCtrlTimerTime)},vSeek:function(e){var t=this;this.vPlayer.removeEventListener("timeupdate",this.vHandleProgress),this.toggleControlTimer&&clearTimeout(this.toggleControlTimer),this.toggleControlTimer=setTimeout(function(){t.toggleControls(!1)},this.toggleCtrlTimerTime)},contentSeeked:function(e){this.vPlayer.addEventListener("timeupdate",this.vHandleProgress);var t=this.vPlayer.currentTime;this.showComUpNextTag=!1,this.vPlayer.currentTime=parseFloat(e.target.value/100)*this.vPlayer.duration;var i=parseInt(e.target.value);this.playerContent.durationInSec;if(this.contentSeekStopTime=this.vPlayer.currentTime,window.mobileAnalyticsClient){var n=this.getAWSMACommonAttributes();n.content_id=this.playerContent&&this.playerContent.id?this.playerContent.id:null;var r=this.playerContent&&this.playerContent.contentType?this.playerContent.contentType:null;n.content_type=r;var o=this.playerContent&&this.playerContent.title?this.playerContent.title:null;if("episode"===r&&o&&(o="Ep"+this.playerContent.episodeNumber+"-"+o),n.content_title=o?o.toLowerCase():"N.A",n.content_streamid=this.playerContent&&this.playerContent.stream&&this.playerContent.stream.streamId?this.playerContent.stream.streamId:null,n.content_url=this.getContentUrl(),n.content_duration=this.vPlayer?this.vPlayer.duration:null,n.event_source=localStorage.getItem("event_source")?localStorage.getItem("event_source"):"N.A",n.language_code=this.playerContent&&this.playerContent.mainLanguage?this.playerContent.mainLanguage:null,this.playerContent&&this.playerContent.contentType&&"series"==this.playerContent.contentType&&(n.content_type="trailer",this.playerContent&&this.playerContent.trailer&&(n.content_streamid=this.playerContent&&this.playerContent.trailer&&this.playerContent.trailer.trailerId?this.playerContent.trailer.trailerId:null)),this.$route.name&&"episode"==this.$route.name){var a="Ep"+this.playerContent.episodeNumber+"-"+this.playerContent.title;n.content_title=a.toLowerCase(),this.playerContent&&this.playerContent.seriesId,this.playerContent&&this.playerContent.seriesTitle&&(n.parent_content_title=this.playerContent.seriesTitle.toLowerCase())}this.$route.name&&"media"==this.$route.name&&"trailer"==this.plrLoadedVideoType&&(n.content_type="trailer"),this.playerContent&&this.playerContent.bts&&(n.content_type="bts");n.event_action="seek",this.currentAWSEvent=!1;var s=this.getPlayerEventMode();n.event_mode=s||"N.A";var l=t,h=this.contentSeekStopTime,u={start_time:l,stop_time:h};window.mobileAnalyticsClient.recordEvent("_content.playback",n,u)}},vErrorCB:function(e){},vStalledCB:function(e){},playTrailerBtnClickCB:function(){var e=this;this.checkChromeCast=!1,this.contentRestricted=!1,this.trailerCheckCounter=!0,this.plrLoadedVideoType="trailer",this.plrLoadedVideoTypeMovieTrailer="trailer",this.nextEpisodePlayLoadMainfest=!0,this.ShowSkipTag=!1,this.showComUpNextTag=!1,this.stopTriggerForMovieTrilerSwitch(),this.vToggleMainControls(!1),this.vPlayer&&!this.vPlayer.paused&&(this.vPlayer.pause(),this.vPauseEventCB()),this.plrVideoLoaded=!1,this.plrTrailerUrl&&(this.plrVideoUrl=this.plrTrailerUrl),this.plrIsDrmVideo=!1,this.continueProgress=void 0,this.ShowSkipTag=!1,this.showTrailerInfo&&this.showTrailerInfo.trailer?(c.eventBus.$emit("toggleSendDataToPlayerScreen",this.showTrailerInfo),this.contentName="show",this.plrPosterImage=this.showTrailerInfo.images&&this.showTrailerInfo.images.cover?this.showTrailerInfo.images.cover:"/src/assets/alt-cover.jpg",this.popupPlayer=!0,this.playlistCallbackEvent=!0,this.plrTrailerUrl=this.showTrailerInfo.trailer.trailerUrl?this.showTrailerInfo.trailer.trailerUrl:void 0,this.plrTrailerId=this.showTrailerInfo.trailer.trailerId?this.showTrailerInfo.trailer.trailerId:void 0,this.plrIsDrmVideo=!1,this.contentRestricted=!1,this.playerPageheader=this.showTrailerInfo.title,this.setPlayerContent(this.showTrailerInfo)):this.playerContent&&this.playerContent.trailer&&!this.playerContent.bts&&(this.plrPosterImage=this.playerContent.images&&this.playerContent.images.cover?this.playerContent.images.cover:"/src/assets/alt-cover.jpg",this.plrTrailerAvailable=!0,this.plrTrailerUrl=this.playerContent.trailer.trailerUrl?this.playerContent.trailer.trailerUrl:void 0,this.plrTrailerId=this.playerContent.trailer.trailerId?this.playerContent.trailer.trailerId:void 0,this.plrIsDrmVideo=!1,this.contentRestricted=!1,this.playerPageheader=this.playerContent.title),this.episodeIdentifier=!1,this.configurePlayer(function(){e.vTogglePlay(),e.plrLoadedVideoType="trailer",e.playerContent&&"poster"===e.playerContent.contentType&&(e.plrLoadedVideoType="poster")})},playMovieBtnClickCB:function(){var e=this;this.nextEpisodePlayLoadMainfest=!0,this.stopTriggerForMovieTrilerSwitch(),this.checkChromeCast=!1,this.plrLoadedVideoTypeMovieTrailer="movie",c.eventBus.$emit("plrPlayingMovieEvent",!0),this.vToggleMainControls(!1),this.vPlayer&&!this.vPlayer.paused&&this.vPlayer.pause(),this.plrStreamUrl&&(this.plrVideoUrl=this.plrStreamUrl),this.plrVideoLoaded=!1;var t=void 0;localStorage.getItem("altUser")&&(t=JSON.parse(localStorage.getItem("altUser"))),this.plrIsDrmVideo?this.altUser?this.getPlayerProgress(function(){e.configurePlayer(function(){e.configureDrmPlayback(function(){e.vTogglePlay(),e.plrLoadedVideoType="movie"})})}):this.configurePlayer(function(){e.vTogglePlay(),e.plrLoadedVideoType="movie"}):t?this.getPlayerProgress(function(){e.configurePlayer(function(){e.configureDrmPlayback(function(){e.vTogglePlay(),e.plrLoadedVideoType="movie"})})}):this.configurePlayer(function(){e.vTogglePlay(),e.plrLoadedVideoType="movie"})},rentRedirect:function(){localStorage.setItem("session_track_link",window.location.href),this.$router.push({name:"rent",params:{type:"show",id:this.seriesId}})},subscribeRedirect:function(){localStorage.setItem("session_track_link",window.location.href),this.$router.push({name:"subscribe"})},playTrailerCallback:function(){this.vPlayer&&this.vToggleControls(!1),"STREAM"==this.loadedContent&&this.vPlayer&&!this.vPlayer.paused&&this.vPauseEventCB(),this.contentRestricted=!1,this.loadedContent="TRAILER",this.progressId=void 0,this.continueProgress=0,this.plrIsDrmVideo=!1,this.manifestUrl=this.playerContent.trailer.trailerUrl,this.renderNormalPlayer(function(){c.eventBus.$off("playTrailerEvent")})},playStreamCB:function(){var e=this;c.eventBus.$off("playStreamEvent"),this.vPlayer&&this.vToggleControls(!1),this.contentRestricted=!1,this.loadedContent="STREAM",this.manifestUrl=this.playerContent.stream.streamUrl,this.streamId=this.playerContent.stream.streamId,this.drmType=this.playerContent.stream.drm,this.drmType?localStorage.getItem("altUser")?this.getPlayerProgress(function(){e.renderDrmPlayer(function(){e.vTogglePlay(),c.eventBus.$on("playStreamEvent",e.playStreamCB)})}):this.renderDrmPlayer(function(){e.vTogglePlay(),c.eventBus.$on("playStreamEvent",e.playStreamCB)}):localStorage.getItem("altUser")?this.getPlayerProgress(function(){e.renderNormalPlayer(function(){e.vTogglePlay(),c.eventBus.$on("playStreamEvent",e.playStreamCB)})}):this.renderNormalPlayer(function(){e.vTogglePlay(),c.eventBus.$on("playStreamEvent",e.playStreamCB)})},crossDomainCheckPopup:function(){var e=this;this.contentGeoBlocked=!1,this.actGetMediaGeoAccess(this.mediaId).then(function(t){var i=void 0,n=void 0,r=void 0;if(localStorage.getItem("homeDomain")){r=localStorage.getItem("homeDomain");var o=void 0;for(i in t.products){o=void 0,o=t.products[i];for(n in o.prices)if(o.prices[n].domain==r.toLowerCase())return e.showTagGeoCtaCheck=!1,void(e.contentGeoBlocked=!1)}e.vExitFullScreenMode(),e.playerContent&&"movie"==e.playerContent.contentType?(e.contentGeoBlocked=!0,c.eventBus.$emit("toggleGeoBlockEvent",!0),e.showTagGeoCtaCheck=!0,e.trailerCountinueGeoCheck=!0):(e.contentGeoBlocked=!0,c.eventBus.$emit("toggleGeoBlockEvent",!0))}},function(e){})},getMediaAccess:function(e){var t=this,i=void 0,n=void 0,r=void 0;this.trailerCountinueGeoCheck=!1,localStorage.getItem("altConfig")&&JSON.parse(localStorage.getItem("altConfig")),localStorage.getItem("homeDomain")&&(i=localStorage.getItem("homeDomain")),localStorage.getItem("visitedDomain")&&(n=localStorage.getItem("visitedDomain")),localStorage.getItem("altOrder")&&(r=JSON.parse(localStorage.getItem("altOrder"))),this.actGetMediaAccess(this.mediaId).then(function(o){if(o.status&&"ok"==o.status)t.contentGeoBlocked=!1,e&&e();else{if(t.crossDomainCheckPopup(),r&&r.subscription&&r.subscription.hasOrder&&0==r.subscription.expired)return t.contentGeoBlocked=!0,void(e&&e());if(i==n)return t.contentGeoBlocked=!1,void(e&&e());n&&"IN"==n?(t.contentGeoBlocked=!1,e&&e()):e&&e()}},function(e){401==e.code&&c.eventBus.$emit("togglePopupDeviceRemoved",!0)})},geoBlockContent:function(){var e=this;this.contentGeoBlocked=!0,this.vPlayer?(this.vPlayer.pause(),this.updateButton()):document.getElementById("v-toggler").addEventListener("click",function(){c.eventBus.$emit("toggleGeoBlockEvent",!0)}),this.vUpdateButton(),this.vShaka?this.vShaka.unload().then(function(){document.getElementById("v-loader").style.display="none",document.getElementById("v-player").setAttribute("poster",e.playerContent.images.cover)}):(document.getElementById("v-loader").style.display="none",document.getElementById("v-player").setAttribute("poster",this.playerContent.images.cover))},handleShowCtaGeo:function(e){var t=void 0,i=void 0;localStorage.getItem("homeDomain")&&(i=localStorage.getItem("homeDomain"));for(t in e.pricing)if(e.pricing[t].domain==i.toLowerCase())return void(this.showTagGeoCtaCheck=!1);this.showTagGeoCtaCheck=!0},getTheContents:function(e){var t=this;this.toggleLoader(!0),"show"==this.contentName?this.actGetMediaSeries(this.seriesId).then(function(i){var n=t.parseContents(i);t.handleShowCtaGeo(n),t.setPlayerContent(n);var r=void 0;r=localStorage.getItem("altConfig")?JSON.parse(localStorage.getItem("altConfig")):void 0,t.buffer_campaign=r.buffer_campaign&&r.buffer_campaign&&r.buffer_campaign.is_active&&r.buffer_campaign.apng&&n.buffer_campaign?r.buffer_campaign:null,t.$route&&"home"!==t.$route.name&&"shows"!==t.$route.name&&!t.playerContent.bts&&t.setHeaderTitle(n.title),t.sendGTMpageViewData("show details",n.title?n.title:"",""),t.webEnagePageView("show details",n.title?n.title:"","",t.playerContent.id),t.trailerCheckCounter||c.eventBus.$emit("playerContentFetchEvent"),i.seasons&&i.seasons.length&&(t.seriesSeasons=i.seasons),t.toggleLoader(!1),e&&e()},function(e){404==e.code?(c.eventBus.$emit("toggleVideoBlockPopupEvent",!0),t.toggleLoader(!1),t.vPlayer&&t.vShaka?t.vShaka.destroy().then(function(){t.vPlayer=document.getElementById("v-player"),t.vShaka=new u.a.Player(t.vPlayer),t.configurePlayer(),t.vToggleLoader(!1)}):(t.configurePlayer(!1),t.vToggleLoader(!1))):e.body&&e.code||(c.eventBus.$emit("togglePopupNetworkError",!0),document.getElementById("v-loader").style.display="none",document.getElementById("v-controls").style.display="none")}):"media"==this.contentName||"episode"==this.contentName?(this.toggleLoader(!0),this.actGetMediaVideo(this.id).then(function(i){var n=t.parseContents(i);t.setPlayerContent(void 0),t.setPlayerContent(n);var r=void 0;r=localStorage.getItem("altConfig")?JSON.parse(localStorage.getItem("altConfig")):void 0,t.buffer_campaign=r.buffer_campaign&&r.buffer_campaign&&r.buffer_campaign.is_active&&r.buffer_campaign.apng&&n.buffer_campaign?r.buffer_campaign:null,"media"==t.contentName&&"home"!==t.$route.name&&"movies"!==t.$route.name&&t.playerContent&&!t.playerContent.bts&&t.setHeaderTitle(n.title),"episode"==t.contentName?t.sendGTMpageViewData("episode details",n.seriesTitle?n.seriesTitle:"",n.title?n.title:""):(t.sendGTMpageViewData("media",n.title?n.title:"",""),c.eventBus.$emit("playerContentFetchEvent")),t.toggleLoader(!1),e&&e()},function(e){if(e.code)return 404==e.code&&"This account is deleted"==e.message&&(c.eventBus.$emit("togglePopupDeviceRemoved",!1),t.toggleLoader(!1)),404==e.code&&e.message,c.eventBus.$emit("toggleVideoBlockPopupEvent",!0),void t.toggleLoader(!1);c.eventBus.$emit("togglePopupNetworkError",!0),document.getElementById("v-loader").style.display="none",document.getElementById("v-controls").style.display="none"})):"episode"==this.contentType&&this.actGetMediaVideo(this.contentId).then(function(i){t.setPlayerContent(t.parseContents(i)),c.eventBus.$emit("playerContentFetchEvent"),e&&e()},function(e){e.body&&e.code||(c.eventBus.$emit("togglePopupNetworkError",!0),document.getElementById("v-loader").style.display="none",document.getElementById("v-controls").style.display="none")})},loadVideo:function(){var e=this;this.vShaka.unload().then(function(){e.vShaka.load(e.manifestUrl).then(function(){localStorage.setItem("awsContentUrl",e.manifestUrl)}).catch(e.vOnError)})},vOnError:function(e){},updateButton:function(e){this.vToggler.src=e?"/src/assets/player/v2/ic_Play.png":this.vPlayer.paused?"/src/assets/player/v2/ic_Play.png":"/src/assets/player/v2/ic_Pause.png"},vReset:function(){this.vPlayer.currentTime=0,this.vCurrentTime.innerHTML=this.vCalcTimeLine(0),this.vProgress.value=0,this.vDuration.innerHTML=this.vCalcTimeLine(isNaN(this.vPlayer.duration)?0:this.vPlayer.duration),this.updateButton()},vToggleLoader:function(e){this.vLoader&&(e?(this.vLoader.style.display="block",this.hideVideoController(!1,"vToggleLoader")):(this.vLoader.style.display="none",this.loaderCheck&&this.hideVideoController(!0,"vToggleLoader")))},vToggleToggler:function(e,t){},vToggleMainControls:function(e){e?(this.vMainCtrls.style.display="block",this.vMainHeader.style.display="block"):(this.vMainCtrls.style.display="none",this.vMainHeader.style.display="none")},vToggleScreen:function(e){this.vToggleLoader(e),this.vToggleToggler(e,"vToggleScreen"),this.vToggleControls(e)},vCalcTimeLine:function(e){var e=parseInt(e,10),t=Math.floor(e/3600),i=Math.floor((e-3600*t)/60),n=e-3600*t-60*i;return t=t?t<10?"0"+t+":":t+":":"",i<10&&(i="0"+i),n<10&&(n="0"+n),t+i+":"+n},vToggleFullscreen:function(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():this.vContain.requestFullscreen?this.vContain.requestFullscreen():this.vContain.msRequestFullscreen?this.vContain.msRequestFullscreen():this.vContain.mozRequestFullScreen?this.vContain.mozRequestFullScreen():this.vContain.webkitRequestFullscreen&&this.vContain.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),window.mobileAnalyticsClient&&window.mobileAnalyticsClient.recordEvent("_content.playback",this.stuffPlaybackAttributes("mode"),this.buildPlaybackMetrics("mode",0,0))},vExitFullScreenMode:function(){this.contentName&&this.contentName,this.handleEventPlayer=!0,(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)&&(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())},configurePlayerControls:function(){var e=this;e.videoTag.addEventListener("loadstart",function(t){e.showVideoLoader=!0}),e.videoTag.addEventListener("loadeddata",function(t){e.showVideoLoader=!1}),e.videoTag.addEventListener("error",function(e){}),e.altPlayer.addEventListener("buffering",function(t){e.showVideoLoader=t.buffering,t.buffering?e.videoTimer&&clearInterval(e.videoTimer):e.videoCanPlay&&e.playVideo()})},playVideo:function(){var e=this;if("TRAILER"==this.loadedContent&&c.eventBus.$emit("playingTrailerEvent"),this.contentRestricted){return JSON.parse(localStorage.getItem("altUser"))?c.eventBus.$emit("toggleSubscribePopupEvent",!0):c.eventBus.$emit("toggleSigninPopupEvent",!0),!1}this.togglePlayerState("PLAY"),this.videoTimer&&clearInterval(this.videoTimer),this.videoTimer=setInterval(function(){e.playTime+=1,e.currentTime=e.calculateTimeLine(e.playTime),e.seekPosition=String(Number(e.seekPosition)+e.videoStep)},1e3),this.videoCanPlay=!0,this.toggleControlTimer?(clearTimeout(this.toggleControlTimer),this.toggleControlTimer=setTimeout(function(){e.toggleControls(!1)},5e3)):this.toggleControlTimer=setTimeout(function(){e.toggleControls(!1)},5e3)},pauseVideo:function(){this.$route.name;this.vPlayer&&this.vPlayer.pause()},togglePlayerState:function(e){this.isPlayerReady&&"PLAY"==e?(this.isPlayerPlaying=!0,this.videoTag.play()):"PAUSE"==e&&this.isPlayerPlaying&&(this.toggleControls(!0),this.isPlayerPlaying=!1,this.videoTag.pause())},showControls:function(){var e=this;if((this.contentGeoBlocked||this.contentRestricted||this.contentDrmBlocked)&&this.toggleControls)return this.toggleControls(!0),clearTimeout(this.toggleControlTimer),!1;this.toggleControls(!0),this.toggleControlTimer=setTimeout(function(){e.toggleControls(!1)},this.toggleCtrlTimerTime)},toggleControls:function(e,t){var i=document.getElementById("v-controls");i.style.opacity=e?1:0},seekCallback:function(e){var t=this;this.showVideoLoader=!0,this.seekPosition=String(e.target.value);var i=this.playTime=parseInt(Math.floor(e.target.value/100*this.durationInSec));this.videoTag.currentTime=i,this.currentTime=this.calculateTimeLine(i),this.videoTimer&&(clearInterval(this.videoTimer),this.videoTimer=setInterval(function(){t.currentTime=t.calculateTimeLine(t.playTime),t.seekPosition=String(Number(t.seekPosition)+t.videoStep),t.playTime+=1},1e3)),this.showVideoLoader=!1},makeVideoFullscreen:function(){var e=document.getElementById("v-player");e&&(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT))},getPlayerProgress:function(e){var t=this;if(!this.progressId)return this.continueProgress=void 0,void(e&&e());this.actGetPlayerProgress(this.progressId).then(function(i){(i.progress||0==i.progress)&&(t.playerContent&&t.playerContent.durationInSec-i.progress<40?t.continueProgress=void 0:t.continueProgress=i.progress),e&&e()},function(i){t.continueProgress=void 0,e&&e()})},getSeriesSeasons:function(e){var t=this;this.actGetSeriesSeasons(this.seriesId).then(function(i){i.count&&(t.seasonId=i.seasons[0].id,e&&e())},function(e){})},getSeriesEpisodes:function(e){var t=this;this.actGetEpisodes({seriesId:this.seriesId,seasonId:this.seasonId,limit:this.limit,offset:this.offset}).then(function(i){if(i.count){if(t.playlistEpisodes=t.playlistEpisodes.concat(i.episodes),t.playlistEpisodeCount+=i.episodes.length,i.count>t.playlistEpisodeCount)return t.offset+=t.limit,void t.getSeriesEpisodes(e);t.playListPosition=0;var n=new Array;if("show"==t.contentName){for(var r in t.playlistEpisodes)n.push(t.parseContents(t.playlistEpisodes[r]));t.playerPlaylist=n,t.setCurrentShowPlaylists(n.slice())}else{var o=0;for(var r in t.playlistEpisodes)t.playlistEpisodes[r].media_id!=t.id?n.push(t.parseContents(t.playlistEpisodes[r])):o=parseInt(r);if(t.playerPlaylist=n.slice(o),t.setEpisodeListing(t.playerPlaylist),t.playerPlaylist&&t.playerPlaylist.length){t.nextPlaylistPosition=0;var a=t.playerPlaylist[t.nextPlaylistPosition];t.gt_next_episode_thumbnail_url=a&&a.images&&a.images.webengage?a.images.webengage:"",t.gt_next_episode_description=a&&a.shortDescription?a.shortDescription:"",t.gt_next_episode_id=a&&a.id?a.id:"",t.gt_next_episode_id_webenage=a&&a.id?a.id:"",t.nextPlaylistMediaTitle=a.title,t.nextPlaylistMediaSNo=a.seasonNumber?a.seasonNumber:void 0,t.nextPlaylistMediaENo=a.episodeNumber?a.episodeNumber:void 0,a&&a.images&&a.images.episodeImageUrl&&(t.nextEpisodeImage=a.images.episodeImageUrl)}else t.playerPlaylist=void 0,t.gt_next_episode_thumbnail_url="",t.gt_next_episode_description="",t.gt_next_episode_id="",t.gt_next_episode_id_webenage=" "}t.makeEpisodeListContent(),e&&e()}},function(e){})},makeEpisodeListContent:function(){var e=[];if(this.playlistEpisodes&&this.playlistEpisodes.length){for(var t in this.playlistEpisodes)e.push(this.parseContents(this.playlistEpisodes[t]));if(e&&e.length){var i=null;i=e.slice();for(var n in i)if(this.id==i[n].id){i.splice(n,1),this.setPopupPlaylist(i);break}}}},assignComUpNextData:function(){if(this.playerPlaylist&&this.playerPlaylist.length){var e=this.playerPlaylist[this.nextPlaylistPosition];if(!e)return;e&&e.images&&e.images.episodeImageUrl&&(this.nextEpisodeImage=e.images.episodeImageUrl),this.nextPlaylistMediaTitle=e.title,this.nextPlaylistMediaSNo=!e.noShow&&e.seasonNumber,this.nextPlaylistMediaENo=!e.noShow&&e.episodeNumber,this.gt_next_episode_thumbnail_url=e&&e.images&&e.images.webengage?e.images.webengage:"",this.gt_next_episode_description=e&&e.shortDescription?e.shortDescription:"",this.gt_next_episode_id=e&&e.id?e.id:"",this.gt_next_episode_id_webenage=e&&e.id?e.id:""}else this.playerPlaylist=void 0,this.gt_next_episode_thumbnail_url="",this.gt_next_episode_description="",this.gt_next_episode_id="",this.gt_next_episode_id_webenage=" "},playNextPlaylistItem:function(){var e=this,t=this.fullscreenExitProgress.progress,i=this.fullscreenExitProgress.duration;if(this.id=this.fullscreenExitProgress.id,this.playListPosition===this.playerPlaylist.length){this.vShaka&&this.vShaka.unload().then(function(){e.vPlayer&&(e.vPlayer.pause(),e.vPauseEventCB())}),c.eventBus.$emit("togglePlayerScreenFlagEnable",!1),this.toggleLoader(!0),this.vToggleLoader(!1),this.loaderCheck=!1,this.playRelatedEpisodeClickFlag=!0,this.flagVideoTag=!0,this.vExitFullScreenMode();c.eventBus.$emit("togglePlayerScreenEvent",!1),c.eventBus.$emit("toggleEpisodelistPopup",!1),c.eventBus.$emit("togglePlayerVideoResolution","back"),localStorage.setItem("awsOrientation","portrait"),this.nextPlaylistPosition=0,this.playListPosition=0,this.showTrailerInfo||(this.playerPlaylist=void 0),this.headerEpisodeDetails=null,this.gt_next_episode_id=!1,this.showComUpNextTag=!1,this.ShowSkipTag=!1,this.hidePosterPlayerScreen("none","block"),this.hideVideoController(!1,"pressBackChangeToPoster"),this.toggleLoader(!1),this.vToggleLoader(!1);var n=!!localStorage.getItem("altUser");if(!this.vPlayer||!n)return;if(isNaN(t)||isNaN(i))return;return void this.updateMediaProgress(this.id,t,i)}if(this.nextPlaylistPosition+=1,localStorage.setItem("prevPlayedMediaId",this.id),this.nextEpisodePlayLoadMainfest=!0,this.vPlayer&&(this.toggleControls(!1),this.vToggleToggler(!1,"playNextPlaylistItem"),this.vToggleMainControls(!1)),this.playerPlaylist&&this.playerPlaylist.length){this.currentPlaylistItem=this.playerPlaylist[this.playListPosition],this.assignComUpNextData(),this.showComUpNextTag=!1;var r=void 0;if(localStorage.getItem("altUser")&&(r=!0),!r||isNaN(t)||isNaN(i)||this.updateMediaProgress(this.id,t,i),this.currentPlaylistItem&&"episode"===this.currentPlaylistItem.contentName)if(this.popupPlayer){this.setPlayerContent(this.currentPlaylistItem);var o=void 0;o=localStorage.getItem("altConfig")?JSON.parse(localStorage.getItem("altConfig")):void 0,this.buffer_campaign=o.buffer_campaign&&o.buffer_campaign&&o.buffer_campaign.is_active&&o.buffer_campaign.apng&&this.currentPlaylistItem.buffer_campaign?o.buffer_campaign:null,this.id=this.currentPlaylistItem.id,this.mediaId=this.currentPlaylistItem.id,this.playlistCallbackEvent=!0,this.playListPosition+=1,this.makeEpisodeListContent(),r?this.getMediaAccess(function(){e.renderEpisodeScreen()}):this.renderEpisodeScreen()}else{this.playlistCallbackEvent=!0;var a={name:this.currentPlaylistItem.contentName,params:{id:this.currentPlaylistItem.id}};this.playListPosition+=1,this.$router.push(a)}}},playComUpNextItem:function(e){this.showComUpNextTag=!1,this.ShowSkipTag=!1,localStorage.setItem("event_source","player"),this.stopMatrixInfo={};var t=this.vPlayer&&this.vPlayer.currentTime&&this.vPlayer.duration?this.vPlayer.currentTime/this.vPlayer.duration*100:0;t=isNaN(t)?0:t,this.stopMatrixInfo.progress=t,this.stopMatrixInfo.stop_time=this.vPlayer&&this.vPlayer.currentTime?this.vPlayer.currentTime:0,this.nextEpisodePlayLoadMainfest=!0,this.playRelatedEpisodeClickFlag=!0,this.vPlayer&&(this.vPlayer.pause(),this.vPlayer.removeEventListener("timeupdate",this.vHandleProgress),this.vToggleMainControls(!1),this.toggleControls(!1),this.vToggleToggler(!1,"playComUpNextItem"),this.vToggleLoader(!0));var i=e?"continuous playback":"player";this.nextEpisodePlayEventTrigger(i),this.playNextPlaylistItem()},languageChangeCB:function(e){var t=(this.$route.query.type,{name:"show",params:{id:e}});this.containInfoDetails=void 0,this.$router.push(t),c.eventBus.$emit("toggleLanguageFilterEvent",!1)},popupOpenCB:function(e){e&&this.vPlayer&&this.vPlayer.pause()},navOpenCB:function(){c.eventBus.$off("toggleNavOpenEvent",this.navOpenCB),this.vPlayer&&this.vPlayer.pause(),c.eventBus.$on("toggleNavOpenEvent",this.navOpenCB)},togglePopupKidsExitPinCB:function(){c.eventBus.$off("togglePopupKidsExitPin",this.togglePopupKidsExitPinCB),this.vPlayer&&this.vPlayer.pause(),c.eventBus.$on("togglePopupKidsExitPin",this.togglePopupKidsExitPinCB)},playRelatedEpisodeClickCB:function(){this.playRelatedEpisodeClickFlag=!0,this.playerPlaylist=void 0,this.playlistCallbackEvent=!1},getUniqueProgressList:function(e,t){var i=-1;for(var n in t)t[n].media_id===e.media_id&&(i=n);return i>-1?(t.splice(i,1),t.unshift(e),t):(t.unshift(e),t)},getContentUrl:function(){var e="";switch(this.contentName){case"show":e=this.playerContent&&this.playerContent.trailer?this.playerContent.trailer.trailerUrl:"N.A";break;case"media":case"episode":e=this.playerContent&&this.playerContent.stream?this.playerContent.stream.streamUrl:"N.A";break;default:e=this.playerContent&&this.playerContent.stream?this.playerContent.stream.streamUrl:"N.A"}return e},routeChangeCB:function(){this.vPlayer&&this.vShaka&&this.playerContent&&this.vPauseEventCB()},showSharingCB:function(){this.vPlayer&&(this.vPlayer.paused||(this.vPlayer.pause(),this.toggleControlTimer&&(clearTimeout(this.toggleControlTimer),this.vToggleToggler(!0,"showSharingCB"))))},toggleSigninPopupCB:function(){},handlePlayerBeforeRouteLeaveCB:function(){c.eventBus.$emit("toggleLanguageFilterEvent",!1);var e=void 0;if(localStorage.getItem("altUser")&&(e=!0),e){if("show"!=this.$route.name&&this.vPlayer){var t=this.vPlayer.currentTime,i=this.vPlayer.duration;isNaN(t)||isNaN(i)||this.updateMediaProgress(this.id,t,i)}}},browserStateBlurCB:function(e){this.vPlayer&&(this.vPlayer.paused||this.vPlayer.pause())},togglePlayerFavSigninPopupCB:function(){this.pauseVideo()},stopTriggerForMovieTrilerSwitch:function(){if(window.mobileAnalyticsClient){var e=this.getAWSMACommonAttributes(),t=void 0;if(localStorage.getItem("currentPlayerDetails")){var i={};i.stop_time=this.vPlayer&&this.vPlayer.currentTime?this.vPlayer.currentTime:"N.A",t=JSON.parse(localStorage.getItem("currentPlayerDetails")),e.event_action="stop",e.content_id=t&&t.eventAttributeObj&&t.eventAttributeObj.content_id?t.eventAttributeObj.content_id:" ";var n=this.playerContent&&this.playerContent.contentType?this.playerContent.contentType:null;e.content_type=n;var r=this.playerContent&&this.playerContent.title?this.playerContent.title:null;"episode"===n&&r&&(r="Ep"+this.playerContent.episodeNumber+"-"+r),e.content_title=r?r.toLowerCase():"N.A",e.content_streamid=t&&t.eventAttributeObj&&t.eventAttributeObj.content_streamid?t.eventAttributeObj.content_streamid:"",e.content_url=t&&t.eventAttributeObj&&t.eventAttributeObj.content_url?t.eventAttributeObj.content_url:" ",e.content_duration=t&&t.eventAttributeObj&&t.eventAttributeObj.content_duration?t.eventAttributeObj.content_duration:"",e.event_source=localStorage.getItem("event_source")?localStorage.getItem("event_source"):"N.A",e.language_code=this.playerContent&&this.playerContent.mainLanguage?this.playerContent.mainLanguage:null,t&&t.currentPlayerType&&"episode"==t.currentPlayerType&&(e.parent_content_title=t&&t.eventAttributeObj&&t.eventAttributeObj.parent_content_title?t.eventAttributeObj.parent_content_title.toLowerCase():""),window.mobileAnalyticsClient.recordEvent("_content.playback",e,i),localStorage.removeItem("currentPlayerDetails")}}},togglePopupNetworkErrorCB:function(e){this.vPlayer&&this.vShaka&&(this.vPlayer.paused||this.vPlayer.pause(),this.vExitFullScreenMode(),this.toggleControlTimer&&clearTimeout(this.toggleControlTimer),this.vControls.removeEventListener("click",this.vControlsClickEventCB))},determinePlaybackOperation:function(e,t){var i="Unknown";return void 0!=t&&""!=e&&(i="play"==e?0==t.played.length?"start":"resume":e),i},buildPlaybackMetrics:function(e,t,i){var n={};if("start"==e||"resume"==e||"stop"==e||"pause"==e||"complete"==e){var r=100*i/t;n.progress=r,"stop"==e||"complete"==e?n.stop_time=i:n.start_time=i}else"seek"==e&&(n.start_time=0,n.stop_time=i);return n},stuffCommonAttributes:function(e){var t={},i=localStorage.getItem("geo_location"),n=JSON.parse(localStorage.getItem("altConfig"));return i&&(i=JSON.parse(i),t=i),t.user_email=localStorage.getItem("user_email"),t.user_id=localStorage.getItem("account_id"),t.user_session=localStorage.getItem("token"),t.user_name=localStorage.getItem("user_name"),t.user_dob=localStorage.getItem("user_birthday"),t.user_gender=localStorage.getItem("user_gender"),t.app_env=n.environment.title,t},stuffPlaybackAttributes:function(e){var t=this.getAWSMACommonAttributes(),i=this.$route.name,n="N.A",r="N.A";switch(i){case"show":n=this.playerContent.trailer?this.playerContent.trailer.trailerUrl:"N.A",r=this.playerContent.trailer?this.playerContent.trailer.id:"N.A";break;case"media":case"episode":n=this.playerContent.stream?this.playerContent.stream.streamUrl:"N.A",r=this.playerContent.stream?this.playerContent.stream.streamId:"N.A";break;default:n="N.A",r="N.A"}t.content_id=this.playerContent.id?this.playerContent.id:"N.A",t.content_title=this.playerContent.title?this.playerContent.title.toLowerCase():"N.A",t.content_url=n,t.content_streamid=r,t.content_type=this.playerContent.contentType?this.playerContent.contentType:"N.A",t.content_duration=this.playerContent.durationInSec?this.playerContent.durationInSec:"N.A";var o=this.getPlayerEventMode();return t.event_mode=o||"N.A",t.event_action=e,t},playContent:function(){this.showOnlyPlayButton=!1,this.vTogglePlay("play")},pressBackChangeToPoster:function(){var e=this;if(this.setPlayerScreenSource(null),0==screen.orientation.angle){n&&(clearInterval(a),n.destroy()),document.getElementById("adContainer")&&(document.getElementById("adContainer").innerHTML=""),this.stopMatrixInfo={};var t=this.vPlayer&&this.vPlayer.currentTime&&this.vPlayer.duration?this.vPlayer.currentTime/this.vPlayer.duration*100:0;t=isNaN(t)?0:t,this.stopMatrixInfo.progress=t,this.stopMatrixInfo.stop_time=this.vPlayer&&this.vPlayer.currentTime?this.vPlayer.currentTime:0,this.vShaka&&(this.isPlaybackExitEvent=!0,this.playRelatedEpisodeClickFlag=!0,this.vShaka.unload().then(function(){e.vPlayer&&e.vPauseEventCB()})),c.eventBus.$emit("togglePlayerScreenFlagEnable",!1),this.toggleLoader(!0),this.vToggleLoader(!1),this.loaderCheck=!1,this.playRelatedEpisodeClickFlag=!0,this.flagVideoTag=!0,this.vExitFullScreenMode();c.eventBus.$emit("togglePlayerScreenEvent",!1),c.eventBus.$emit("toggleEpisodelistPopup",!1),c.eventBus.$emit("togglePlayerVideoResolution","back"),localStorage.setItem("awsOrientation","portrait"),this.nextPlaylistPosition=0,this.playListPosition=0,this.showTrailerInfo||(this.playerPlaylist=void 0),this.headerEpisodeDetails=null,this.gt_next_episode_id=!1,this.showComUpNextTag=!1,this.ShowSkipTag=!1,this.hidePosterPlayerScreen("none","block"),this.hideVideoController(!1,"pressBackChangeToPoster"),this.toggleLoader(!1),this.vToggleLoader(!1);var i=!!localStorage.getItem("altUser");if(!this.vPlayer||!i)return;var t=this.vPlayer.currentTime,r=this.vPlayer.duration;if(isNaN(t)||isNaN(r))return;this.updateMediaProgress(this.id,t,r)}},fullScreenExitEvent:function(e){if(!1===document.webkitIsFullScreen||!1===document.mozFullScreen||!1===document.msFullscreenElement){n&&(clearInterval(a),n.destroy()),this.showComUpNextTime=!1,this.handleEventPlayer=!0,c.eventBus.$on("toggleSendDataToPlayerScreen",this.loadContentAtPlayerScreen),this.toggleLoader(!0),this.loaderCheck=!1,c.eventBus.$emit("togglePlayerScreenFlagEnable",!1),this.playRelatedEpisodeClickFlag=!0,this.flagVideoTag=!0;c.eventBus.$emit("togglePlayerScreenEvent",!1),c.eventBus.$emit("toggleEpisodelistPopup",!1),c.eventBus.$emit("togglePlayerVideoResolution","back"),localStorage.setItem("awsOrientation","portrait"),this.showComUpNextTag=!1,this.ShowSkipTag=!1,this.hidePosterPlayerScreen("none","block"),this.hideVideoController(!1,"pressBackChangeToPoster"),this.toggleLoader(!1),this.vToggleLoader(!1);var t=!!localStorage.getItem("altUser");if(this.vPlayer){var i=this.fullscreenExitProgress.progress,r=this.fullscreenExitProgress.duration;isNaN(i)||isNaN(r)||!t||this.updateMediaProgress(this.fullscreenExitProgress.id,i,r)}}},hidePosterPlayerScreen:function(e,t){document.getElementById("v-player")&&document.getElementById("v-poster")&&(document.getElementById("v-player").style.display=e,document.getElementById("v-poster").style.display=t,"block"==t&&(this.showComUpNextTag=!1,this.ShowSkipTag=!1,this.vPlayer&&(this.vPlayer.pause(),this.hideVideoController(!1,"hidePosterPlayerScreen"))))},playerPopupViewEvent:function(e){if(window.mobileAnalyticsClient){var t=this.getAWSMACommonAttributes();t.start_time=this.vPlayer&&this.vPlayer.currentTime?this.vPlayer.currentTime:"N.A",t.event_mode=e,window.mobileAnalyticsClient.recordEvent("_popup.view",t,{})}},handelChromecastPlayback:function(){this.vPlayer&&localStorage.getItem("currentPlayerDetails")&&this.playContent()},windowFocusCB:function(e){this.pressBackChangeToPoster()},windowBlurCB:function(e){this.pressBackChangeToPoster()},setVideoTrackToPlayer:function(e){if(this.vShaka){var t=this.vShaka.getConfiguration();"auto"==e.title.toLowerCase()?(t.abr.enabled=!0,this.videoResolutionEventTrigger(e.title),this.vShaka.configure(t)):(t.abr.enabled=!1,this.vShaka.configure(t),this.vShaka.selectVariantTrack(e,!0),this.videoResolutionEventTrigger(e.title))}},toggleResolutionState:function(e){if(e){if("back"==e)return void(this.showVideoResolution=!1);this.showVideoResolution=!0,this.videoResolutionPopupState=void 0,this.videoResolutionPopupState=this.vPlayer&&this.vPlayer.paused?"pause":"play",this.playerPopupViewEvent("video quality"),this.vPlayer&&!this.vPlayer.paused&&this.vPlayer.pause()}else this.showVideoResolution=!1,this.videoResolutionPopupState&&"play"==this.videoResolutionPopupState?this.vPlayer.play():this.vPlayer.pause()},episodePopupState:function(e){this.showPopupEpisodeList=e,e&&this.playerPopupViewEvent("other episodes"),e||this.episodePopupPlayState&&this.vPlayer&&("play"==this.episodePopupPlayState?this.vPlayer.play():this.vPlayer.pause())},loadContentAtPlayerScreen:function(e){if(document.getElementById("v-toggle")&&(document.getElementById("v-toggle").style.display="flex"),e.campaign_ads&&!this.getProgressForAds(e.id)&&"episode"!=e.contentName&&(this.isActiveAdd=!0,this.ads()),this.handleEventPlayer){var t=void 0;t=localStorage.getItem("altConfig")?JSON.parse(localStorage.getItem("altConfig")):void 0,this.buffer_campaign=t.buffer_campaign&&t.buffer_campaign&&t.buffer_campaign.is_active&&t.buffer_campaign.apng&&e.buffer_campaign?t.buffer_campaign:null,this.handleEventPlayer=!1,this.popupPlayer=!0,this.containInfoDetails=e,this.nextEpisodePlayLoadMainfest=!0,c.eventBus.$off("toggleSendDataToPlayerScreen",this.loadContentAtPlayerScreen),this.contentRestricted=!1,this.playerPlaylist=null,this.playlistEpisodes=[],this.playlistEpisodeCount=0,this.offset=0,this.id=null,this.makeFullscreen(),this.initMountedPlayerScreen()}},toggleEpisodelistPopupCB:function(e){this.episodePopupState(e)},togglePlayerVideoResolutionCB:function(e){this.toggleResolutionState(e)},episodeListCall:function(e){var t=this;this.playRelatedEpisodeClickFlag=!0,this.handleEventPlayer=!0,this.stopMatrixInfo={};var i=this.vPlayer&&this.vPlayer.currentTime&&this.vPlayer.duration?this.vPlayer.currentTime/this.vPlayer.duration*100:0;i=isNaN(i)?0:i,this.stopMatrixInfo.progress=i,this.stopMatrixInfo.stop_time=this.vPlayer&&this.vPlayer.currentTime?this.vPlayer.currentTime:0,this.vShaka.unload().then(function(){t.vPlayer&&t.vPauseEventCB()}),this.loadContentAtPlayerScreen(e)}}),created:function(){var e=this;c.eventBus.$on("initiatePlayEvent",this.initiatePlayCB),c.eventBus.$on("openSearchEvent",this.pauseVideo),c.eventBus.$on("toggleSigninPopupEvent",this.toggleSigninPopupCB),c.eventBus.$on("playTrailerEvent",this.playTrailerCallback),c.eventBus.$on("playStreamEvent",this.playStreamCB),c.eventBus.$on("languageChangeEvent",this.languageChangeCB),c.eventBus.$on("togglePopupSearch",this.popupOpenCB),c.eventBus.$on("toggleNavOpenEvent",this.navOpenCB),c.eventBus.$on("togglePopupKidsExitPin",this.togglePopupKidsExitPinCB),c.eventBus.$on("playRelatedEpisodeClickEvent",this.playRelatedEpisodeClickCB),c.eventBus.$on("showSharingEvent",this.showSharingCB),c.eventBus.$on("playTrailerBtnClickEvent",this.playTrailerBtnClickCB),c.eventBus.$on("playMovieBtnClickEvent",this.playMovieBtnClickCB),c.eventBus.$on("togglePlayerFavSigninPopupEvent",this.togglePlayerFavSigninPopupCB),c.eventBus.$on("handlePlayerBeforeRouteLeave",this.handlePlayerBeforeRouteLeaveCB),c.eventBus.$on("togglePopupNetworkError",this.togglePopupNetworkErrorCB),c.eventBus.$on("browserStateBlurEvent",this.browserStateBlurCB),c.eventBus.$on("toggleVideoAddToFavErrorVideoPause",this.pauseVideo),c.eventBus.$on("togglePlayContent",this.playContent),c.eventBus.$on("toggleChromeCastPlaying",this.handelChromecastPlayback),c.eventBus.$on("toggleFlagForPlay",function(t){e.playlistCallbackEvent=!0}),c.eventBus.$on("toggleEpisodelistPopup",this.toggleEpisodelistPopupCB),c.eventBus.$on("togglePlayerVideoResolution",this.togglePlayerVideoResolutionCB),c.eventBus.$on("togglePlayerSetResolution",function(t){e.setVideoTrackToPlayer(t)}),c.eventBus.$on("toggleSendDataToPlayerScreen",this.loadContentAtPlayerScreen),c.eventBus.$on("toggleSendDataToPlayerScreenForEpisodeList",this.episodeListCall),document.addEventListener&&(document.addEventListener("webkitfullscreenchange",this.fullScreenExitEvent,!1),document.addEventListener("mozfullscreenchange",this.fullScreenExitEvent,!1),document.addEventListener("fullscreenchange",this.fullScreenExitEvent,!1),document.addEventListener("MSFullscreenChange",this.fullScreenExitEvent,!1));var t=this;window.__onGCastApiAvailable=function(e){e&&(t.chromeCaseShow=!0)}},mounted:function(){"localhost"!=location.hostname&&(window.removeEventListener("focus",this.windowFocusCB),window.removeEventListener("blur",this.windowBlurCB),window.addEventListener("focus",this.windowFocusCB),window.addEventListener("blur",this.windowBlurCB));localStorage.setItem("awsOrientation","portrait"),window.addEventListener("orientationchange",this.pressBackChangeToPoster),this.appActive&&this.initMountedPlayerScreen()},components:{"popup-episode-listing":g,"popup-player-video-resolution":v},beforeDestroy:function(){this.buffer_campaign=null,c.eventBus.$off("toggleSendDataToPlayerScreen",this.loadContentAtPlayerScreen),c.eventBus.$off("toggleSendDataToPlayerScreenForEpisodeList",this.episodeListCall),this.vToggler&&this.vToggler.removeEventListener("click",this.vTogglePlay),this.vForward&&this.vBackward&&(this.vBackward.removeEventListener("click",this.vBackwardPlay),this.vForward.removeEventListener("click",this.vForwardPlay)),window.removeEventListener("orientationchange",this.pressBackChangeToPoster),window.removeEventListener("focus",this.windowFocusCB),window.removeEventListener("blur",this.windowBlurCB),document.removeEventListener("webkitfullscreenchange",this.fullScreenExitEvent,!1),document.removeEventListener("mozfullscreenchange",this.fullScreenExitEvent,!1),document.removeEventListener("fullscreenchange",this.fullScreenExitEvent,!1),document.removeEventListener("MSFullscreenChange",this.fullScreenExitEvent,!1),c.eventBus.$off("togglePlayContent",this.playContent),c.eventBus.$off("toggleEpisodelistPopup",this.toggleEpisodelistPopupCB),c.eventBus.$off("togglePlayerVideoResolution",this.togglePlayerVideoResolutionCB),c.eventBus.$off("toggleChromeCastPlaying",this.handelChromecastPlayback),c.eventBus.$off("playTrailerBtnClickEvent",this.playTrailerBtnClickCB),this.setPlayerContent(void 0),this.playerPlaylist=void 0,this.vShaka&&this.vShaka.destroy().then(function(){}).catch(function(e){})},mixins:[d.a]}},117:function(e,t,i){t=e.exports=i(76)(),t.push([e.i,"#mainContainer{position:relative}#adContainer{position:absolute;top:0;left:0;width:100%;height:100%;box-sizing:border-box}",""])},128:function(e,t,i){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"v-contain",attrs:{id:"v-contain"}},[n("video",{staticClass:"v-player player-default",staticStyle:{width:"100%"},attrs:{id:"v-poster",poster:e.playerPosterImage,src:e.silentTrack}}),e._v(" "),n("video",{staticClass:"v-player player-default",staticStyle:{width:"100%"},attrs:{id:"v-player",poster:e.plrPosterImage,src:e.silentTrack}}),e._v(" "),n("div",{attrs:{id:"adContainer"}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showComUpNextTag,expression:"showComUpNextTag"}],staticClass:"v-cmup-nxt",on:{click:function(t){e.playComUpNextItem(!0)}}},[n("div",{staticClass:"v-cmup-nxt-bx"},[n("div",{staticClass:"v-cmnxtbx-img"},[n("img",{attrs:{src:e.nextEpisodeImage,alt:"v-cmngup"}})]),e._v(" "),n("div",{staticClass:"v-cmnxtbx-text"},[n("p",{staticStyle:{"font-size":"15px","font-weight":"bold"}},[e._v("NEXT EPISODE IN "+e._s(e.showComUpNextTimeNextEpisodeCountDown)+" ")]),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:e.nextPlaylistMediaTitle,expression:"nextPlaylistMediaTitle"}],staticStyle:{padding:"8px 2px  8px 0","font-size":"12px","font-weight":"normal"}},[e._v(e._s(e.nextPlaylistMediaTitle))]),e._v(" "),n("p",{staticStyle:{"font-size":"12px","font-weight":"bold"}},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.nextPlaylistMediaSNo,expression:"nextPlaylistMediaSNo"}]},[e._v("S"+e._s(e.nextPlaylistMediaSNo)+" ")]),n("span",{directives:[{name:"show",rawName:"v-show",value:e.nextPlaylistMediaENo,expression:"nextPlaylistMediaENo"}]},[e._v("| E"+e._s(e.nextPlaylistMediaENo))])]),e._v(" "),n("img",{staticClass:"play-icon-on-player-nextEpisode",attrs:{src:i(85)}})])])]),e._v(" "),e.ShowSkipTag?n("div",{on:{click:e.skipActionForward}},[n("span",{staticClass:"skipTag"},[e._v("SKIP INTRO")])]):e._e(),e._v(" "),n("popup-episode-listing",{directives:[{name:"show",rawName:"v-show",value:e.showPopupEpisodeList,expression:"showPopupEpisodeList"}]}),e._v(" "),n("popup-player-video-resolution",{directives:[{name:"show",rawName:"v-show",value:e.showVideoResolution,expression:"showVideoResolution"}]}),e._v(" "),n("div",{staticClass:"v-controls",staticStyle:{display:"none"},attrs:{id:"v-controls"}},[n("div",{staticClass:"v-toggle",attrs:{id:"v-toggle"}},[n("img",{attrs:{src:i(95),alt:"v-backward",id:"v-backward"}}),e._v(" "),n("img",{attrs:{src:i(85),alt:"v-pause",id:"v-toggler"}}),e._v(" "),n("img",{directives:[{name:"show",rawName:"v-show",value:e.gt_next_episode_id&&!e.showTagTrailer,expression:"gt_next_episode_id && !showTagTrailer"}],staticStyle:{width:"43px"},attrs:{src:i(97),alt:"v-ic_Next_Episode",id:"v-ic_Next_Episode"},on:{click:function(t){e.playComUpNextItem(!1)}}}),e._v(" "),n("img",{attrs:{src:i(96),alt:"v-forward",id:"v-forward"}})]),e._v(" "),n("div",{staticClass:"v-main-ctrls",staticStyle:{display:"none"},attrs:{id:"v-main-ctrls"}},[e._m(0),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),n("div",{staticClass:"player-footer-icon-list"},[e.episodeIdentifier?n("img",{staticStyle:{width:"31px"},attrs:{src:i(99),alt:"v-episodesList",id:"v-episodesList"},on:{click:e.vEpisodesListDisplay}}):e._e(),e._v(" "),n("img",{attrs:{src:i(98),alt:"v-VideoQuality",id:"v-VideoQuality"},on:{click:e.vPlayerVideoQuality}})])]),e._v(" "),n("div",{staticClass:"v-main-header",staticStyle:{display:"none"},attrs:{id:"v-main-header"}},[n("div",{staticStyle:{display:"inline-flex",padding:"11px"}},[e.headerEpisodeDetails&&e.headerEpisodeDetails.seasonNumber&&e.headerEpisodeDetails.episodeNumber&&!e.showTagTrailer?n("div",{staticClass:"player-header-episode"},[n("h3",[e._v("S"+e._s(e.headerEpisodeDetails.seasonNumber))]),e._v(" "),n("h3",{staticClass:"header-season-details"},[e._v(" | E"+e._s(e.headerEpisodeDetails.episodeNumber))])]):e._e(),e._v(" "),e.showTagTrailer?n("div",[n("span",{staticClass:" player-header-episode"},[e._v("TRAILER")])]):e._e(),e._v(" "),e.movieTagName&&!e.showTagTrailer?n("div",[n("span",{staticClass:"player-header-episode"},[e._v("MOVIE")])]):e._e(),e._v(" "),n("div",{},[e.playerContent&&e.playerContent.title?n("h3",{staticClass:"player-title"},[e._v(e._s(e.makeTitleUpperCase(this.playerContent.title)))]):e._e()])]),e._v(" "),e.chromeCaseShow?n("div",{attrs:{id:"player-cast"}},[n("google-cast-launcher",{staticClass:"chrome-cast-icon"})],1):e._e()])]),e._v(" "),e._m(3),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showVideoLoader,expression:"showVideoLoader"}],staticClass:"v-loader",staticStyle:{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%","background-color":"rgba(0, 0, 0, 0.5)","z-index":"998"},attrs:{id:"v-loader"}},[e.buffer_campaign?n("div",{staticStyle:{position:"relative",height:"56px",margin:"0 auto",top:"50%",transform:"translateY(-50%)",display:"flex",left:"40%"}},[n("div",[n("img",{staticStyle:{background:"transparent",width:"85px"},attrs:{src:e.buffer_campaign.apng}})]),e._v(" "),n("div",{staticStyle:{"white-space":"normal",width:"40vw","margin-top":"0px",position:"relative"}},[n("div",{staticStyle:{position:"absolute",top:"25%"}},[e._v(" "+e._s(e.buffer_campaign.buffer_text)+" ")])])]):n("div",{staticClass:"loading",staticStyle:{position:"relative",width:"56px",height:"56px",margin:"0 auto",top:"50%",transform:"translateY(-50%)"}},[n("div",{staticClass:"inner"})])])],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-group left-group"},[i("span",{staticClass:"v-text v-timer",attrs:{id:"v-current-time"}},[e._v("00:00")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-group v-bar"},[i("input",{staticClass:"v-progress",staticStyle:{display:"none"},attrs:{type:"range",value:"0",min:"0",max:"100",id:"v-progress"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-group right-group"},[i("span",{staticClass:"v-text v-timer",staticStyle:{"margin-right":"8px"},attrs:{id:"v-duration"}},[e._v("00:00")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-loader",staticStyle:{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%","background-color":"rgba(0, 0, 0, 0.5)","z-index":"998",display:"none"},attrs:{id:"v-loader-play"}},[i("div",{staticClass:"loading",staticStyle:{position:"relative",width:"56px",height:"56px",margin:"0 auto",top:"50%",transform:"translateY(-50%)"}},[i("div",{staticClass:"inner"})])])}]}},129:function(e,t,i){var n=i(117);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(81)("b12457c6",n,!0,{})},39:function(e,t,i){var n=i(77)(i(591),i(948),null,null,null);e.exports=n.exports},591:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(868),r=i.n(n),o=i(870),a=i.n(o),s=i(869),l=i.n(s),h=i(1),u=(i(4),i(5)),c=function(){return i.e(74).then(i.bind(null,872))},d=function(){return i.e(105).then(i.bind(null,910))},p=function(){return i.e(117).then(i.bind(null,893))};t.default={data:function(){return{showSharing:!1,showPromptFirstPcPopup:!1,showEnablePcPopup:!1,activePlayerComponent:"PlayerScreenDefault"}},watch:{$route:function(e,t){this.handlePlayerRouteChange()}},components:{PlayerScreenDefault:r.a,PlayerScreenKidsShow:a.a,PlayerScreenKidsDefault:l.a,"player-sharing":c,"popup-prompt-firstpc":d,"popup-enable-pcprompt":p},methods:{checkActiveComponent:function(){var e=this.$route.name,t=void 0;localStorage.getItem("altProfileMode")?t=localStorage.getItem("altProfileMode"):(t="default",localStorage.setItem("altProfileMode",t)),this.activePlayerComponent="kids"==t?"show"==e?"PlayerScreenKidsShow":"PlayerScreenKidsDefault":"PlayerScreenDefault"},setPlayerHeader:function(){this.setHeaderTitle(!1);var e=void 0;localStorage.getItem("altProfileMode")?e=localStorage.getItem("altProfileMode"):(e="default",localStorage.setItem("altProfileMode",e)),"kids"==e?(this.toggleDefaultLogo(!1),this.toggleKidsLogo(!0)):(this.toggleDefaultLogo(!0),this.toggleKidsLogo(!1));var t=document.getElementById("header-search-ico");t&&(t.style.display="inline");var i=document.getElementById("delete-ico");i&&(i.addEventListener("click",this.recentDeleteIcoClickCB),i.style.display="none");var n=document.getElementById("header-close-ico-default");n&&(n.addEventListener("click",this.recentCloseDeleteIcoClickCB),n.style.display="none")},detectFirstPcPrompt:function(){var e=void 0;if(localStorage.getItem("altProfileMode")?e=localStorage.getItem("altProfileMode"):(e="default",localStorage.setItem("altProfileMode",e)),"kids"==e){if("show"==this.$route.name)return}var t=void 0;localStorage.getItem("promptPcPlayback")&&(t=JSON.parse(localStorage.getItem("promptPcPlayback")),1==t.value&&(this.showPromptFirstPcPopup=!0))},handlePlayerRouteChange:function(){this.checkActiveComponent(),h.eventBus.$emit("toggleLanguageFilterEvent",!1)}},created:function(){var e=this;this.checkActiveComponent(),this.setPlayerHeader(),this.detectFirstPcPrompt(),h.eventBus.$on("togglePopupSearch",function(t){e.showSearch=t}),h.eventBus.$on("togglePromptFirstPcPopup",function(t){e.showPromptFirstPcPopup=t}),h.eventBus.$on("toggleEnablePcPrompt",function(t){e.showEnablePcPopup=t}),h.eventBus.$on("showSharingEvent",function(){e.showSharing=!0}),h.eventBus.$on("closeSharingEvent",function(){e.showSharing=!1}),h.eventBus.$on("toggleSigninPopupEvent",function(t){e.showSigninPopup=t,document.getElementById("alt-app")&&(document.getElementById("alt-app").style.position="fixed")}),h.eventBus.$on("togglePlayerSigninPopupEvent",function(t){document.getElementById("alt-app")&&(document.getElementById("alt-app").style.position="fixed"),e.showPlayerSigninPopup=t}),h.eventBus.$on("togglePlayerFavSigninPopupEvent",function(t){localStorage.getItem("altUser")||document.getElementById("alt-app")&&(document.getElementById("alt-app").style.position="fixed"),e.showPlayerFavSigninPopup=t}),h.eventBus.$on("toggleVideoBlockPopupEvent",function(t){e.showVideoBlockPopup=t}),h.eventBus.$on("toggleVideoErrorPopupEvent",function(t){e.showVideoErrorPopup=t}),h.eventBus.$on("toggleRentTvodItemEvent",function(t){e.showTvodRent=t}),h.eventBus.$on("toggleRentNowPopupEvent",function(t){e.showRentNowPopup=t}),h.eventBus.$on("toggleGeoBlockEvent",function(t){e.showGeoBlockPopup=t}),h.eventBus.$on("togglePopupNetworkError",function(t){e.showNoNetwork=t}),h.eventBus.$on("toggleCreateKidsPinEvent",function(t){e.showCreateKidsPin=t,t||e.$router.push({name:"home"})}),document.body.scrollTop=document.documentElement.scrollTop=0},beforeDestroy:function(){h.eventBus.$off("handlePlayerBeforeRouteLeave"),h.eventBus.$off("playTrailerEvent"),h.eventBus.$off("playStreamEvent"),h.eventBus.$off("showSharingEvent"),h.eventBus.$off("playTrailerBtnClickEvent"),h.eventBus.$off("playMovieBtnClickEvent"),h.eventBus.$off("plrPlayingMovieEvent"),h.eventBus.$off("plrPlayingTrailerEvent"),h.eventBus.$off("playRelatedEpisodeClickEvent"),h.eventBus.$off("togglePromptFirstPcPopup"),h.eventBus.$off("toggleEnablePcPrompt")},beforeRouteLeave:function(e,t,i){h.eventBus.$emit("handlePlayerBeforeRouteLeave",!0),i()},mixins:[u.a]}},593:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(106),r=i.n(n),o=(i(1),i(4),i(5),function(){return i.e(72).then(i.bind(null,866))}),a=function(){return i.e(128).then(i.bind(null,867))},s=function(){return i.e(71).then(i.bind(null,871))};t.default={data:function(){return{}},components:{"player-screen":r.a,"detail-buttons":o,"player-details":a,"related-seasons":s}}},594:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(106),r=i.n(n),o=(i(1),i(4),i(5));t.default={components:{"player-screen":r.a},methods:{setKidsDefaultHeader:function(){this.setHeaderTitle(!1),this.toggleDefaultLogo(!1),this.toggleKidsLogo(!0)}},mounted:function(){this.setKidsDefaultHeader()},mixins:[o.a]}},595:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),r=i(4),o=i(5),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},s=function(){return i.e(129).then(i.bind(null,187))};t.default={data:function(){return{id:void 0,seasonId:void 0,limit:50,offset:0,episodes:void 0,episodesArr:new Array,episodeCount:0,togglePlayer:!1}},methods:a({},i.i(r.c)(["actGetMediaSeries","actGetSeasons","actGetAllEpisodes"]),{initPlayerScreenKidsShow:function(){var e=void 0;if(localStorage.getItem("altProfileMode")?e=localStorage.getItem("altProfileMode"):(e="default",localStorage.getItem("altProfileMode",e)),"kids"==e){"show"==this.$route.name&&(this.id=this.$route.params.id,this.getSeriesInfo())}},getSeriesInfo:function(){var e=this;this.actGetMediaSeries(this.id).then(function(t){if(!e.parseContents(t).kidsContent)return void e.$router.replace({name:"home"});t.titles&&t.titles.en&&e.setHeaderTitle(t.titles.en),e.getSeasonInfo()},function(e){})},getSeasonInfo:function(){var e=this;this.actGetSeasons(this.id).then(function(t){t.seasons&&t.seasons.length&&(e.seasonId=t.seasons[0].id,e.getAllEpisodes())},function(e){})},getAllEpisodes:function(){var e=this;this.actGetAllEpisodes({seriesId:this.id,seasonId:this.seasonId,limit:this.limit,offset:this.offset}).then(function(t){if(t.count)if(e.episodesArr=e.episodesArr.concat(t.episodes),e.episodeCount+=t.episodes.length,t.count>e.episodeCount)e.offset+=e.limit,e.getAllEpisodes();else{var i=new Array,n=void 0;localStorage.getItem("mediaProgressList")&&(n=JSON.parse(localStorage.getItem("mediaProgressList")));for(var r in e.episodesArr){var o=e.parseContents(e.episodesArr[r]);if(n)for(var a in n){if(n[a].media_id==o.id){o.progress=n[a].progress;break}o.progress=void 0}i.push(o)}e.episodes=i,e.toggleLoader(!1)}},function(t){e.toggleLoader(!1)})},getContentToPlay:function(e){this.contentToSend=e,this.checkScreenRotationType()},checkScreenRotationType:function(){"orientation"in screen&&(matchMedia("(orientation: portrait)").matches,this.makeFullscreen(this.landscapeRotation))},makeFullscreen:function(e){this.vContain=document.getElementById("v-contain"),document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||(this.vContain.requestFullscreen?this.vContain.requestFullscreen():this.vContain.msRequestFullscreen?this.vContain.msRequestFullscreen():this.vContain.mozRequestFullScreen?this.vContain.mozRequestFullScreen():this.vContain.webkitRequestFullscreen&&this.vContain.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)),e&&e()},landscapeRotation:function(){var e=this;screen.orientation.lock("landscape").then(function(t){n.eventBus.$emit("toggleSendDataToPlayerScreen",e.contentToSend)},function(t){n.eventBus.$emit("toggleSendDataToPlayerScreen",e.contentToSend)})},togglePlayerScreenCB:function(e){this.togglePlayer=e}}),created:function(){n.eventBus.$on("toggleSendDataToPlayerScreen",this.togglePlayerScreenCB),n.eventBus.$on("togglePlayerScreenEvent",this.togglePlayerScreenCB),this.initPlayerScreenKidsShow()},beforeDestroy:function(){n.eventBus.$off("toggleSendDataToPlayerScreen",this.togglePlayerScreenCB),n.eventBus.$off("togglePlayerScreenEvent",this.togglePlayerScreenCB)},components:{KidsPlayer:s},mixins:[o.a]}},77:function(e,t){e.exports=function(e,t,i,n,r){var o,a=e=e||{},s=typeof e.default;"object"!==s&&"function"!==s||(o=e,a=e.default);var l="function"==typeof a?a.options:a;t&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns),n&&(l._scopeId=n);var h;if(r?(h=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},l._ssrRegister=h):i&&(h=i),h){var u=l.functional,c=u?l.render:l.beforeCreate;u?l.render=function(e,t){return h.call(t),c(e,t)}:l.beforeCreate=c?[].concat(c,h):[h]}return{esModule:o,exports:a,options:l}}},81:function(e,t,i){function n(e){for(var t=0;t<e.length;t++){var i=e[t],n=u[i.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](i.parts[r]);for(;r<i.parts.length;r++)n.parts.push(o(i.parts[r]));n.parts.length>i.parts.length&&(n.parts.length=i.parts.length)}else{for(var a=[],r=0;r<i.parts.length;r++)a.push(o(i.parts[r]));u[i.id]={id:i.id,refs:1,parts:a}}}}function r(){var e=document.createElement("style");return e.type="text/css",c.appendChild(e),e}function o(e){var t,i,n=document.querySelector("style["+m+'~="'+e.id+'"]');if(n){if(f)return g;n.parentNode.removeChild(n)}if(y){var o=p++;n=d||(d=r()),t=a.bind(null,n,o,!1),i=a.bind(null,n,o,!0)}else n=r(),t=s.bind(null,n),i=function(){n.parentNode.removeChild(n)};return t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else i()}}function a(e,t,i,n){var r=i?"":n.css;if(e.styleSheet)e.styleSheet.cssText=b(t,r);else{var o=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function s(e,t){var i=t.css,n=t.media,r=t.sourceMap;if(n&&e.setAttribute("media",n),v.ssrId&&e.setAttribute(m,t.id),r&&(i+="\n/*# sourceURL="+r.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var l="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!l)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var h=i(84),u={},c=l&&(document.head||document.getElementsByTagName("head")[0]),d=null,p=0,f=!1,g=function(){},v=null,m="data-vue-ssr-id",y="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,i,r){f=i,v=r||{};var o=h(e,t);return n(o),function(t){for(var i=[],r=0;r<o.length;r++){var a=o[r],s=u[a.id];s.refs--,i.push(s)}t?(o=h(e,t),n(o)):o=[];for(var r=0;r<i.length;r++){var s=i[r];if(0===s.refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete u[s.id]}}}};var b=function(){var e=[];return function(t,i){return e[t]=i,e.filter(Boolean).join("\n")}}()},84:function(e,t){e.exports=function(e,t){for(var i=[],n={},r=0;r<t.length;r++){var o=t[r],a=o[0],s=o[1],l=o[2],h=o[3],u={id:e+":"+r,css:s,media:l,sourceMap:h};n[a]?n[a].parts.push(u):i.push(n[a]={id:a,parts:[u]})}return i}},85:function(e,t,i){e.exports=i.p+"ic_Play.png"},868:function(e,t,i){var n=i(77)(i(593),i(992),null,null,null);e.exports=n.exports},869:function(e,t,i){var n=i(77)(i(594),i(1022),null,null,null);e.exports=n.exports},87:function(e,t,i){e.exports=i.p+"alt-cover.jpg"},870:function(e,t,i){var n=i(77)(i(595),i(1047),null,null,null);e.exports=n.exports},92:function(e,t,i){var n;!function(){var r={};(function(e){function t(e,t){var i=e.split("."),n=Ya;i[0]in n||!n.execScript||n.execScript("var "+i[0]);for(var r;i.length&&(r=i.shift());)i.length||void 0===t?n=n[r]?n[r]:n[r]={}:n[r]=t}function i(e){function t(){}var i=wt;t.prototype=i.prototype,e.Te=i.prototype,e.prototype=new t,e.prototype.constructor=e,e.Re=function(e,t,n){return i.prototype[t].apply(e,Array.prototype.slice.call(arguments,2))}}function n(e){this.c=Math.exp(Math.log(.5)/e),this.b=this.a=0}function r(e,t,i){var n=Math.pow(e.c,t);i=i*(1-n)+n*e.a,isNaN(i)||(e.a=i,e.b+=t)}function o(e){return e.a/(1-Math.pow(e.c,e.b))}function a(){this.b=new n(2),this.c=new n(5),this.a=0}function s(){}function l(){}function h(e,t,i,n){this.severity=e,this.category=t,this.code=i,this.data=Array.prototype.slice.call(arguments,3),this.handled=!1}function u(e){var t;e instanceof u?(c(this,e.ea),this.Aa=e.Aa,this.ja=e.ja,d(this,e.Ia),this.ba=e.ba,p(this,y(e.a)),this.ta=e.ta):e&&(t=String(e).match(Ja))?(c(this,t[1]||"",!0),this.Aa=f(t[2]||""),this.ja=f(t[3]||"",!0),d(this,t[4]),this.ba=f(t[5]||"",!0),p(this,t[6]||"",!0),this.ta=f(t[7]||"")):this.a=new m(null)}function c(e,t,i){e.ea=i?f(t,!0):t,e.ea&&(e.ea=e.ea.replace(/:$/,""))}function d(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Ia=t}else e.Ia=null}function p(e,t,i){t instanceof m?e.a=t:(i||(t=g(t,ts)),e.a=new m(t))}function f(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function g(e,t,i){return"string"==typeof e?(e=encodeURI(e).replace(t,v),i&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function v(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}function m(e){this.b=e||null}function y(e){var t=new m;if(t.b=e.b,e.a){var i,n={};for(i in e.a)n[i]=e.a[i].concat();t.a=n,t.c=e.c}return t}function b(){var e,t,i=new Promise(function(i,n){e=i,t=n});return i.resolve=e,i.reject=t,i}function C(e,t,i){var n=E();this.j=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.f=null==e.baseDelay?n.baseDelay:e.baseDelay,this.i=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.h=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.a=0,this.b=this.f,this.c=t||!1,this.g=i||null,this.c&&(this.a=1)}function T(e){if(e.a>=e.j){if(!e.c)return Promise.reject();e.a=1,e.b=e.f}var t=new b;return e.a?(w(e,t.resolve,e.b*(1+(2*Math.random()-1)*e.i)),e.b*=e.h):t.resolve(),e.a++,t}function E(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0}}function w(e,t,i){if(e.g)if(e.g()||!i)t();else{var n=Math.min(200,i);P(function(){w(this,t,i-n)}.bind(e),n)}else P(t,i)}function P(t,i){e.setTimeout(t,i)}function S(e,t,i,n,r){var o,a=r in n;for(o in t){var s=r+"."+o,l=a?n[r]:i[o];(a||o in e)&&(void 0===t[o]?void 0===l||a?delete e[o]:e[o]=l:l.constructor==Object&&t[o]&&t[o].constructor==Object?(e[o]||(e[o]=l),S(e[o],t[o],l,n,s)):typeof t[o]==typeof l&&null!=t[o]&&t[o].constructor==l.constructor&&(e[o]=t[o]))}}function _(e){function t(e){switch(typeof e){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return e;default:if(!e)return e;if(0<=i.indexOf(e))return null;var n=e.constructor==Array;if(e.constructor!=Object&&!n)return null;i.push(e);var r,o=n?[]:{};for(r in e)o[r]=t(e[r]);return n&&(o.length=e.length),o}}var i=[];return t(e)}function I(e,t){return e.reduce(function(e,t,i){return t.catch(e.bind(null,i))}.bind(null,t),Promise.reject())}function k(e,t){return e.concat(t)}function A(){}function L(e){return null!=e}function N(e,t,i){return i.indexOf(e)==t}function x(e){this.f=!1,this.a=[],this.b=[],this.c=[],this.g=e||null}function B(e,t){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t}}function M(e,t,i,n,r,o,a){if(e.f||a())return Promise.reject();var s=new u(i.uris[r]),l=s.ea;if(l||(l=location.protocol,l=l.slice(0,-1),c(s,l),i.uris[r]=s.toString()),!(l=ns[l]))return Promise.reject(new h(2,1,1e3,s));var d=Date.now();return l(i.uris[r],i,t).then(function(e){void 0==e.timeMs&&(e.timeMs=Date.now()-d);var i=Date.now(),n=Promise.resolve();return this.c.forEach(function(i){n=n.then(function(){return Promise.resolve(i(t,e))}.bind(this))}.bind(this)),n=n.catch(function(e){var t=2;throw e instanceof h&&(t=e.severity),new h(t,1,1007,e)}),n.then(function(){return e.timeMs+=Date.now()-i,e.timeMs+=o,e})}.bind(e)).catch(function(e){if(e&&1==e.severity)return r=(r+1)%i.uris.length,a()?Promise.reject():T(n).then(function(){return M(this,t,i,n,r,o,a)}.bind(this),function(){throw e});throw e}.bind(e))}function R(e,t){for(var i=[],n=0;n<e.length;++n){for(var r=!1,o=0;o<i.length&&!(r=t?t(e[n],i[o]):e[n]===i[o]);++o);r||i.push(e[n])}return i}function D(e,t,i){for(var n=0;n<e.length;++n)if(i(e[n],t))return n;return-1}function O(e,t){var i=e.indexOf(t);-1<i&&e.splice(i,1)}function U(){this.a={}}function F(){this.a=new U}function V(e,t,i,n){e.a&&(t=new G(t,i,n),e.a.push(i,t))}function j(e,t,i,n){V(e,t,i,function(e){this.ha(t,i),n(e)}.bind(e))}function $(e){if(e.a){var t,i=e.a,n=[];for(t in i.a)n.push.apply(n,i.a[t]);for(i=0;i<n.length;++i)n[i].ha();e.a.a={}}}function G(e,t,i){this.target=e,this.type=t,this.a=i,this.target.addEventListener(t,i,!1)}function H(t,i){var n,r=i||{};for(n in r)this[n]=r[n];this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}function q(e,t){if(!t.length)return e;var i=t.map(function(e){return new u(e)});return e.map(function(e){return new u(e)}).map(function(e){return i.map(e.resolve.bind(e))}).reduce(k,[]).map(function(e){return e.toString()})}function K(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:t||[],keyIds:[]}}function z(e){return!e||!Object.keys(e).length}function W(e){return Object.keys(e).map(function(t){return e[t]})}function X(e,t){return Object.keys(e).reduce(function(i,n){return i[n]=t(e[n],n),i},{})}function Y(e,t){return Object.keys(e).every(function(i){return t(i,e[i])})}function J(e,t){Object.keys(e).forEach(function(i){t(i,e[i])})}function Q(e,t){var i=e;return t&&(i+='; codecs="'+t+'"'),i}function Z(e){if(!e)return"";e=new Uint8Array(e),239==e[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),e=escape(ne(e));try{return decodeURIComponent(e)}catch(e){throw new h(2,2,2004)}}function ee(e,t,i){if(!e)return"";if(!i&&e.byteLength%2)throw new h(2,2,2004);if(e instanceof ArrayBuffer)var n=e;else i=new Uint8Array(e.byteLength),i.set(new Uint8Array(e)),n=i.buffer;e=Math.floor(e.byteLength/2),i=new Uint16Array(e),n=new DataView(n);for(var r=0;r<e;r++)i[r]=n.getUint16(2*r,t);return ne(i)}function te(e){var t=new Uint8Array(e);if(239==t[0]&&187==t[1]&&191==t[2])return Z(t);if(254==t[0]&&255==t[1])return ee(t.subarray(2),!1);if(255==t[0]&&254==t[1])return ee(t.subarray(2),!0);var i=function(e,t){return e.byteLength<=t||32<=e[t]&&126>=e[t]}.bind(null,t);if(!t[0]&&!t[2])return ee(e,!1);if(!t[1]&&!t[3])return ee(e,!0);if(i(0)&&i(1)&&i(2)&&i(3))return Z(e);throw new h(2,2,2003)}function ie(e){e=unescape(encodeURIComponent(e));for(var t=new Uint8Array(e.length),i=0;i<e.length;++i)t[i]=e.charCodeAt(i);return t.buffer}function ne(e){for(var t="",i=0;i<e.length;i+=16e3)t+=String.fromCharCode.apply(null,e.subarray(i,i+16e3));return t}function re(e){this.a=null,this.b=function(){this.a=null,e()}.bind(this)}function oe(e,t){e.cancel(),e.a=setTimeout(e.b,1e3*t)}function ae(e,t){e.cancel();var i=function(){this.b(),this.a=setTimeout(i,1e3*t)}.bind(e);e.a=setTimeout(i,1e3*t)}function se(t,i){var n=void 0==i||i,r=e.btoa(String.fromCharCode.apply(null,t)).replace(/\+/g,"-").replace(/\//g,"_");return n?r:r.replace(/=*$/,"")}function le(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var i=new Uint8Array(t.length),n=0;n<t.length;++n)i[n]=t.charCodeAt(n);return i}function he(t){for(var i=new Uint8Array(t.length/2),n=0;n<t.length;n+=2)i[n/2]=e.parseInt(t.substr(n,2),16);return i}function ue(e){for(var t="",i=0;i<e.length;++i){var n=e[i].toString(16);1==n.length&&(n="0"+n),t+=n}return t}function ce(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var i=0;i<e.length;++i)if(e[i]!=t[i])return!1;return!0}function de(e){this.s=e,this.l=this.j=this.w=null,this.L=!1,this.b=null,this.f=new F,this.a=[],this.m=[],this.i=new b,this.h=null,this.g=function(t){this.i.reject(t),e.onError(t)}.bind(this),this.C={},this.D=new re(this.$d.bind(this)),this.ia=this.c=!1,this.J=[],this.X=!1,this.B=new re(this.Zd.bind(this)),ae(this.B,1),this.i.catch(function(){})}function pe(e,t){if(!e.j)return j(e.f,t,"encrypted",function(){this.g(new h(2,6,6010))}.bind(e)),Promise.resolve();e.l=t,j(e.f,e.l,"play",e.Gd.bind(e));var i=e.l.setMediaKeys(e.j),i=i.catch(function(e){return Promise.reject(new h(2,6,6003,e.message))}),n=null;return e.b.serverCertificate&&e.b.serverCertificate.length&&(n=e.j.setServerCertificate(e.b.serverCertificate).then(function(){}).catch(function(e){return Promise.reject(new h(2,6,6004,e.message))})),Promise.all([i,n]).then(function(){if(this.c)return Promise.reject();ge(this),this.b.initData.length||this.m.length||V(this.f,this.l,"encrypted",this.vd.bind(this))}.bind(e)).catch(function(e){return this.c?Promise.resolve():Promise.reject(e)}.bind(e))}function fe(e,t){return Promise.all(t.map(function(e){return we(this,e).then(function(e){if(e){for(var t=new b,i=0;i<this.a.length;i++)if(this.a[i].fa==e){this.a[i].na=t;break}return Promise.all([e.remove(),t])}}.bind(this))}.bind(e)))}function ge(e){var t=e.b?e.b.initData:[];return t.forEach(function(e){Pe(this,e.initDataType,e.initData)}.bind(e)),e.m.forEach(function(e){we(this,e)}.bind(e)),t.length||e.m.length||e.i.resolve(),e.i}function ve(e){return e.a.map(function(e){return e.fa.sessionId})}function me(t,i,n,r,o){var a=Ce(t);i.periods.forEach(function(t){t.variants.forEach(function(t){a&&(t.drmInfos=[a]),t.drmInfos.forEach(function(i){be(this,i),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==i.keySystem&&(i.keySystem="com.chromecast.playready");var a=r[i.keySystem];a||(a={audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:n?"required":"optional",sessionTypes:[n?"persistent-license":"temporary"],label:i.keySystem,drmInfos:[]},r[i.keySystem]=a,o.push(i.keySystem)),a.drmInfos.push(i),i.distinctiveIdentifierRequired&&(a.distinctiveIdentifier="required"),i.persistentStateRequired&&(a.persistentState="required");var s=[];t.video&&s.push(t.video),t.audio&&s.push(t.audio),s.forEach(function(e){("video"==e.type?a.videoCapabilities:a.audioCapabilities).push({robustness:("video"==e.type?i.videoRobustness:i.audioRobustness)||"",contentType:Q(e.mimeType,e.codecs)})}.bind(this))}.bind(this))}.bind(this))}.bind(t))}function ye(e,t,i){if(1==i.length&&""==i[0])return Promise.reject(new h(2,6,6e3));var n=new b,r=n;return[!0,!1].forEach(function(e){i.forEach(function(i){var n=t[i];n.drmInfos.some(function(e){return!!e.licenseServerUri})==e&&(n.audioCapabilities.length||delete n.audioCapabilities,n.videoCapabilities.length||delete n.videoCapabilities,r=r.catch(function(){return this.c?Promise.reject():navigator.requestMediaKeySystemAccess(i,[n])}.bind(this)))}.bind(this))}.bind(e)),r=r.catch(function(){return Promise.reject(new h(2,6,6001))}),r=r.then(function(e){if(this.c)return Promise.reject();var i=0<=navigator.userAgent.indexOf("Edge/"),n=e.getConfiguration();return this.w=(n.audioCapabilities||[]).concat(n.videoCapabilities||[]).map(function(e){return e.contentType}),i&&(this.w=null),i=t[e.keySystem],Te(this,e.keySystem,i,i.drmInfos),this.b.licenseServerUri?e.createMediaKeys():Promise.reject(new h(2,6,6012))}.bind(e)).then(function(e){if(this.c)return Promise.reject();this.j=e,this.L=!0}.bind(e)).catch(function(e){return this.c?Promise.resolve():(this.w=this.b=null,e instanceof h?Promise.reject(e):Promise.reject(new h(2,6,6002,e.message)))}.bind(e)),n.reject(),r}function be(e,t){var i=t.keySystem;if(i){if(!t.licenseServerUri){var n=e.h.servers[i];n&&(t.licenseServerUri=n)}t.keyIds||(t.keyIds=[]),(i=e.h.advanced[i])&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=i.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=i.persistentStateRequired),t.videoRobustness||(t.videoRobustness=i.videoRobustness),t.audioRobustness||(t.audioRobustness=i.audioRobustness),t.serverCertificate||(t.serverCertificate=i.serverCertificate))}}function Ce(t){if(z(t.h.clearKeys))return null;var i,n=[],r=[];for(i in t.h.clearKeys){var o=t.h.clearKeys[i],a=he(i),o=he(o),a={kty:"oct",kid:se(a,!1),k:se(o,!1)};n.push(a),r.push(a.kid)}return t=JSON.stringify({keys:n}),r=JSON.stringify({kids:r}),r=[{initData:new Uint8Array(ie(r)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:r,keyIds:[]}}function Te(e,t,i,n){var r=[],o=[],a=[],s=[];Ee(n,r,o,a,s),e.b={keySystem:t,licenseServerUri:r[0],distinctiveIdentifierRequired:"required"==i.distinctiveIdentifier,persistentStateRequired:"required"==i.persistentState,audioRobustness:i.audioCapabilities?i.audioCapabilities[0].robustness:"",videoRobustness:i.videoCapabilities?i.videoCapabilities[0].robustness:"",serverCertificate:o[0],initData:a,keyIds:s}}function Ee(e,t,i,n,r){function o(e,t){return!(!e.keyId||e.keyId!=t.keyId)||e.initDataType==t.initDataType&&ce(e.initData,t.initData)}e.forEach(function(e){if(-1==t.indexOf(e.licenseServerUri)&&t.push(e.licenseServerUri),e.serverCertificate&&-1==D(i,e.serverCertificate,ce)&&i.push(e.serverCertificate),e.initData&&e.initData.forEach(function(e){-1==D(n,e,o)&&n.push(e)}),e.keyIds)for(var a=0;a<e.keyIds.length;++a)-1==r.indexOf(e.keyIds[a])&&r.push(e.keyIds[a])})}function we(e,t){try{var i=e.j.createSession("persistent-license")}catch(t){var n=new h(2,6,6005,t.message);return e.g(n),Promise.reject(n)}V(e.f,i,"message",e.uc.bind(e)),V(e.f,i,"keystatuseschange",e.oc.bind(e));var r={initData:null,fa:i,loaded:!1,Gb:1/0,na:null};return e.a.push(r),i.load(t).then(function(e){if(!this.c){if(e)return r.loaded=!0,this.a.every(function(e){return e.loaded})&&this.i.resolve(),i;this.a.splice(this.a.indexOf(r),1),this.g(new h(2,6,6013))}}.bind(e),function(e){this.c||(this.a.splice(this.a.indexOf(r),1),this.g(new h(2,6,6005,e.message)))}.bind(e))}function Pe(e,t,i){try{var n=e.ia?e.j.createSession("persistent-license"):e.j.createSession()}catch(t){return void e.g(new h(2,6,6005,t.message))}V(e.f,n,"message",e.uc.bind(e)),V(e.f,n,"keystatuseschange",e.oc.bind(e)),e.a.push({initData:i,fa:n,loaded:!1,Gb:1/0,na:null}),n.generateRequest(t,i.buffer).catch(function(e){if(!this.c){for(var t=0;t<this.a.length;++t)if(this.a[t].fa==n){this.a.splice(t,1);break}this.g(new h(2,6,6006,e.message))}}.bind(e))}function Se(e,t){for(var i,n=t.target,r=0;r<e.a.length;r++)if(e.a[r].fa==n){i=e.a[r];break}r=B([e.b.licenseServerUri],e.h.retryParameters),r.body=t.message,r.method="POST","com.microsoft.playready"!=e.b.keySystem&&"com.chromecast.playready"!=e.b.keySystem||_e(r),e.s.Sa.request(2,r).then(function(e){return this.c?Promise.reject():n.update(e.data).then(function(){this.s.onEvent(new H("drmsessionupdate")),i&&(i.na&&i.na.resolve(),setTimeout(function(){i.loaded=!0,this.a.every(function(e){return e.loaded})&&this.i.resolve()}.bind(this),5e3))}.bind(this))}.bind(e),function(e){if(this.c)return Promise.resolve();e=new h(2,6,6007,e),this.g(e),i&&i.na&&i.na.reject(e)}.bind(e)).catch(function(e){if(this.c)return Promise.resolve();e=new h(2,6,6008,e.message),this.g(e),i&&i.na&&i.na.reject(e)}.bind(e))}function _e(e){var t=ee(e.body,!0,!0);if(-1==t.indexOf("PlayReadyKeyMessage"))e.headers["Content-Type"]="text/xml; charset=utf-8";else{for(var t=(new DOMParser).parseFromString(t,"application/xml"),i=t.getElementsByTagName("HttpHeader"),n=0;n<i.length;++n)e.headers[i[n].querySelector("name").textContent]=i[n].querySelector("value").textContent;e.body=le(t.querySelector("Challenge").textContent).buffer}}function Ie(){var e=[],t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],i=[{videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:t}],n={};return"org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").forEach(function(t){var r=navigator.requestMediaKeySystemAccess(t,i).then(function(e){var i=e.getConfiguration().sessionTypes,i=!!i&&0<=i.indexOf("persistent-license");return 0<=navigator.userAgent.indexOf("Tizen 3")&&(i=!1),n[t]={persistentState:i},e.createMediaKeys()}).catch(function(){n[t]=null});e.push(r)}),Promise.all(e).then(function(){return n})}function ke(e,t){var i=e.keySystem();return!t.drmInfos.length||t.drmInfos.some(function(e){return e.keySystem==i})}function Ae(e,t){if(!e.length)return t;if(!t.length)return e;for(var i=[],n=0;n<e.length;n++)for(var r=0;r<t.length;r++)if(e[n].keySystem==t[r].keySystem){var o=e[n],r=t[r],a=[],a=a.concat(o.initData||[]),a=a.concat(r.initData||[]),s=[],s=s.concat(o.keyIds),s=s.concat(r.keyIds);i.push({keySystem:o.keySystem,licenseServerUri:o.licenseServerUri||r.licenseServerUri,distinctiveIdentifierRequired:o.distinctiveIdentifierRequired||r.distinctiveIdentifierRequired,persistentStateRequired:o.persistentStateRequired||r.persistentStateRequired,videoRobustness:o.videoRobustness||r.videoRobustness,audioRobustness:o.audioRobustness||r.audioRobustness,serverCertificate:o.serverCertificate||r.serverCertificate,initData:a,keyIds:s});break}return i}function Le(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Ne(e,t){return!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))&&(t>=e.start(0)&&t<=e.end(e.length-1))}function xe(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var i=0,n=e.length-1;0<=n&&e.end(n)>t;--n)i+=e.end(n)-Math.max(e.start(n),t);return i}function Be(e){if(!e)return[];for(var t=[],i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t}function Me(e){this.f=null,this.c=e,this.h=this.i=0,this.g=1/0,this.b=this.a=null}function Re(e,t){t.length?(s("The use of stateless text parsers is deprecated."),as[e]=Oe.bind(null,t)):as[e]=t}function De(e,t,i,n){return Promise.resolve().then(function(){if(this.f&&this.c)if(null==i||null==n)this.f.parseInit(t);else{var e=this.f.parseMedia(t,{periodStart:this.i,segmentStart:i,segmentEnd:n}).filter(function(e){return e.startTime>=this.h&&e.startTime<this.g}.bind(this));this.c.append(e),null==this.a&&(this.a=Math.max(i,this.h)),this.b=Math.min(n,this.g)}}.bind(e))}function Oe(e){this.Ta=e}function Ue(e,t,i){this.g=e,this.f=t,this.j=i,this.b={},this.a=null,this.c={},this.h=new F,this.i=!1}function Fe(){var e={};return'video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="av1",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",video/mp2t; codecs="mp4a.40.2",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").forEach(function(t){e[t]=!!as[t]||MediaSource.isTypeSupported(t);var i=t.split(";")[0];e[i]=e[i]||e[t]}),e}function Ve(e,t){e.a||(e.a=new Me(e.j)),e.a.f=new as[t]}function je(e,t){if("text"==t)var i=e.a.a;else i=$e(e,t),i=!i||1==i.length&&1e-6>i.end(0)-i.start(0)?null:1==i.length&&0>i.start(0)?0:i.length?i.start(0):null;return i}function $e(e,t){try{return e.b[t].buffered}catch(e){return null}}function Ge(e,t,i,n,r){return"text"==t?De(e.a,i,n,r):Ke(e,t,e.Ae.bind(e,t,i))}function He(e,t){return"text"==t?e.a.remove(0,1/0):Ke(e,t,e.Ac.bind(e,t,0,e.f.duration))}function qe(e,t,i,n,r){return"text"==t?(e.a.i=i,e=e.a,e.h=n,e.g=r,Promise.resolve()):Promise.all([Ke(e,t,e.Pc.bind(e,t)),Ke(e,t,e.re.bind(e,t,i)),Ke(e,t,e.oe.bind(e,t,n,r))])}function Ke(e,t,i){if(e.i)return Promise.reject();if(i={start:i,p:new b},e.c[t].push(i),1==e.c[t].length)try{i.start()}catch(n){"QuotaExceededError"==n.name?i.p.reject(new h(2,3,3017,t)):i.p.reject(new h(2,3,3015,n)),We(e,t)}return i.p}function ze(e,t){if(e.i)return Promise.reject();var i,n=[];for(i in e.b){var r=new b,o={start:function(e){e.resolve()}.bind(null,r),p:r};e.c[i].push(o),n.push(r),1==e.c[i].length&&o.start()}return Promise.all(n).then(function(){var e;try{t()}catch(e){var i=Promise.reject(new h(2,3,3015,e))}for(e in this.b)We(this,e);return i}.bind(e),function(){return Promise.reject()}.bind(e))}function We(e,t){e.c[t].shift();var i=e.c[t][0];if(i)try{i.start()}catch(n){i.p.reject(new h(2,3,3015,n)),We(e,t)}}function Xe(e,t,i){return i==t||e>=ss&&i==t.split("-")[0]||e>=ls&&i.split("-")[0]==t.split("-")[0]}function Ye(e){e=e.toLowerCase().split("-");var t=hs[e[0]];return t&&(e[0]=t),e.join("-")}function Je(e,t,i){var n=e.video;return!(n&&(n.width<t.minWidth||n.width>t.maxWidth||n.width>i.width||n.height<t.minHeight||n.height>t.maxHeight||n.height>i.height||n.width*n.height<t.minPixels||n.width*n.height>t.maxPixels)||e.bandwidth<t.minBandwidth||e.bandwidth>t.maxBandwidth)}function Qe(e,t,i){var n=!1;return e.variants.forEach(function(e){var r=e.allowedByApplication;e.allowedByApplication=Je(e,t,i),r!=e.allowedByApplication&&(n=!0)}),n}function Ze(e,t,i){var n=t.video,r=t.audio;for(t=0;t<i.variants.length;++t){var o=i.variants[t],a=e,s=r,l=n;(a&&a.L&&!ke(a,o)?0:et(o.audio,a,s)&&et(o.video,a,l))||(i.variants.splice(t,1),--t)}for(t=0;t<i.textStreams.length;++t)e=i.textStreams[t],as[Q(e.mimeType,e.codecs)]||(i.textStreams.splice(t,1),--t)}function et(e,t,i){if(!e)return!0;var n=null;t&&t.L&&(n=t.w),t=Q(e.mimeType,e.codecs);var r,o=e.mimeType;for(r in os){var a=e[r],s=os[r];a&&(o+="; "+s+'="'+a+'"')}return!(!as[Q(e.mimeType,e.codecs)]&&!MediaSource.isTypeSupported(o)||n&&e.encrypted&&0>n.indexOf(t)||i&&(e.mimeType!=i.mimeType||e.codecs.split(".")[0]!=i.codecs.split(".")[0]))}function tt(e,t,i){var n=null;return ot(e.variants).map(function(e){var r;r=e.video&&e.audio?i==e.video.id&&t==e.audio.id:e.video&&i==e.video.id||e.audio&&t==e.audio.id;var o="";e.video&&(o+=e.video.codecs),e.audio&&(""!=o&&(o+=", "),o+=e.audio.codecs,n=e.audio.label);var a=e.audio?e.audio.codecs:null,s=e.video?e.video.codecs:null,l=null;e.video?l=e.video.mimeType:e.audio&&(l=e.audio.mimeType);var h=null;e.audio?h=e.audio.kind:e.video&&(h=e.video.kind);var u=R((e.audio?e.audio.roles:[]).concat(e.video?e.video.roles:[]));return{id:e.id,active:r,type:"variant",bandwidth:e.bandwidth,language:e.language,label:n,kind:h||null,width:e.video?e.video.width:null,height:e.video?e.video.height:null,frameRate:e.video?e.video.frameRate:void 0,mimeType:l,codecs:o,audioCodec:a,videoCodec:s,primary:e.primary,roles:u,videoId:e.video?e.video.id:null,audioId:e.audio?e.audio.id:null,channelsCount:e.audio?e.audio.channelsCount:null,audioBandwidth:e.audio&&e.audio.bandwidth?e.audio.bandwidth:null,videoBandwidth:e.video&&e.video.bandwidth?e.video.bandwidth:null}})}function it(e,t){return e.textStreams.map(function(e){return{id:e.id,active:t==e.id,type:"text",language:e.language,label:e.label,kind:e.kind,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,channelsCount:null,audioBandwidth:null,videoBandwidth:null}})}function nt(e,t){for(var i=0;i<e.variants.length;i++)if(e.variants[i].id==t.id)return e.variants[i];return null}function rt(e,t){for(var i=0;i<e.textStreams.length;i++)if(e.textStreams[i].id==t.id)return e.textStreams[i];return null}function ot(e){return e.filter(function(e){return e.allowedByApplication&&e.allowedByKeySystem})}function at(e,t,i,n){var r=ot(e.variants),o=r.filter(function(e){return e.primary});o.length||(o=r);var a=o.length?o[0].language:"",o=o.filter(function(e){return e.language==a});if(t){var s=Ye(t);[ls,ss,0].forEach(function(e){var t=!1;r.forEach(function(i){s=Ye(s);var r=Ye(i.language);Xe(e,s,r)&&(t?o.push(i):(o=[i],t=!0),n&&(n.audio=!0))})})}return i&&(e=lt(o,i),e.length)?e:(e=o.map(function(e){return(e.audio?e.audio.roles:[]).concat(e.video?e.video.roles:[])}).reduce(k,[]),e.length?lt(o,e[0]):o)}function st(e,t,i,n){var r=e.textStreams,o=r.filter(function(e){return e.primary});o.length||(o=r);var a=o.length?o[0].language:"",o=o.filter(function(e){return e.language==a});if(t){var s=Ye(t);[ls,ss,0].forEach(function(e){var t=!1;r.forEach(function(i){var r=Ye(i.language);Xe(e,s,r)&&(t?o.push(i):(o=[i],t=!0),n&&(n.text=!0))})})}return i&&(e=ht(o,i),e.length)?e:(e=o.map(function(e){return e.roles}).reduce(k,[]),e.length?ht(o,e[0]):o)}function lt(e,t){return e.filter(function(e){return e.audio&&0<=e.audio.roles.indexOf(t)||e.video&&0<=e.video.roles.indexOf(t)})}function ht(e,t){return e.filter(function(e){return 0<=e.roles.indexOf(t)})}function ut(e,t,i){for(var n=0;n<i.length;n++)if(i[n].audio==e&&i[n].video==t)return i[n];return null}function ct(e,t,i){function n(e,t){return null==e?null==t:t.id==e}for(var r=0;r<i.length;r++)if(n(e,i[r].audio)&&n(t,i[r].video))return i[r];return null}function dt(e,t){for(var i=e.periods.length-1;0<i;--i)if(t+rs>=e.periods[i].startTime)return i;return 0}function pt(e,t){for(var i=0;i<e.periods.length;++i){var n=e.periods[i];if("text"==t.type){for(var r=0;r<n.textStreams.length;++r)if(n.textStreams[r]==t)return i}else for(r=0;r<n.variants.length;++r){var o=n.variants[r];if(o.audio==t||o.video==t||o.video&&o.video.trickModeVideo==t)return i}}return-1}function ft(){this.h=null,this.c=!1,this.b=new a,this.g=[],this.i=!1,this.a=this.f=null}function gt(e,t){return t.filter(function(t){return Je(t,e,{width:1/0,height:1/0})}).sort(function(e,t){return e.bandwidth-t.bandwidth})}function vt(e){return JSON.stringify(e,function(e,t){if("manager"!=e&&"function"!=typeof t){if(t instanceof Event||t instanceof H){var i,n={};for(i in t){var r=t[i];r&&"object"==typeof r?"detail"==i&&(n[i]=r):i in Event||(n[i]=r)}return n}if(t instanceof TimeRanges)for(n={__type__:"TimeRanges",length:t.length,start:[],end:[]},i=0;i<t.length;++i)n.start.push(t.start(i)),n.end.push(t.end(i));else n="number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return n}})}function mt(e){return JSON.parse(e,function(e,t){return"NaN"==t?NaN:"-Infinity"==t?-1/0:"Infinity"==t?1/0:t&&"object"==typeof t&&"TimeRanges"==t.__type__?yt(t):t})}function yt(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}function bt(e,t,i,n,r,o){this.J=e,this.g=t,this.L=i,this.j=!1,this.C=n,this.D=r,this.w=o,this.b=this.h=!1,this.B="",this.i=null,this.l=this.mc.bind(this),this.m=this.Cd.bind(this),this.a={video:{},player:{}},this.s=0,this.c={},this.f=null}function Ct(e){var t=Es;t.removeUpdateListener(e.l),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.m)}function Tt(e){for(var t in e.c){var i=e.c[t];delete e.c[t],i.reject(new h(1,7,7e3))}}function Et(e){e=vt(e),Es.sendMessage("urn:x-cast:com.google.shaka.v2",e,function(){},l)}function wt(){this.vb=new U,this.bb=this}function Pt(e,t,i){wt.call(this),this.c=e,this.b=t,this.i=this.g=this.f=this.j=this.h=null,this.a=new bt(i,this.ve.bind(this),this.we.bind(this),this.xe.bind(this),this.ye.bind(this),this.fc.bind(this)),St(this)}function St(e){e.a.init(),e.i=new F,us.forEach(function(e){V(this.i,this.c,e,this.Me.bind(this))}.bind(e)),fs.forEach(function(e){V(this.i,this.b,e,this.Yd.bind(this))}.bind(e)),e.h={};for(var t in e.c)Object.defineProperty(e.h,t,{configurable:!1,enumerable:!0,get:e.Le.bind(e,t),set:e.Ne.bind(e,t)});e.j={};for(t in e.b)Object.defineProperty(e.j,t,{configurable:!1,enumerable:!0,get:e.Xd.bind(e,t)});e.f=new wt,e.f.bb=e.h,e.g=new wt,e.g.bb=e.j}function _t(e,t,i,n){wt.call(this),this.a=e,this.b=t,this.j={video:e,player:t},this.l=i||function(){},this.m=n||function(e){return e},this.i=!1,this.f=!0,this.h=this.g=this.c=null,It(this)}function It(t){var i=cast.receiver.CastReceiverManager.getInstance();i.onSenderConnected=t.tc.bind(t),i.onSenderDisconnected=t.tc.bind(t),i.onSystemVolumeChanged=t.Xc.bind(t),t.g=i.getCastMessageBus("urn:x-cast:com.google.cast.media"),t.g.onMessage=t.xd.bind(t),t.c=i.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),t.c.onMessage=t.Ld.bind(t),i.start(),us.forEach(function(e){this.a.addEventListener(e,this.wc.bind(this,"video"))}.bind(t)),fs.forEach(function(e){this.b.addEventListener(e,this.wc.bind(this,"player"))}.bind(t)),cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?t.b.Sb(3840,2160):t.b.Sb(1920,1080),t.b.addEventListener("loading",function(){this.f=!1,kt(this)}.bind(t)),t.a.addEventListener("playing",function(){this.f=!1,kt(this)}.bind(t)),t.a.addEventListener("pause",function(){kt(this)}.bind(t)),t.b.addEventListener("unloading",function(){this.f=!0,kt(this)}.bind(t)),t.a.addEventListener("ended",function(){e.setTimeout(function(){this.a&&this.a.ended&&(this.f=!0,kt(this))}.bind(this),5e3)}.bind(t))}function kt(e){Promise.resolve().then(function(){this.dispatchEvent(new H("caststatuschanged")),Nt(this,0)}.bind(e))}function At(e,t,i){for(var n in t.player)e.b[n](t.player[n]);e.l(i),i=Promise.resolve();var r=e.a.autoplay;t.manifest&&(e.a.autoplay=!1,i=e.b.load(t.manifest,t.startTime),i.catch(function(e){this.b.dispatchEvent(new H("error",{detail:e}))}.bind(e))),i.then(function(){var e;for(e in t.video){var i=t.video[e];this.a[e]=i}for(e in t.playerAfterLoad)i=t.playerAfterLoad[e],this.b[e](i);this.a.autoplay=r,t.manifest&&(this.a.play(),Nt(this,0))}.bind(e))}function Lt(e,t,i,n){e.i&&(e=vt(t),n?i.getCastChannel(n).send(e):i.broadcast(e))}function Nt(e,t,i){var n=ws,n={mediaSessionId:0,playbackRate:e.a.playbackRate,playerState:e.f?n.IDLE:e.b.Oa?n.Lc:e.a.paused?n.Mc:n.Nc,currentTime:e.a.currentTime,supportedMediaCommands:15,volume:{level:e.a.volume,muted:e.a.muted}};i&&(n.media=i),Lt(e,{requestId:t,type:"MEDIA_STATUS",status:[n]},e.g)}function xt(e,t){var i=Bt(e,t);return 1!=i.length?null:i[0]}function Bt(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return e.tagName==t})}function Mt(e){var t=e.firstChild;return t&&t.nodeType==Node.TEXT_NODE?e.textContent.trim():null}function Rt(e,t,i,n){var r=null;return e=e.getAttribute(t),null!=e&&(r=i(e)),null==r?void 0!=n?n:null:r}function Dt(e){return e?(/^\d+\-\d+\-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null}function Ot(e){return e&&(e=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null}function Ut(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function Ft(e){return e=Number(e),e%1?null:e}function Vt(e){return e=Number(e),!(e%1)&&0<e?e:null}function jt(e){return e=Number(e),!(e%1)&&0<=e?e:null}function $t(e){var t;return e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1]/t[2]):Number(e),isNaN(e)?null:e}function Gt(e,t,i){e=Kt(e);var n=null,r=[],o=[],a=e.map(function(e){return e.keyId}).filter(L);if(a.length&&1<a.filter(N).length)throw new h(2,4,4010);i||(o=e.filter(function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.Dc||(n=e.init||n,!1)}),o.length&&(r=qt(n,t,o),r.length||(r=[K("",n)]))),!e.length||!i&&o.length||(r=W(Ps).map(function(e){return K(e,n)}));var s=a[0]||null;return s&&r.forEach(function(e){e.initData.forEach(function(e){e.keyId=s})}),{ac:s,Se:n,drmInfos:r,dc:!0}}function Ht(e,t,i,n){var r=Gt(e,t,n);if(i.dc)e=1==i.drmInfos.length&&!i.drmInfos[0].keySystem,t=!r.drmInfos.length,(!i.drmInfos.length||e&&!t)&&(i.drmInfos=r.drmInfos),i.dc=!1;else if(0<r.drmInfos.length&&(i.drmInfos=i.drmInfos.filter(function(e){return r.drmInfos.some(function(t){return t.keySystem==e.keySystem})}),!i.drmInfos.length))throw new h(2,4,4008);return r.ac||i.ac}function qt(e,t,i){return i.map(function(i){var n=Ps[i.Dc];return n?[K(n,i.init||e)]:t(i.node)||[]}).reduce(k,[])}function Kt(e){return e.map(function(e){var t=e.getAttribute("schemeIdUri"),i=e.getAttribute("cenc:default_KID"),n=Bt(e,"cenc:pssh").map(Mt);if(!t)return null;if(t=t.toLowerCase(),i&&(i=i.replace(/-/g,"").toLowerCase(),0<=i.indexOf(" ")))throw new h(2,4,4009);var r=[];try{r=n.map(function(e){return{initDataType:"cenc",initData:le(e),keyId:null}})}catch(e){throw new h(2,4,4007)}return{node:e,Dc:t,keyId:i,init:0<r.length?r:null}}).filter(L)}function zt(t,i,n,r,o){null!=o&&(o=Math.round(o));var a={RepresentationID:i,Number:n,Bandwidth:r,Time:o};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(t,i,n){if("$$"==t)return"$";var r=a[i];return null==r?t:("RepresentationID"==i&&n&&(n=void 0),t=r.toString(),n=e.parseInt(n,10)||1,Array(Math.max(0,n-t.length)+1).join("0")+t)})}function Wt(e,t){var i=Xt(e,t,"timescale"),n=1;i&&(n=Vt(i)||1),i=Xt(e,t,"duration"),(i=Vt(i||""))&&(i/=n);var r=Xt(e,t,"startNumber"),o=Number(Xt(e,t,"presentationTimeOffset"))||0,a=jt(r||"");null!=r&&null!=a||(a=1);var s=Yt(e,t,"SegmentTimeline"),r=null;if(s){for(var r=n,l=e.S.duration||1/0,s=Bt(s,"S"),h=[],u=0,c=0;c<s.length;++c){var d=s[c],p=Rt(d,"t",jt),f=Rt(d,"d",jt),d=Rt(d,"r",Ft);if(null!=p&&(p-=o),!f)break;if(p=null!=p?p:u,0>(d=d||0))if(c+1<s.length){if(null==(d=Rt(s[c+1],"t",jt)))break;if(p>=d)break;d=Math.ceil((d-p)/f)-1}else{if(1/0==l)break;if(p/r>=l)break;d=Math.ceil((l*r-p)/f)-1}0<h.length&&p!=u&&(h[h.length-1].end=p/r);for(var g=0;g<=d;++g)u=p+f,h.push({start:p/r,end:u/r,Je:p}),p=u}r=h}return{timescale:n,P:i,ya:a,Z:o/n||0,Xb:o,H:r}}function Xt(e,t,i){return[t(e.A),t(e.V),t(e.Y)].filter(L).map(function(e){return e.getAttribute(i)}).reduce(function(e,t){return e||t})}function Yt(e,t,i){return[t(e.A),t(e.V),t(e.Y)].filter(L).map(function(e){return xt(e,i)}).reduce(function(e,t){return e||t})}function Jt(e,t){var i=new DOMParser;try{var n=Z(e),r=i.parseFromString(n,"text/xml")}catch(e){}if(r&&r.documentElement.tagName==t)var o=r.documentElement;return o&&0<o.getElementsByTagName("parsererror").length?null:o}function Qt(e,t,i,n,r,o){for(var a=e.getAttribute("xlink:href"),s=e.getAttribute("xlink:actuate")||"onRequest",l=0;l<e.attributes.length;l++){var u=e.attributes[l].nodeName;-1!=u.indexOf("xlink:")&&(e.removeAttribute(u),--l)}if(5<=o)return Promise.reject(new h(2,4,4028));if("onLoad"!=s)return Promise.reject(new h(2,4,4027));var c=q([n],[a]);return r.request(0,B(c,t)).then(function(n){if(!(n=Jt(n.data,e.tagName)))return Promise.reject(new h(2,4,4001,a));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;n.childNodes.length;){var s=n.childNodes[0];n.removeChild(s),e.appendChild(s)}for(s=0;s<n.attributes.length;s++){var l=n.attributes[s].nodeName,u=n.getAttribute(l);e.setAttribute(l,u)}return Zt(e,t,i,c[0],r,o+1)}.bind(e))}function Zt(e,t,i,n,r,o){if(o=o||0,e.getAttribute("xlink:href")){var a=Qt(e,t,i,n,r,o);return i&&(a=a.catch(function(){return Zt(e,t,i,n,r,o)})),a}for(a=0;a<e.childNodes.length;a++){var s=e.childNodes[a];s instanceof Element&&"urn:mpeg:dash:resolve-to-zero:2013"==s.getAttribute("xlink:href")&&(e.removeChild(s),--a)}for(var l=[],a=0;a<e.childNodes.length;a++)s=e.childNodes[a],s.nodeType==Node.ELEMENT_NODE&&(s=Zt(s,t,i,n,r,o),l.push(s));return Promise.all(l).then(function(){return e})}function ei(e,t,i){this.a=e,this.T=t,this.K=i}function ti(e,t,i,n,r,o){this.position=e,this.startTime=t,this.endTime=i,this.a=n,this.T=r,this.K=o}function ii(e,t){this.O=e,this.a=t==Ss,this.v=0}function ni(){throw new h(2,3,3e3)}function ri(e,t,i){var n=new Uint8Array(i-t);return n.set(new Uint8Array(e.O.buffer,t,i-t)),n.buffer}function oi(){this.b=[],this.a=[]}function ai(e){for(;e.u.da();)e.Ta.qb(e.start,e.u)}function si(e){for(var t=e.u.F();0<t;--t)e.Ta.qb(e.start,e.u)}function li(e){return function(t){e(t.u.Ja(t.u.O.byteLength-t.u.v))}}function hi(e){for(var t=0,i=0;i<e.length;i++)t=t<<8|e.charCodeAt(i);return t}function ui(e,t,i,n){var r,o=(new oi).ca("sidx",function(e){r=ci(t,n,i,e)});if(e&&o.parse(e),r)return r;throw new h(2,3,3004)}function ci(e,t,i,n){var r=[];n.u.I(4);var o=n.u.F();if(!o)throw new h(2,3,3005);if(n.version)var a=n.u.Va(),s=n.u.Va();else a=n.u.F(),s=n.u.F();n.u.I(2);var l=n.u.yc();for(e=e+n.size+s,s=0;s<l;s++){var u=n.u.F(),c=(2147483648&u)>>>31,u=2147483647&u,d=n.u.F();if(n.u.I(4),1==c)throw new h(2,3,3006);r.push(new ti(r.length,a/o-t,(a+d)/o-t,function(){return i},e,e+u-1)),a+=d,e+=u}return r}function di(e){this.a=e}function pi(e,t){for(var i;e.a.length&&(i=e.a[e.a.length-1],i.startTime>=t);)e.a.pop();for(;e.a.length&&(i=e.a[0],0>=i.endTime);)e.a.shift();e.a.length&&(i=e.a[0],i.startTime<rs&&(e.a[0]=new ti(i.position,0,i.endTime,i.a,i.T,i.K)),i=e.a[e.a.length-1],e.a[e.a.length-1]=new ti(i.position,i.startTime,t,i.a,i.T,i.K))}function fi(e){this.b=e,this.a=new ii(e,0),_s||(_s=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}function gi(e){var t=vi(e);if(7<t.length)throw new h(2,3,3002);for(var i=0,n=0;n<t.length;n++)i=256*i+t[n];t=i,i=vi(e);e:{for(n=0;n<_s.length;n++)if(ce(i,_s[n])){n=!0;break e}n=!1}if(n)i=e.b.byteLength-e.a.v;else{if(8==i.length&&224&i[1])throw new h(2,3,3001);for(var n=i[0]&(1<<8-i.length)-1,r=1;r<i.length;r++)n=256*n+i[r];i=n}return i=e.a.v+i<=e.b.byteLength?i:e.b.byteLength-e.a.v,n=new DataView(e.b.buffer,e.b.byteOffset+e.a.v,i),e.a.I(i),new mi(t,n)}function vi(e){var t,i=e.a.Mb();for(t=1;8>=t&&!(i&1<<8-t);t++);if(8<t)throw new h(2,3,3002);var n=new Uint8Array(t);for(n[0]=i,i=1;i<t;i++)n[i]=e.a.Mb();return n}function mi(e,t){this.id=e,this.a=t}function yi(e){if(8<e.a.byteLength)throw new h(2,3,3002);if(8==e.a.byteLength&&224&e.a.getUint8(0))throw new h(2,3,3001);for(var t=0,i=0;i<e.a.byteLength;i++)var n=e.a.getUint8(i),t=256*t+n;return t}function bi(){}function Ci(e,t,i,n,r,o){function a(){return r}var s=[];e=new fi(e.a);for(var l=null,h=null;e.da();){var u=gi(e);if(187==u.id){var c=Ti(u);c&&(u=i*c.Ke,c=t+c.ce,null!=l&&s.push(new ti(s.length,l-o,u-o,a,h,c-1)),l=u,h=c)}}return null!=l&&s.push(new ti(s.length,l-o,n-o,a,h,null)),s}function Ti(e){var t=new fi(e.a);if(e=gi(t),179!=e.id)throw new h(2,3,3013);if(e=yi(e),t=gi(t),183!=t.id)throw new h(2,3,3012);for(var t=new fi(t.a),i=0;t.da();){var n=gi(t);if(241==n.id){i=yi(n);break}}return{Ke:e,ce:i}}function Ei(e,t){var i=Yt(e,t,"Initialization");if(!i)return null;var n=e.A.$,r=i.getAttribute("sourceURL");r&&(n=q(e.A.$,[r]));var r=0,o=null;return(i=Rt(i,"range",Ut))&&(r=i.start,o=i.end),new ei(function(){return n},r,o)}function wi(e,t){var i=Number(Xt(e,Si,"presentationTimeOffset"))||0,n=Xt(e,Si,"timescale"),r=1;n&&(r=Vt(n)||1);var i=i/r||0,n=Ei(e,Si),o=e.A.contentType,r=e.A.mimeType.split("/")[1];if("text"!=o&&"mp4"!=r&&"webm"!=r)throw new h(2,4,4006);if("webm"==r&&!n)throw new h(2,4,4005);var o=Yt(e,Si,"RepresentationIndex"),a=Xt(e,Si,"indexRange"),s=e.A.$,a=Ut(a||"");if(o){var l=o.getAttribute("sourceURL");l&&(s=q(e.A.$,[l])),a=Rt(o,"range",Ut,a)}if(!a)throw new h(2,4,4002);return r=Pi(e,t,n,s,a.start,a.end,r,i),{createSegmentIndex:r.createSegmentIndex,findSegmentPosition:r.findSegmentPosition,getSegmentReference:r.getSegmentReference,initSegmentReference:n,Z:i}}function Pi(e,t,i,n,r,o,a,s){var l=e.presentationTimeline,h=!e.Ca||!e.S.Ab,u=e.S.duration,c=t,d=null;return{createSegmentIndex:function(){var e=[c(n,r,o),"webm"==a?c(i.a(),i.T,i.K):null];return c=null,Promise.all(e).then(function(e){var t=e[0];e=e[1]||null,t="mp4"==a?ui(t,r,n,s):(new bi).parse(t,e,n,s),l.Ga(0,t),d=new di(t),h&&pi(d,u)})},findSegmentPosition:function(e){return d.find(e)},getSegmentReference:function(e){return d.get(e)}}}function Si(e){return e.Wa}function _i(e,t){var i=Ei(e,Ii),n=Ai(e),r=Wt(e,Ii),o=r.ya;o||(o=1);var a=0;if(r.P?a=r.P*(o-1):r.H&&0<r.H.length&&(a=r.H[0].start),n={P:r.P,startTime:a,ya:o,Z:r.Z,H:r.H,Fa:n},!n.P&&!n.H&&1<n.Fa.length)throw new h(2,4,4002);if(!n.P&&!e.S.duration&&!n.H&&1==n.Fa.length)throw new h(2,4,4002);if(n.H&&!n.H.length)throw new h(2,4,4002);return o=r=null,e.Y.id&&e.A.id&&(o=e.Y.id+","+e.A.id,r=t[o]),a=ki(e.S.duration,n.ya,e.A.$,n),r?(r.ob(a),r.xb(e.presentationTimeline.ka()-e.S.start)):(e.presentationTimeline.Ga(0,a),r=new di(a),o&&e.Ca&&(t[o]=r)),e.Ca&&e.S.Ab||pi(r,e.S.duration),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:r.find.bind(r),getSegmentReference:r.get.bind(r),initSegmentReference:i,Z:n.Z}}function Ii(e){return e.pa}function ki(e,t,i,n){var r=n.Fa.length;n.H&&n.H.length!=n.Fa.length&&(r=Math.min(n.H.length,n.Fa.length));for(var o=[],a=n.startTime,s=0;s<r;s++){var l=n.Fa[s],h=q(i,[l.sd]),u=null!=n.P?a+n.P:n.H?n.H[s].end:a+e;o.push(new ti(s+t,a,u,function(e){return e}.bind(null,h),l.start,l.end)),a=u}return o}function Ai(e){return[e.A.pa,e.V.pa,e.Y.pa].filter(L).map(function(e){return Bt(e,"SegmentURL")}).reduce(function(e,t){return 0<e.length?e:t}).map(function(t){t.getAttribute("indexRange")&&!e.ic&&(e.ic=!0);var i=t.getAttribute("media");return t=Rt(t,"mediaRange",Ut,{start:0,end:null}),{sd:i,start:t.start,end:t.end}})}function Li(e,t,i,n){var r=Mi(e),o=Wt(e,Ni),a=Xt(e,Ni,"media"),s=Xt(e,Ni,"index");if(o={P:o.P,timescale:o.timescale,ya:o.ya,Z:o.Z,Xb:o.Xb,H:o.H,Db:a,Ra:s},a=0+(o.Ra?1:0),a+=o.H?1:0,!(a+=o.P?1:0))throw new h(2,4,4002);if(1!=a&&(o.Ra&&(o.H=null),o.P=null),!o.Ra&&!o.Db)throw new h(2,4,4002);if(o.Ra){if("mp4"!=(i=e.A.mimeType.split("/")[1])&&"webm"!=i)throw new h(2,4,4006);if("webm"==i&&!r)throw new h(2,4,4005);n=zt(o.Ra,e.A.id,null,e.bandwidth||null,null),n=q(e.A.$,[n]),e=Pi(e,t,r,n,0,null,i,o.Z)}else o.P?(n||e.presentationTimeline.Eb(o.P),e=xi(e,o)):(n=t=null,e.Y.id&&e.A.id&&(n=e.Y.id+","+e.A.id,t=i[n]),a=Bi(e,o),t?(t.ob(a),t.xb(e.presentationTimeline.ka()-e.S.start)):(e.presentationTimeline.Ga(0,a),t=new di(a),n&&e.Ca&&(i[n]=t)),e.Ca&&e.S.Ab||pi(t,e.S.duration),e={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:t.find.bind(t),getSegmentReference:t.get.bind(t)});return{createSegmentIndex:e.createSegmentIndex,findSegmentPosition:e.findSegmentPosition,getSegmentReference:e.getSegmentReference,initSegmentReference:r,Z:o.Z}}function Ni(e){return e.Xa}function xi(e,t){var i=e.S.duration,n=t.P,r=t.ya,o=t.timescale,a=t.Db,s=e.bandwidth||null,l=e.A.id,h=e.A.$;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0>e||i&&e>=i?null:Math.floor(e/n)},getSegmentReference:function(e){var t=e*n;return 0>t||i&&t>=i?null:new ti(e,t,t+n,function(){var i=zt(a,l,e+r,s,t*o);return q(h,[i])},0,null)}}}function Bi(e,t){for(var i=[],n=0;n<t.H.length;n++){var r=n+t.ya;i.push(new ti(r,t.H[n].start,t.H[n].end,function(e,t,i,n,r,o){return e=zt(e,t,r,i,o),q(n,[e]).map(function(e){return e.toString()})}.bind(null,t.Db,e.A.id,e.bandwidth||null,e.A.$,r,t.H[n].Je+t.Xb),0,null))}return i}function Mi(e){var t=Xt(e,Ni,"initialization");if(!t)return null;var i=e.A.id,n=e.bandwidth||null,r=e.A.$;return new ei(function(){var e=zt(t,i,null,n,null);return q(r,[e])},0,null)}function Ri(){var e,t={};for(e in Is)t[e]=!0;for(e in ks)t[e]=!0;return["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"].forEach(function(e){t[e]=!!Is[e]}),["mpd","m3u8","ism"].forEach(function(e){t[e]=!!ks[e]}),t}function Di(e,t,i,n){var r=n;return r||(n=new u(e).ba.split("/").pop().split("."),1<n.length&&(n=n.pop().toLowerCase(),r=ks[n])),r?Promise.resolve(r):(i=B([e],i),i.method="HEAD",t.request(0,i).then(function(t){return(t=t.headers["content-type"])&&(t=t.toLowerCase()),(r=Is[t])?r:Promise.reject(new h(2,4,4e3,e))},function(e){return e.severity=2,Promise.reject(e)}))}function Oi(e,t){this.c=e,this.j=t,this.f=this.a=1/0,this.b=1,this.i=0,this.h=!0,this.g=0}function Ui(){this.a=this.b=null,this.g=[],this.c=null,this.i=[],this.h=1,this.j={},this.l=0,this.f=null}function Fi(e){return e.a.networkingEngine.request(0,B(e.g,e.b.retryParameters),function(){return!this.a}.bind(e)).then(function(e){if(this.a)return Vi(this,e.data,e.uri)}.bind(e))}function Vi(e,t,i){if(!(t=Jt(t,"MPD")))throw new h(2,4,4001,i);return Zt(t,e.b.retryParameters,e.b.dash.xlinkFailGracefully,i,e.a.networkingEngine).then(function(e){return ji(this,e,i)}.bind(e))}function ji(e,t,i){i=[i];var n=Bt(t,"Location").map(Mt).filter(L);0<n.length&&(i=e.g=n),n=Bt(t,"BaseURL").map(Mt),i=q(i,n);var r=Rt(t,"minBufferTime",Ot);e.l=Rt(t,"minimumUpdatePeriod",Ot,-1);var o=Rt(t,"availabilityStartTime",Dt),n=Rt(t,"timeShiftBufferDepth",Ot),a=Rt(t,"suggestedPresentationDelay",Ot),s=Rt(t,"maxSegmentDuration",Ot),l=t.getAttribute("type")||"static";if(e.c)var h=e.c.presentationTimeline;else{var u=Math.max(10,1.5*r);h=new Oi(o,null!=a?a:u)}var o=$i(e,{Ca:"static"!=l,presentationTimeline:h,Y:null,S:null,V:null,A:null,bandwidth:0,ic:!1},i,t),a=o.duration,c=o.periods;return h.rb("static"==l),"static"!=l&&o.bc||h.ga(a||1/0),h.Ic(null!=n?n:1/0),h.Eb(s||1),e.c?Promise.resolve():(t=Bt(t,"UTCTiming"),Ji(e,i,t,h.R()).then(function(e){this.a&&(h.Gc(e),this.c={presentationTimeline:h,periods:c,offlineSessionIds:[],minBufferTime:r||0})}.bind(e)))}function $i(e,t,i,n){var r=Rt(n,"mediaPresentationDuration",Ot),o=[],a=0;n=Bt(n,"Period");for(var s=0;s<n.length;s++){var l=n[s],a=Rt(l,"start",Ot,a),h=Rt(l,"duration",Ot),u=null;if(s!=n.length-1){var c=Rt(n[s+1],"start",Ot);null!=c&&(u=c-a)}else null!=r&&(u=r-a);if(null==u&&(u=h),l=Gi(e,t,i,{start:a,duration:u,node:l,Ab:null==u||s==n.length-1}),o.push(l),h=t.Y.id,-1==e.i.indexOf(h)&&(e.i.push(h),e.c&&(e.a.filterNewPeriod(l),e.c.periods.push(l))),null==u){a=null;break}a+=u}return e.c||e.a.filterAllPeriods(o),null!=r?{periods:o,duration:r,bc:!1}:{periods:o,duration:a,bc:!0}}function Gi(e,t,i,n){t.Y=zi(n.node,null,i),t.S=n,t.Y.id||(t.Y.id="__shaka_period_"+n.start),Bt(n.node,"EventStream").forEach(e.Vd.bind(e,n.start,n.duration)),i=Bt(n.node,"AdaptationSet").map(e.Td.bind(e,t)).filter(L);var r=i.map(function(e){return e.ee}).reduce(k,[]),o=r.filter(N);if(t.Ca&&r.length!=o.length)throw new h(2,4,4018);var a=i.filter(function(e){return!e.Wb});if(i.filter(function(e){return e.Wb}).forEach(function(e){var t=e.streams[0],i=e.Wb;a.forEach(function(e){e.id==i&&e.streams.forEach(function(e){e.trickModeVideo=t})})}),r=Hi(a,"video"),o=Hi(a,"audio"),!r.length&&!o.length)throw new h(2,4,4004);for(o.length||(o=[null]),r.length||(r=[null]),t=[],i=0;i<o.length;i++)for(var s=0;s<r.length;s++)qi(e,o[i],r[s],t);for(e=Hi(a,"text"),r=[],i=0;i<e.length;i++)r.push.apply(r,e[i].streams);return{startTime:n.start,textStreams:r,variants:t}}function Hi(e,t){return e.filter(function(e){return e.contentType==t})}function qi(e,t,i,n){if(t||i)if(t&&i){var r=t.drmInfos,o=i.drmInfos;if(r.length&&o.length?0<Ae(r,o).length:1)for(var a=Ae(t.drmInfos,i.drmInfos),r=0;r<t.streams.length;r++)for(var s=0;s<i.streams.length;s++)o=(i.streams[s].bandwidth||0)+(t.streams[r].bandwidth||0),o={id:e.h++,language:t.language,primary:t.Cb||i.Cb,audio:t.streams[r],video:i.streams[s],bandwidth:o,drmInfos:a,allowedByApplication:!0,allowedByKeySystem:!0},n.push(o)}else for(a=t||i,r=0;r<a.streams.length;r++)o=a.streams[r].bandwidth||0,o={id:e.h++,language:a.language||"und",primary:a.Cb,audio:t?a.streams[r]:null,video:i?a.streams[r]:null,bandwidth:o,drmInfos:a.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},n.push(o)}function Ki(t,i){0>t.l||(t.f=e.setTimeout(t.ze.bind(t),1e3*Math.max(Math.max(3,t.l)-i,0)))}function zi(e,t,i){t=t||{contentType:"",mimeType:"",codecs:"",containsEmsgBoxes:!1,frameRate:void 0,Fb:null},i=i||t.$;var n=Bt(e,"BaseURL").map(Mt),r=e.getAttribute("contentType")||t.contentType,o=e.getAttribute("mimeType")||t.mimeType,a=e.getAttribute("codecs")||t.codecs,s=Rt(e,"frameRate",$t)||t.frameRate,l=!!Bt(e,"InbandEventStream").length,h=Bt(e,"AudioChannelConfiguration"),h=Wi(h)||t.Fb;return r||(r=Qi(o,a)),{$:q(i,n),Wa:xt(e,"SegmentBase")||t.Wa,pa:xt(e,"SegmentList")||t.pa,Xa:xt(e,"SegmentTemplate")||t.Xa,width:Rt(e,"width",jt)||t.width,height:Rt(e,"height",jt)||t.height,contentType:r,mimeType:o,codecs:a,frameRate:s,containsEmsgBoxes:l||t.containsEmsgBoxes,id:e.getAttribute("id"),Fb:h}}function Wi(e){for(var t=0;t<e.length;++t){var i=e[t],n=i.getAttribute("schemeIdUri");if(n&&(i=i.getAttribute("value")))switch(n){case"urn:mpeg:dash:outputChannelPositionList:2012":return i.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(n=parseInt(i,10)))continue;return n;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(n=parseInt(i,16)){for(e=0;n;)1&n&&++e,n>>=1;return e}}}return null}function Xi(e){var t=0+(e.Wa?1:0);return t+=e.pa?1:0,(t+=e.Xa?1:0)?(1!=t&&(e.Wa&&(e.pa=null),e.Xa=null),!0):"text"==e.contentType||"application"==e.contentType}function Yi(e,t,i,n){return t=q(t,[i]),t=B(t,e.b.retryParameters),t.method=n,e.a.networkingEngine.request(0,t).then(function(e){if("HEAD"==n){if(!e.headers||!e.headers.date)return 0;e=e.headers.date}else e=Z(e.data);return e=Date.parse(e),isNaN(e)?0:e-Date.now()})}function Ji(e,t,i,n){i=i.map(function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}});var r=e.b.dash.clockSyncUri;return n&&!i.length&&r&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),I(i,function(e){var i=e.value;switch(e.scheme){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return Yi(this,t,i,"HEAD");case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return Yi(this,t,i,"GET");case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return e=Date.parse(i),isNaN(e)?0:e-Date.now();case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:return Promise.reject()}}.bind(e)).catch(function(){return 0})}function Qi(e,t){return as[Q(e,t)]?"text":e.split("/")[0]}function Zi(e,t,i,n){this.uri=e,this.type=t,this.U=i,this.segments=n||null}function en(e,t,i,n){this.id=e,this.name=t,this.a=i,this.value=n||null}function tn(e,t){this.name=e,this.value=t}function nn(e,t,i){return i=i||null,(e=e.getAttribute(t))?e.value:i}function rn(e,t){this.U=t,this.uri=e}function on(e,t){return e.filter(function(e){return e.name==t})}function an(e,t){var i=on(e,t);return i.length?i[0]:null}function sn(e,t,i){return e.filter(function(e){var n=e.getAttribute("TYPE");return e=e.getAttribute("GROUP-ID"),n.value==t&&e.value==i})}function ln(e){this.b=e,this.a=0}function hn(e,t){t.lastIndex=e.a;var i=(i=t.exec(e.b))?{position:i.index,length:i[0].length,he:i}:null;return e.a!=e.b.length&&i&&i.position==e.a?(e.a+=i.length,i.he):null}function un(e){return e.a==e.b.length?null:(e=hn(e,/[^ \t\n]*/gm))?e[0]:null}function cn(){this.a=0}function dn(e,t,i){t=Z(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new h(2,4,4015);t=0;for(var r=[],o=1;o<n.length;)if(/^#(?!EXT)/m.test(n[o]))o+=1;else{var a=n[o];if(a=fn(e.a++,a),0<=As.indexOf(a.name))t=1;else if(0<=Ls.indexOf(a.name)){if(1!=t)throw new h(2,4,4017);return n=n.splice(o,n.length-o),e=pn(e,n,r),new Zi(i,t,r,e)}r.push(a),o+=1,"EXT-X-STREAM-INF"==a.name&&(a.a.push(new tn("URI",n[o])),o+=1)}return new Zi(i,t,r)}function pn(e,t,i){var n=[],r=[];return t.forEach(function(e){/^(#EXT)/.test(e)?(e=fn(this.a++,e),0<=As.indexOf(e.name)?i.push(e):r.push(e)):/^#(?!EXT)/m.test(e)||(n.push(new rn(e.trim(),r)),r=[])}.bind(e)),n}function fn(e,t){var i=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!i)throw new h(2,4,4016);var n=i[1],r=i[2],i=[];if(r&&0<=r.indexOf("="))for(var o,r=new ln(r),a=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;o=hn(r,a);)i.push(new tn(o[1],o[2]||o[3]));else if(r)return new en(e,n,i,r);return new en(e,n,i)}function gn(e){return new Promise(function(t){var i=gn.parse(e);t({uri:e,data:i.data,headers:{"content-type":i.contentType}})})}function vn(){this.h=this.b=null,this.D=1,this.g={},this.C={},this.j={},this.s={},this.a=null,this.m="",this.w=new cn,this.i=this.c=null,this.f=!1,this.B=null,this.l=0}function mn(e,t,i){Fn(e,i).then(function(e){if(e=dn(this.w,e.data,e.uri),1!=e.type)throw new h(2,4,4017);for(var i=an(e.U,"EXT-X-MEDIA-SEQUENCE"),i=Nn(this,e,i?Number(i.value):0),n=t.Bb,r=[],o=n.endTime,a=0;a<i.length;a++){var s=i[a];if(s.position>n.position){var l=s.endTime-s.startTime,u=o,c=o+l,o=o+l;r.push(new ti(s.position,u,c,s.a,s.T,s.K))}}i=r,t.je.ob(i),i.length&&(t.Bb=i[i.length-1]),an(e.U,"EXT-X-ENDLIST")&&(e=t.Bb.endTime,jn(this,!1),this.a.ga(e))}.bind(e))}function yn(e,t,i){if(t=dn(e.w,t,i),0!=t.type)throw new h(2,4,4022);return bn(e,t).then(function(e){this.b.filterAllPeriods([e]),this.f&&this.a.Hc(3*this.l),this.B={presentationTimeline:this.a,periods:[e],offlineSessionIds:[],minBufferTime:0}}.bind(e))}function bn(e,t){var i=t.U,n=on(t.U,"EXT-X-MEDIA").filter(function(e){return"SUBTITLES"==On(e,"TYPE")}.bind(e)).map(function(e){return wn(this,e,t)}.bind(e));return Promise.all(n).then(function(e){var n=on(i,"EXT-X-STREAM-INF").map(function(e){return Cn(this,e,t)}.bind(this));return Promise.all(n).then(function(t){return t=t.reduce(k,[]),this.f||xn(this,t),{startTime:0,variants:t,textStreams:e}}.bind(this))}.bind(e))}function Cn(e,t,i){var n=nn(t,"CODECS","avc1.42E01E,mp4a.40.2").split(","),r=t.getAttribute("RESOLUTION"),o=null,a=null,s=nn(t,"FRAME-RATE"),l=Number(On(t,"BANDWIDTH"));if(r)var h=r.value.split("x"),o=h[0],a=h[1];var u=Dn(e,i);i=on(i.U,"EXT-X-MEDIA");var c=nn(t,"AUDIO"),d=nn(t,"VIDEO");if(c?i=sn(i,"AUDIO",c):d&&(i=sn(i,"VIDEO",d)),h=Bn("text",n)){var p=nn(t,"SUBTITLES");p&&(p=sn(i,"SUBTITLES",p),p.length&&(e.g[p[0].id].stream.codecs=h)),n.splice(n.indexOf(h),1)}i=i.map(function(e){return Pn(this,e,n,u)}.bind(e));var f=[],g=[];return Promise.all(i).then(function(e){if(c?f=e:d&&(g=e),f.length||g.length)if(f.length)if(On(t,"URI")==f[0].Pb){e="audio";var i=!0}else e="video";else e="audio";else i=!1,1==n.length?(e=Bn("video",n),e=r||s||e?"video":"audio"):(e="video",n=[n.join(",")]);return i?Promise.resolve():_n(this,t,n,e,u)}.bind(e)).then(function(e){return e&&("audio"==e.stream.type?f=[e]:g=[e]),Tn(this,f,g,l,o,a,s)}.bind(e))}function Tn(e,t,i,n,r,o,a){i.forEach(function(e){(e=e.stream)&&(e.width=Number(r)||void 0,e.height=Number(o)||void 0,e.frameRate=Number(a)||void 0)}.bind(e)),t.length||(t=[null]),i.length||(i=[null]);for(var s=[],l=0;l<t.length;l++)for(var h=0;h<i.length;h++){var u=t[l]?t[l].stream:null,c=i[h]?i[h].stream:null,d=t[l]?t[l].drmInfos:null,p=i[h]?i[h].drmInfos:null;if(u&&c){if(!(d.length&&p.length?0<Ae(d,p).length:1))continue;var f=Ae(d,p)}else u?f=d:c&&(f=p);d=(i[l]?i[l].Pb:"")+" - "+(t[l]?t[l].Pb:""),e.C[d]||(u=En(e,u,c,n,f),s.push(u),e.C[d]=u)}return s}function En(e,t,i,n,r){return{id:e.D++,language:t?t.language:"und",primary:!!t&&t.primary||!!i&&i.primary,audio:t,video:i,bandwidth:n,drmInfos:r,allowedByApplication:!0,allowedByKeySystem:!0}}function wn(e,t,i){return On(t,"TYPE"),i=Dn(e,i),Pn(e,t,[],i).then(function(e){return e.stream})}function Pn(e,t,i,n){if(e.g[t.id])return Promise.resolve().then(function(){return this.g[t.id]}.bind(e));var r=On(t,"TYPE").toLowerCase();"subtitles"==r&&(r="text");var o=Ye(nn(t,"LANGUAGE","und")),a=nn(t,"NAME"),s=t.getAttribute("DEFAULT"),l=t.getAttribute("AUTOSELECT"),h=nn(t,"CHANNELS"),h="audio"==r?Sn(h):null,u=On(t,"URI"),u=q([e.m],[u])[0];return In(e,u,i,r,n,o,!!s||!!l,a,h).then(function(e){return this.g[t.id]=e,this.s[u]=e}.bind(e))}function Sn(e){return e?(e=e.split("/")[0],parseInt(e,10)):null}function _n(e,t,i,n,r){var o=On(t,"URI"),o=q([e.m],[o])[0];return In(e,o,i,n,r,"und",!1,null,null).then(function(e){return this.s[o]=e}.bind(e))}function In(e,t,i,n,r,o,a,s,l){var u=t;return t=q([e.m],[t])[0],Fn(e,t).then(function(e){if(e=dn(this.w,e.data,e.uri),1!=e.type)throw new h(2,4,4017);var t=an(e.U,"EXT-X-MEDIA-SEQUENCE"),c=Nn(this,e,t?Number(t.value):0),d=new di(c);kn(this,e),this.a||An(this,c[c.length-1].endTime),r=Dn(this,e)||r;var p=null;if("text"!=n&&(p=Ln(e)),this.a.Ga(0,c),!this.f){var t=c[c.length-1].endTime-c[0].startTime,f=this.a.W();(1/0==f||f<t)&&this.a.ga(t)}var g=Mn(n,i),v=void 0;"text"==n&&(v="subtitle");var m=[];e.segments.forEach(function(e){e=on(e.U,"EXT-X-KEY"),m.push.apply(m,e)});var y=!1,b=[],C=null;if(m.forEach(function(e){if("NONE"!=On(e,"METHOD")){y=!0;var t=On(e,"KEYFORMAT");(e=(t=Bs[t])?t(e):null)&&(e.keyIds.length&&(C=e.keyIds[0]),b.push(e))}}),y&&!b.length)throw new h(2,4,4026);return Rn(this,n,g,c[0].a()[0]).then(function(e){return e={id:this.D++,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:d.find.bind(d),getSegmentReference:d.get.bind(d),initSegmentReference:p,presentationTimeOffset:r||0,mimeType:e,codecs:g,kind:v,encrypted:y,keyId:C,language:o,label:s||null,type:n,primary:a,trickModeVideo:null,containsEmsgBoxes:!1,frameRate:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:[],channelsCount:l},this.j[e.id]=d,{stream:e,je:d,drmInfos:b,Pb:u,Bb:c[c.length-1]}}.bind(this))}.bind(e))}function kn(e,t){var i=an(t.U,"EXT-X-PLAYLIST-TYPE");if(an(t.U,"EXT-X-ENDLIST")||i&&"VOD"==i.value)jn(e,!1);else{if(!i)throw new h(2,4,4029);i=Un(t.U,"EXT-X-TARGETDURATION"),i=Number(i.value),e.c?e.c>i&&(e.c=i):(jn(e,!0),e.c=i),e.l=Math.max(i,e.l)}}function An(e,t){var i=null,n=0;e.f&&(i=Date.now()/1e3-t,n=3*e.l),e.a=new Oi(i,n),e.a.rb(!e.f)}function Ln(e){var t=on(e.U,"EXT-X-MAP");if(!t.length)return null;if(1<t.length)throw new h(2,4,4020);var t=t[0],i=On(t,"URI"),n=q([e.uri],[i])[0];return e=0,i=null,(t=nn(t,"BYTERANGE"))&&(e=t.split("@"),t=Number(e[0]),e=Number(e[1]),i=e+t-1),new ei(function(){return[n]},e,i)}function Nn(e,t,i){var n=t.segments,r=[];return n.forEach(function(e){var o,a=e.U,s=q([t.uri],[e.uri])[0],l=Un(a,"EXTINF").value.split(","),l=Number(l[0]);o=(e=n.indexOf(e))?r[e-1].endTime:0;var l=o+l,h=0,u=null;(a=an(a,"EXT-X-BYTERANGE"))&&(a=a.value.split("@"),u=Number(a[0]),h=a[1]?Number(a[1]):r[e-1].K+1,u=h+u-1,e==n.length-1&&(u=null)),r.push(new ti(i+e,o,l,function(){return[s]},h,u))}.bind(e)),r}function xn(e,t){t.forEach(function(e){var t=this.a.W(),i=e.video;e=e.audio,i&&this.j[i.id]&&pi(this.j[i.id],t),e&&this.j[e.id]&&pi(this.j[e.id],t)}.bind(e))}function Bn(e,t){for(var i=Ns[e],n=0;n<i.length;n++)for(var r=0;r<t.length;r++)if(i[n].test(t[r].trim()))return t[r].trim();return"text"==e?"":null}function Mn(e,t){if(1==t.length)return t[0];var i=Bn(e,t);if(null!=i)return i;throw new h(2,4,4025,t)}function Rn(e,t,i,n){var r=n.split("."),o=r[r.length-1];return(r=xs[t][o])?Promise.resolve(r):"text"==t?i&&"vtt"!=i?Promise.resolve("application/mp4"):Promise.resolve("text/vtt"):(t=B([n],e.h.retryParameters),t.method="HEAD",e.b.networkingEngine.request(1,t).then(function(e){if(!(e=e.headers["content-type"]))throw new h(2,4,4021,o);return e.split(";")[0]}))}function Dn(e,t){var i=an(t.U,"EXT-X-START");return i?Number(On(i,"TIME-OFFSET")):e.h.hls.defaultTimeOffset}function On(e,t){var i=e.getAttribute(t);if(!i)throw new h(2,4,4023,t);return i.value}function Un(e,t){var i=an(e,t);if(!i)throw new h(2,4,4024,t);return i}function Fn(e,t){return e.b.networkingEngine.request(0,B([t],e.h.retryParameters),function(){return!this.b}.bind(e))}function Vn(t,i){null!=t.c&&null!=i&&(t.i=e.setTimeout(t.J.bind(t),1e3*i))}function jn(t,i){t.f=i,t.a&&t.a.rb(!i),i||null==t.i||(e.clearTimeout(t.i),t.i=null,t.c=null)}function $n(e,t,i,n,r,o){this.a=e,this.c=t,this.l=i,this.m=null==n?null:Hn(this,n),this.L=r,this.J=o,this.b=new F,this.j=!1,this.i=1,this.h=this.f=null,this.g=new re(this.ud.bind(this)),this.D=e.readyState,this.s=!1,this.C=this.X=-1,this.w=this.B=!1,0<e.readyState?this.pc():(j(this.b,e,"loadedmetadata",this.pc.bind(this)),V(this.b,e,"timeupdate",function(){oe(this.g,.1)}.bind(this))),t=this.rc.bind(this),V(this.b,e,"ratechange",this.Hd.bind(this)),V(this.b,e,"waiting",t),this.h=new re(t),ae(this.h,.25)}function Gn(e,t){0<e.a.readyState?e.a.currentTime=Yn(e,t):e.m=t}function Hn(e,t){var i=e.c.presentationTimeline.W();return t>=i?i-e.l.durationBackoff:t}function qn(e){return 0<e.a.readyState?e.a.paused?e.a.currentTime:Yn(e,e.a.currentTime):Kn(e)}function Kn(e){if(null!=e.m)return Yn(e,e.m);var t=e.c.presentationTimeline;return t=1/0>t.W()?t.ka():t.nb(),e.m=Hn(e,t),t}function zn(e,t){e.f&&(e.f.cancel(),e.f=null),e.i=t,e.a.playbackRate=e.j||0>t?0:t,!e.j&&0>t&&(e.f=new re(function(){this.a.currentTime+=t/4}.bind(e)),ae(e.f,.25))}function Wn(e,t){var i=Ne.bind(null,e.a.buffered),n=1*Math.max(e.c.minBufferTime||0,e.l.rebufferingGoal),r=e.c.presentationTimeline,o=r.ua(),a=r.Da(n),s=r.Da(5),n=r.Da(n+5);return t>=r.W()?Hn(e,t):t>o?o:t<r.Da(0)?i(s)?s:n:t>=a||i(t)?t:n}function Xn(e,t,i){e.a.currentTime=i;var n=0,r=function(){!this.a||10<=n++||this.a.currentTime!=t||(this.a.currentTime=i,setTimeout(r,100))}.bind(e);setTimeout(r,100)}function Yn(e,t){var i=e.c.presentationTimeline.ka();return t<i?i:(i=e.c.presentationTimeline.ua(),t>i?i:t)}function Jn(e,t,i,n,r,o,a){this.a=e,this.B=t,this.g=i,this.w=n,this.l=r,this.h=o,this.C=a,this.c=[],this.j=new F,this.b=!1,this.i=-1,this.f=null,Zn(this)}function Qn(e){var t=_(e);return t.eventElement=e.eventElement,t}function Zn(t){er(t),t.f=e.setTimeout(t.D.bind(t),250)}function er(t){t.f&&(e.clearTimeout(t.f),t.f=null)}function tr(e,t){this.a=t,this.b=e,this.h=null,this.i=1,this.m=Promise.resolve(),this.g=[],this.j={},this.c={},this.s=!1,this.w=null,this.f=this.l=!1}function ir(e){var t=qn(e.a.Ua);return e.b.periods[dt(e.b,t)]}function nr(e){var t=e.c.video||e.c.audio;return t?e.b.periods[t.wa]:null}function rr(e){return X(e.c,function(e){return e.oa||e.stream})}function or(e,t){var i=e.c.video;if(i){var n=i.stream;if(n)if(t){var r=n.trickModeVideo;if(r){var o=i.oa;o||(sr(e,r,!1),i.oa=n)}}else(o=i.oa)&&(i.oa=null,sr(e,o,!0))}}function ar(e,t,i){t.video&&sr(e,t.video,i),t.audio&&sr(e,t.audio,i)}function sr(e,t,i){var n=e.c[t.type];if(!n&&"text"==t.type&&e.h.ignoreTextStreamFailures)ur(e,{text:t});else if(n){var r=pt(e.b,t);i&&r!=n.wa?hr(e):(n.oa&&(t.trickModeVideo?(n.oa=t,t=t.trickModeVideo):n.oa=null),(r=e.g[r])&&r.Ka&&(r=e.j[t.id])&&r.Ka&&n.stream!=t&&("text"==t.type&&Ve(e.a.M,Q(t.mimeType,t.codecs)),n.stream=t,n.pb=!0,i&&(n.sa?n.tb=!0:n.xa?(n.ra=!0,n.tb=!0):(Ir(n),Sr(e,n,!0)))))}}function lr(e){var t=qn(e.a.Ua);Object.keys(e.c).every(function(e){var i=this.a.M;return"text"==e?(e=i.a,e=t>=e.a&&t<e.b):(e=$e(i,e),e=Ne(e,t)),e}.bind(e))||hr(e)}function hr(e){for(var t in e.c){var i=e.c[t];i.sa||i.ra||(i.xa?i.ra=!0:null==je(e.a.M,t)?null==i.qa&&_r(e,i,0):(Ir(i),Sr(e,i,!1)))}}function ur(e,t,i){var n=qn(e.a.Ua),r=dt(e.b,n),o={},n=[];return t.variant&&t.variant.audio&&(o.audio=t.variant.audio,n.push(t.variant.audio)),t.variant&&t.variant.video&&(o.video=t.variant.video,n.push(t.variant.video)),t.text&&(o.text=t.text,n.push(t.text)),e.a.M.init(o),pr(e),dr(e,n).then(function(){if(!this.f)for(var e in o){var t=o[e];this.c[e]||(this.c[e]={stream:t,type:e,Ea:null,la:null,oa:null,pb:!0,wa:r,endOfStream:!1,xa:!1,qa:null,ra:!1,tb:!1,sa:!1,Ob:!1,Qa:!1,Bc:i||0},_r(this,this.c[e],0))}}.bind(e))}function cr(e,t){var i=e.g[t];if(i)return i.N;i={N:new b,Ka:!1},e.g[t]=i;var n=e.b.periods[t].variants.map(function(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),e.video&&e.video.trickModeVideo&&t.push(e.video.trickModeVideo),t}).reduce(k,[]).filter(N);return n.push.apply(n,e.b.periods[t].textStreams),e.m=e.m.then(function(){if(!this.f)return dr(this,n)}.bind(e)).then(function(){this.f||(this.g[t].N.resolve(),this.g[t].Ka=!0)}.bind(e)).catch(function(e){this.f||(this.g[t].N.reject(),delete this.g[t],this.a.onError(e))}.bind(e)),i.N}function dr(e,t){t.map(function(e){return e.id}).filter(N);for(var i=[],n=0;n<t.length;++n){var r=t[n],o=e.j[r.id];o?i.push(o.N):(e.j[r.id]={N:new b,Ka:!1},i.push(r.createSegmentIndex()))}return Promise.all(i).then(function(){if(!this.f)for(var e=0;e<t.length;++e){var i=this.j[t[e].id];i.Ka||(i.N.resolve(),i.Ka=!0)}}.bind(e)).catch(function(e){if(!this.f)return this.j[r.id].N.reject(),delete this.j[r.id],Promise.reject(e)}.bind(e))}function pr(e){var t=e.b.presentationTimeline.W();1/0>t?e.a.M.ga(t):e.a.M.ga(Math.pow(2,32))}function fr(e,t){var i=qn(e.a.Ua),n=t.Ea&&t.la?e.b.periods[pt(e.b,t.Ea)].startTime+t.la.endTime:Math.max(i,t.Bc),r=pt(e.b,t.stream),o=dt(e.b,n),a=e.a.M,s=t.type;return"text"==s?(a=a.a,a=null==a.b||a.b<i?0:a.b-Math.max(i,a.a)):(a=$e(a,s),a=xe(a,i)),s=Math.max(e.i*Math.max(e.b.minBufferTime||0,e.h.rebufferingGoal),e.i*e.h.bufferingGoal),n>=e.b.presentationTimeline.W()?(t.endOfStream=!0,null):(t.endOfStream=!1,t.wa=o,o!=r?null:a>=s?.5:(n=e.a.M,o=t.type,n="text"==o?n.a.b:Le($e(n,o)),t.la&&t.stream==t.Ea?(o=t.la.position+1,n=gr(e,t,r,o)):(o=t.la?t.stream.findSegmentPosition(Math.max(0,e.b.periods[pt(e.b,t.Ea)].startTime+t.la.endTime-e.b.periods[r].startTime)):t.stream.findSegmentPosition(Math.max(0,(n||i)-e.b.periods[r].startTime)),null==o?n=null:(a=null,null==n&&(a=gr(e,t,r,Math.max(0,o-1))),n=a||gr(e,t,r,o))),n?(t.Bc=0,vr(e,t,i,r,n),null):1))}function gr(e,t,i,n){return i=e.b.periods[i],(t=t.stream.getSegmentReference(n))?(e=e.b.presentationTimeline,n=e.ua(),i.startTime+t.endTime<e.ka()||i.startTime+t.startTime>n?null:t):null}function vr(e,t,i,n,r){var o=e.b.periods[n],a=t.stream,s=e.b.presentationTimeline.W(),l=e.b.periods[n+1];n=yr(e,t,n,o.startTime,l?l.startTime:s),t.xa=!0,t.pb=!1,s=Pr(e,r),Promise.all([n,s]).then(function(e){if(!this.f&&!this.l)return br(this,t,i,o,a,r,e[1])}.bind(e)).then(function(){this.f||this.l||(t.xa=!1,t.Ob=!1,t.ra||this.a.Ib(),_r(this,t,0),Tr(this,a))}.bind(e)).catch(function(e){this.f||this.l||(t.xa=!1,"text"==t.type&&this.h.ignoreTextStreamFailures?delete this.c.text:3017==e.code?mr(this,t,e):(t.Qa=!0,e.severity=2,kr(this,e)))}.bind(e))}function mr(e,t,i){if(!W(e.c).some(function(e){return e!=t&&e.Ob})){var n=Math.round(100*e.i);if(20<n)e.i-=.2;else{if(!(4<n))return t.Qa=!0,e.l=!0,void e.a.onError(i);e.i-=.04}t.Ob=!0}_r(e,t,4)}function yr(e,t,i,n,r){return t.pb?(i=qe(e.a.M,t.type,e.b.periods[i].startTime-t.stream.presentationTimeOffset,n,r),t.stream.initSegmentReference?(e=Pr(e,t.stream.initSegmentReference).then(function(e){if(!this.f)return Ge(this.a.M,t.type,e,null,null)}.bind(e)).catch(function(e){return t.pb=!0,Promise.reject(e)}),Promise.all([i,e])):i):Promise.resolve()}function br(e,t,i,n,r,o,a){return r.containsEmsgBoxes&&(new oi).ca("emsg",e.Ud.bind(e,n,o)).parse(a),Cr(e,t,i).then(function(){if(!this.f)return Ge(this.a.M,t.type,a,o.startTime+n.startTime,o.endTime+n.startTime)}.bind(e)).then(function(){if(!this.f)return t.Ea=r,t.la=o,Promise.resolve()}.bind(e))}function Cr(e,t,i){var n=je(e.a.M,t.type);return null==n?Promise.resolve():(i=i-n-e.h.bufferBehind,0>=i?Promise.resolve():e.a.M.remove(t.type,n,n+i).then(function(){}.bind(e)))}function Tr(e,t){if(!e.s&&(e.s=W(e.c).every(function(e){return"text"==e.type||!e.ra&&!e.sa&&e.la}),e.s)){var i=pt(e.b,t);for(e.g[i]||cr(e,i).then(function(){this.a.jc()}.bind(e)).catch(A),i=0;i<e.b.periods.length;++i)cr(e,i).catch(A);e.a.Md&&e.a.Md()}}function Er(e,t){if(t.wa!=pt(e.b,t.stream)){var i=t.wa,n=W(e.c);n.every(function(e){return e.wa==i})&&n.every(wr)&&cr(e,i).then(function(){if(!this.f&&n.every(function(e){var t=pt(this.b,e.stream);return wr(e)&&e.wa==i&&t!=i}.bind(this))){var e=this.b.periods[i],t=this.a.kc(e),r={};t.variant&&t.variant.video&&(r.video=t.variant.video),t.variant&&t.variant.audio&&(r.audio=t.variant.audio),t.text&&(r.text=t.text);for(var o in this.c)if(!r[o]&&"text"!=o)return void this.a.onError(new h(2,5,5005));for(o in r)if(!this.c[o]){if("text"!=o)return void this.a.onError(new h(2,5,5005));ur(this,{text:r.text},e.startTime),delete r[o]}for(o in this.c)(e=r[o])?(sr(this,e,!1),_r(this,this.c[o],0)):delete this.c[o];this.a.jc()}}.bind(e)).catch(A)}}function wr(e){return!e.xa&&null==e.qa&&!e.ra&&!e.sa}function Pr(e,t){var i=B(t.a(),e.h.retryParameters);if(t.T||null!=t.K){var n="bytes="+t.T+"-";null!=t.K&&(n+=t.K),i.headers.Range=n}return e.a.Sa.request(1,i).then(function(e){return e.data})}function Sr(e,t,i){t.ra=!1,t.tb=!1,t.sa=!0,He(e.a.M,t.type).then(function(){if(!this.f&&i){var e=this.a.M,n=t.type;return"text"==n?Promise.resolve():Ke(e,n,e.Yc.bind(e,n))}}.bind(e)).then(function(){this.f||(t.Ea=null,t.la=null,t.sa=!1,t.endOfStream=!1,_r(this,t,0))}.bind(e))}function _r(t,i,n){i.qa=e.setTimeout(t.Ce.bind(t,i),1e3*n)}function Ir(t){null!=t.qa&&(e.clearTimeout(t.qa),t.qa=null)}function kr(e,t){T(e.w).then(function(){this.a.onError(t),t.handled||this.h.failureCallback(t)}.bind(e))}function Ar(e,t){return new Promise(function(i,n){var r=new XMLHttpRequest;r.open(t.method,e,!0),r.responseType="arraybuffer",r.timeout=t.retryParameters.timeout,r.withCredentials=t.allowCrossSiteCredentials,r.onload=function(t){t=t.target;var r=t.getAllResponseHeaders().split("\r\n").reduce(function(e,t){var i=t.split(": ");return e[i[0].toLowerCase()]=i.slice(1).join(": "),e},{});if(200<=t.status&&299>=t.status&&202!=t.status)t.responseURL&&(e=t.responseURL),i({uri:e,data:t.response,headers:r,fromCache:!!r["x-shaka-from-cache"]});else{var o=null;try{o=te(t.response)}catch(e){}n(new h(401==t.status||403==t.status?2:1,1,1001,e,t.status,o,r))}},r.onerror=function(){n(new h(1,1,1002,e))},r.ontimeout=function(){n(new h(1,1,1003,e))};for(var o in t.headers)r.setRequestHeader(o,t.headers[o]);r.send(t.body)})}function Lr(){this.a=null,this.b=[],this.c={}}function Nr(e,t,i){return Mr(e,t,"readwrite",function(e){e.put(i)})}function xr(e,t,i){return Mr(e,"segment","readwrite",function(e){for(var n=0;n<t.length;n++)e.delete(t[n]).onsuccess=i||function(){}})}function Br(e,t){var i=0;return Mr(e,t,"readonly",function(e){e.openCursor(null,"prev").onsuccess=function(e){(e=e.target.result)&&(i=e.key+1)}}).then(function(){return i})}function Mr(e,t,i,n){var r={transaction:e.a.transaction([t],i),N:new b};return r.transaction.oncomplete=function(){this.b.splice(this.b.indexOf(r),1),r.N.resolve()}.bind(e),r.transaction.onabort=function(e){this.b.splice(this.b.indexOf(r),1),Dr(r.transaction,r.N,e)}.bind(e),r.transaction.onerror=function(e){e.preventDefault()}.bind(e),t=r.transaction.objectStore(t),n(t),e.b.push(r),r.N}function Rr(t,i,n){var r=e.indexedDB.open("shaka_offline_db",1),o=!1,a=new b;return r.onupgradeneeded=function(e){o=!0,e=e.target.result;for(var t in i)e.createObjectStore(t,{keyPath:i[t]})},r.onsuccess=function(e){n&&!o?(e.target.result.close(),setTimeout(function(){Rr(this,i,n-1).then(a.resolve,a.reject)}.bind(this),1e3)):(this.a=e.target.result,a.resolve())}.bind(t),r.onerror=Dr.bind(null,r,a),a}function Dr(e,t,i){e.error?t.reject(new h(2,9,9001,e.error)):t.reject(new h(2,9,9002)),i.preventDefault()}function Or(e){var t=Ur(e.periods[0],[],new Oi(null,0)),i=tt(t,null,null),t=it(t,null);return i.push.apply(i,t),{offlineUri:"offline:"+e.key,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:void 0==e.expiration?1/0:e.expiration,tracks:i,appMetadata:e.appMetadata}}function Ur(e,t,i){var n=e.streams.filter(function(e){return"text"==e.contentType});return t=Vr(e.streams.filter(function(e){return"audio"==e.contentType}),e.streams.filter(function(e){return"video"==e.contentType}),t),n=n.map($r),e.streams.forEach(function(e){e=Fr(e),i.Ga(0,e)}),{startTime:e.startTime,variants:t,textStreams:n}}function Fr(e){return e.segments.map(function(e,t){return new ti(t,e.startTime,e.endTime,function(){return[e.uri]},0,null)})}function Vr(e,t,i){var n=[];if(!e.length&&!t.length)return n;e.length?t.length||(t=[null]):e=[null];for(var r=0,o=0;o<e.length;o++)for(var a=0;a<t.length;a++)if(jr(e[o],t[a])){var s=e[o],l=t[a],h=i;s={id:r++,language:s?s.language:"",primary:!!s&&s.primary||!!l&&l.primary,audio:$r(s),video:$r(l),bandwidth:0,drmInfos:h,allowedByApplication:!0,allowedByKeySystem:!0},n.push(s)}return n}function jr(e,t){if(!(e&&t&&e.variantIds&&t.variantIds))return!0;for(var i=0;i<e.variantIds.length;i++)if(t.variantIds.some(function(t){return t==e.variantIds[i]}))return!0;return!1}function $r(e){if(!e)return null;var t=Fr(e),t=new di(t);return{id:e.id,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:t.find.bind(t),getSegmentReference:t.get.bind(t),initSegmentReference:e.initSegmentUri?new ei(function(){return[e.initSegmentUri]},0,null):null,presentationTimeOffset:e.presentationTimeOffset,mimeType:e.mimeType,codecs:e.codecs,width:e.width||void 0,height:e.height||void 0,frameRate:e.frameRate||void 0,kind:e.kind,encrypted:e.encrypted,keyId:e.keyId,language:e.language,label:e.label||null,type:e.contentType,primary:e.primary,trickModeVideo:null,containsEmsgBoxes:!1,roles:[],channelsCount:null}}function Gr(){return e.indexedDB?new Lr:null}function Hr(e,t,i,n){this.b={},this.l=[],this.m=n,this.j=e,this.s=t,this.w=i,this.i=this.a=null,this.f=this.g=this.h=this.c=0}function qr(e,t,i,n,r){e.b[t]=e.b[t]||[],e.b[t].push({uris:i.a(),T:i.T,K:i.K,$b:n,Qb:r})}function Kr(e,t){e.c=0,e.h=0,e.g=0,e.f=0,W(e.b).forEach(function(e){e.forEach(function(e){null!=e.K?this.c+=e.K-e.T+1:this.g+=e.$b}.bind(this))}.bind(e)),e.a=t,e.a.size=e.c;var i=W(e.b).map(function(e){var t=0,i=function(){return this.m?t>=e.length?Promise.resolve():zr(this,e[t++]).then(i):Promise.reject(new h(2,9,9002))}.bind(this);return i()}.bind(e));return e.b={},e.i=Promise.all(i).then(function(){return Nr(this.j,"manifest",t)}.bind(e)).then(function(){this.l=[]}.bind(e)),e.i}function zr(e,t){var i=B(t.uris,e.w);(t.T||null!=t.K)&&(i.headers.Range="bytes="+t.T+"-"+(null==t.K?"":t.K));var n;return e.s.request(1,i).then(function(e){return this.a?(n=e.data.byteLength,this.l.push(t.Qb.key),t.Qb.data=e.data,Nr(this.j,"segment",t.Qb)):Promise.reject(new h(2,9,9002))}.bind(e)).then(function(){if(!this.a)return Promise.reject(new h(2,9,9002));null==t.K?(this.a.size+=n,this.f+=t.$b):this.h+=n;var e=(this.h+this.f)/(this.c+this.g),i=Or(this.a);this.m.progressCallback(i,e)}.bind(e))}function Wr(){this.a=-1}function Xr(e){var t=new Oi(null,0);t.ga(e.duration);var i=e.drmInfo?[e.drmInfo]:[];return{presentationTimeline:t,minBufferTime:10,offlineSessionIds:e.sessionIds,periods:e.periods.map(function(e){return Ur(e,i,t)})}}function Yr(e){if(/^offline:([0-9]+)$/.exec(e)){var t={uri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}};return Promise.resolve(t)}if(t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e)){var i=Number(t[1]),n=Gr();return n?n.init(Ms).then(function(){return n.get("segment",i)}).then(function(t){return n.o().then(function(){if(!t)throw new h(2,9,9003,i);return{uri:e,data:t.data,headers:{}}})}):Promise.reject(new h(2,9,9e3))}return Promise.reject(new h(2,1,9004,e))}function Jr(e){this.a=null;for(var t=0;t<e.textTracks.length;++t){var i=e.textTracks[t];i.mode="disabled","Shaka Player TextTrack"==i.label&&(this.a=i)}this.a||(this.a=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.a.mode="hidden",this.b=this.a.cues}function Qr(t){if(t.startTime>=t.endTime)return null;var i=new VTTCue(t.startTime,t.endTime,t.payload);i.lineAlign=t.lineAlign,i.positionAlign=t.positionAlign,i.size=t.size;try{i.align=t.textAlign}catch(e){}if("center"==t.textAlign&&"center"!=i.align&&(i.align="middle"),t.writingDirection==Ys?i.vertical="lr":t.writingDirection==Js&&(i.vertical="rl"),t.lineInterpretation==Zs&&(i.snapToLines=!1),null!=t.line&&(i.line=t.line),null!=t.position&&(i.position=t.position),e.VTTRegion&&t.region){var n=new VTTRegion;n.viewportAnchorX=t.region.x,n.viewportAnchorY=t.region.y,n.width=t.region.width,n.height=t.region.height,i.region=n}return i}function Zr(e,t){for(var i=e.b,n=[],r=0;r<i.length;++r)t(i[r])&&n.push(i[r]);for(r=0;r<n.length;++r)e.a.removeCue(n[r])}function eo(){this.a=Promise.resolve(),this.b=this.c=this.f=!1,this.i=new Promise(function(e){this.g=e}.bind(this))}function to(e){return e.f||(e.a=e.a.then(function(e){return this.c=!0,Promise.resolve(e)}.bind(e),function(e){return this.c=!0,this.b?(this.g(),Promise.reject(this.h)):Promise.reject(e)}.bind(e))),e.f=!0,e.a}function io(e,t){wt.call(this),this.D=!1,this.f=e,this.jb=!1,this.w=null,this.m=new F,this.g=this.ib=this.b=this.i=this.a=this.B=this.h=this.gb=this.J=this.L=this.l=this.s=null,this.Oc=1e9,this.eb=[],this.Oa=!1,this.Ba=!0,this.Na=this.Pa=this.ia=null,this.Yb=!1,this.X=null,this.hb=[],this.C={},this.c=go(this),this.fb={width:1/0,height:1/0},this.j=vo(),this.cb=0,this.Ma=this.c.preferredAudioLanguage,this.$a=this.c.preferredTextLanguage,this.ub=this.ab="",this.Zb=!0,t&&t(this),this.s=new x(this.ue.bind(this)),this.gb=oo(this),V(this.m,this.f,"error",this.Od.bind(this))}function no(e){if(!e.ia)return Promise.resolve();var t=Promise.resolve();return e.i&&(t=e.i.stop(),e.i=null),e=e.ia.cancel(new h(2,7,7e3)),Promise.all([t,e])}function ro(e){function t(e){return(e.video?e.video.codecs.split(".")[0]:"")+"-"+(e.audio?e.audio.codecs.split(".")[0]:"")}var i={};e.b.periods.forEach(function(e){e.variants.forEach(function(e){var n=t(e);n in i||(i[n]=[]),i[n].push(e)})});var n=null,r=1/0;J(i,function(e,t){var i=0,o=0;t.forEach(function(e){i+=e.bandwidth||0,++o});var a=i/o;a<r&&(n=e,r=a)}),e.b.periods.forEach(function(e){e.variants=e.variants.filter(function(e){return t(e)==n})})}function oo(t){t.L=new MediaSource;var i=new b;return V(t.m,t.L,"sourceopen",i.resolve),t.f.src=e.URL.createObjectURL(t.L),i}function ao(e){if(e.i&&e.i.configure(e.c.manifest),e.l&&e.l.configure(e.c.drm),e.a){e.a.configure(e.c.streaming);try{e.b.periods.forEach(e.kb.bind(e))}catch(t){e.La(t)}var t=rr(e.a),i=t.audio,n=t.video,t=ir(e.a);(i=ut(i,n,t.variants))&&i.allowedByApplication&&i.allowedByKeySystem||To(e,t)}e.g&&(so(e),e.c.abr.enabled&&!e.Ba?e.g.enable():e.g.disable())}function so(e){e.g.configure?e.g.configure(e.c.abr):(s("AbrManager API has changed. AbrManager.setDefaultEstimate() and AbrManager.setRestrictions() are deprecated. AbrManager.configure() is used instead. Please upgrade to the new API. The old API will be removed in v2.3."),e.g.setDefaultEstimate(e.c.abr.defaultBandwidthEstimate),e.g.setRestrictions(e.c.abr.restrictions))}function lo(e,t,i){t.video&&uo(e,t.video),t.audio&&uo(e,t.audio);var n=nr(e.a),r=rr(e.a);t!=ut(r.audio,r.video,n?n.variants:[])&&e.j.switchHistory.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:i,bandwidth:t.bandwidth})}function ho(e,t,i){uo(e,t),e.j.switchHistory.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:i,bandwidth:null})}function uo(e,t){var i=pt(e.b,t);e.C[i]||(e.C[i]={}),e.C[i][t.type]=t.id}function co(e){e.m&&(e.m.ha(e.L,"sourceopen"),e.m.ha(e.f,"loadeddata"),e.m.ha(e.f,"playing"),e.m.ha(e.f,"pause"),e.m.ha(e.f,"ended")),e.f&&(e.f.removeAttribute("src"),e.f.load());var t=Promise.all([e.g?e.g.stop():null,e.l?e.l.o():null,e.J?e.J.o():null,e.h?e.h.o():null,e.B?e.B.o():null,e.a?e.a.o():null,e.i?e.i.stop():null,e.w?e.w.o():null]);return e.l=null,e.J=null,e.h=null,e.B=null,e.a=null,e.i=null,e.w=null,e.b=null,e.ib=null,e.gb=null,e.L=null,e.hb=[],e.C={},e.j=vo(),t}function po(e){return e.i?co(e).then(function(){this.D||(this.Jc(!1),this.gb=oo(this))}.bind(e)):Promise.resolve()}function fo(){return{".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0)}}}function go(e){return{drm:{retryParameters:E(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1},manifest:{retryParameters:E(),dash:{customScheme:function(e){if(e)return null},clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1},hls:{defaultTimeOffset:0}},streaming:{retryParameters:E(),failureCallback:e.Vc.bind(e),rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1},abrFactory:ft,textDisplayFactory:function(e){return new Jr(e)}.bind(null,e.f),abr:{enabled:!0,defaultBandwidthEstimate:5e5,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0}}function vo(){return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:0,bufferingTime:0,switchHistory:[],stateHistory:[]}}function mo(e,t,i){e.Ba?(e.Na=t,e.Yb=i||!1):ar(e.a,t,i||!1)}function yo(e){if(e.b){var t=Date.now()/1e3;e.Oa?e.j.bufferingTime+=t-e.cb:e.j.playTime+=t-e.cb,e.cb=t}}function bo(e,t){function i(e,t){if(!e)return null;var i=e.findSegmentPosition(t-r.startTime);return null==i?null:(i=e.getSegmentReference(i))?i.startTime+r.startTime:null}var n=rr(e.a),r=ir(e.a),o=i(n.video,t),n=i(n.audio,t);return null!=o&&null!=n?Math.max(o,n):null!=o?o:null!=n?n:t}function Co(e,t){if(!t||!t.length)return e.La(new h(2,4,4012)),null;if(e.g.setVariants(t),e.g.chooseStreams){s("AbrManager API has changed. AbrManager.chooseStreams() is deprecated. Please implement AbrManager.chooseVariant() to upgrade. The old API will be removed in v2.3.");var i=e.g.chooseStreams(["video","audio"]);return ut(i.audio,i.video,t)}return e.g.chooseVariant()}function To(e,t){var i=at(t,e.Ma,e.ab),n=st(t,e.$a,e.ub);(i=Co(e,i))&&(lo(e,i,!0),mo(e,i,!0)),(n=n[0])&&(ho(e,n,!0),e.Ba?e.X=n:sr(e.a,n,!0)),Eo(e)}function Eo(e){Promise.resolve().then(function(){this.D||this.dispatchEvent(new H("adaptation"))}.bind(e))}function wo(e){Promise.resolve().then(function(){this.D||this.dispatchEvent(new H("trackschanged"))}.bind(e))}function Po(e){e.dispatchEvent(new H("texttrackvisibility"))}function So(e){if(!e||e.constructor!=io)throw new h(2,9,9008);this.a=Gr(),this.g=e,this.b=ko(this),this.c=null,this.s=!1,this.j=null,this.h=-1,this.l=0,this.f=null,this.i=new Hr(this.a,e.s,e.getConfiguration().streaming.retryParameters,this.b)}function _o(){return!!e.indexedDB}function Io(e,t,i,n){function r(){}var o,a,s,l=e.g.s,h=e.g.getConfiguration();return Di(t,l,h.manifest.retryParameters,n).then(function(e){return Bo(this),s=new e,s.configure(h.manifest),s.start(t,{networkingEngine:l,filterAllPeriods:this.m.bind(this),filterNewPeriod:this.w.bind(this),onTimelineRegionAdded:function(){},onEvent:function(){},onError:i})}.bind(e)).then(function(e){return Bo(this),o=e,a=new de({Sa:l,onError:i,Hb:r,onExpirationUpdated:function(){},onEvent:function(){}}),a.configure(h.drm),a.init(o,this.b.usePersistentLicense||!1)}.bind(e)).then(function(){return Bo(this),No(o)}.bind(e)).then(function(){return Bo(this),ge(a)}.bind(e)).then(function(){return Bo(this),s.stop()}.bind(e)).then(function(){return Bo(this),{manifest:o,Wc:a}}.bind(e)).catch(function(e){if(s)return s.stop().then(function(){throw e});throw e})}function ko(e){return{trackSelectionCallback:e.B.bind(e),progressCallback:function(e,t){if(e||t)return null},usePersistentLicense:!0}}function Ao(e){return e.a?e.a.a?Promise.resolve():e.a.init(Ms):Promise.reject(new h(2,9,9e3))}function Lo(e){var t=e.c?e.c.o():Promise.resolve();return e.c=null,e.f=null,e.s=!1,e.j=null,e.h=-1,t}function No(e){var t=e.periods.map(function(e){return e.variants}).reduce(k,[]).map(function(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t}).reduce(k,[]).filter(N);return e=e.periods.map(function(e){return e.textStreams}).reduce(k,[]),t.push.apply(t,e),Promise.all(t.map(function(e){return e.createSegmentIndex()}))}function xo(e,t,i,n,r){for(var o=[],a=e.f.presentationTimeline.ka(),s=a,l=i.findSegmentPosition(a),h=null!=l?i.getSegmentReference(l):null;h;)s=e.a.c.segment++,qr(e.i,i.type,h,(h.endTime-h.startTime)*n/8,{key:s,data:null,manifestKey:e.h,streamNumber:i.id,segmentNumber:s}),o.push({startTime:h.startTime,endTime:h.endTime,uri:"offline:"+e.h+"/"+i.id+"/"+s}),s=h.endTime+t.startTime,h=i.getSegmentReference(++l);return e.l=Math.max(e.l,s-a),t=null,i.initSegmentReference&&(s=e.a.c.segment++,t="offline:"+e.h+"/"+i.id+"/"+s,qr(e.i,i.contentType,i.initSegmentReference,0,{key:s,data:null,manifestKey:e.h,streamNumber:i.id,segmentNumber:-1})),e=[],null!=r&&e.push(r),{id:i.id,primary:i.primary,presentationTimeOffset:i.presentationTimeOffset||0,contentType:i.type,mimeType:i.mimeType,codecs:i.codecs,frameRate:i.frameRate,kind:i.kind,language:i.language,label:i.label,width:i.width||null,height:i.height||null,initSegmentUri:t,encrypted:i.encrypted,keyId:i.keyId,segments:o,variantIds:e}}function Bo(e){if(!e.g)throw new h(2,9,9002)}function Mo(e){Ds.push(e)}function Ro(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();if("function"==typeof Event)var i=new Event(t,e);else i=document.createEvent("Event"),i.initEvent(t,e.bubbles,e.cancelable);e.target.dispatchEvent(i)}function Do(e,t,i){if("input"==e)switch(this.type){case"range":e="change"}Os.call(this,e,t,i)}function Oo(e){this.f=[],this.b=[],this.a=[],(new oi).ca("pssh",this.c.bind(this)).parse(e.buffer)}function Uo(e,t){try{var i=new Fo(e,t);return Promise.resolve(i)}catch(e){return Promise.reject(e)}}function Fo(e,t){this.keySystem=e;for(var i=!1,n=0;n<t.length;++n){var r=t[n],o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label},a=!1;if(r.audioCapabilities)for(var s=0;s<r.audioCapabilities.length;++s){var l=r.audioCapabilities[s];if(l.contentType){a=!0;var h=l.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,h)&&(o.audioCapabilities.push(l),i=!0)}}if(r.videoCapabilities)for(s=0;s<r.videoCapabilities.length;++s)l=r.videoCapabilities[s],l.contentType&&(a=!0,h=l.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,h)&&(o.videoCapabilities.push(l),i=!0));if(a||(i=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==r.persistentState&&(i=!1),i)return void(this.a=o)}throw r=Error("Unsupported keySystem"),r.name="NotSupportedError",r.code=DOMException.NOT_SUPPORTED_ERR,r}function Vo(e){var t=this.mediaKeys;return t&&t!=e&&$o(t,null),delete this.mediaKeys,(this.mediaKeys=e)?$o(e,this):Promise.resolve()}function jo(e){this.a=new MSMediaKeys(e),this.b=new F}function $o(e,t){function i(){t.msSetMediaKeys(n.a),t.removeEventListener("loadedmetadata",i)}if($(e.b),!t)return Promise.resolve();V(e.b,t,"msneedkey",Ho);var n=e;try{return 1<=t.readyState?t.msSetMediaKeys(e.a):t.addEventListener("loadedmetadata",i),Promise.resolve()}catch(e){return Promise.reject(e)}}function Go(e){wt.call(this),this.c=null,this.g=e,this.b=this.a=null,this.f=new F,this.sessionId="",this.expiration=NaN,this.closed=new b,this.keyStatuses=new zo}function Ho(e){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc";var i=e.initData;if(i){var n=new Oo(i);if(1>=n.a.length)e=i;else{var r=[];for(e=0;e<n.a.length;e++)r.push(i.subarray(n.a[e].start,n.a[e].end+1));for(i=R(r,qo),e=n=0;e<i.length;e++)n+=i[e].length;for(n=new Uint8Array(n),e=r=0;e<i.length;e++)n.set(i[e],r),r+=i[e].length;e=n}}else e=i;t.initData=e,this.dispatchEvent(t)}function qo(e,t){return ce(e,t)}function Ko(e,t){var i=e.keyStatuses;i.size=void 0==t?0:1,i.a=t,e.dispatchEvent(new H("keystatuseschange"))}function zo(){this.size=0,this.a=void 0}function Wo(){return Promise.reject(Error("The key system specified is not supported."))}function Xo(e){return e?Promise.reject(Error("MediaKeys not supported.")):Promise.resolve()}function Yo(){throw new TypeError("Illegal constructor.")}function Jo(){throw new TypeError("Illegal constructor.")}function Qo(t){Fs=t,Vs=new Uint8Array([0]).buffer,navigator.requestMediaKeySystemAccess=ea,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ta,e.MediaKeys=na,e.MediaKeySystemAccess=ia}function Zo(e){var t=Fs;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function ea(e,t){try{var i=new ia(e,t);return Promise.resolve(i)}catch(e){return Promise.reject(e)}}function ta(e){var t=this.mediaKeys;return t&&t!=e&&ra(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&ra(e,this),Promise.resolve()}function ia(e,t){this.a=this.keySystem=e;var i=!1;"org.w3.clearkey"==e&&(this.a="webkit-org.w3.clearkey",i=!1);for(var n=!1,r=document.getElementsByTagName("video"),o=r.length?r[0]:document.createElement("video"),a=0;a<t.length;++a){r=t[a];var s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label},l=!1;if(r.audioCapabilities)for(var h=0;h<r.audioCapabilities.length;++h){var u=r.audioCapabilities[h];if(u.contentType){var l=!0,c=u.contentType.split(";")[0];o.canPlayType(c,this.a)&&(s.audioCapabilities.push(u),n=!0)}}if(r.videoCapabilities)for(h=0;h<r.videoCapabilities.length;++h)u=r.videoCapabilities[h],u.contentType&&(l=!0,o.canPlayType(u.contentType,this.a)&&(s.videoCapabilities.push(u),n=!0));if(l||(n=o.canPlayType("video/mp4",this.a)||o.canPlayType("video/webm",this.a)),"required"==r.persistentState&&(i?(s.persistentState="required",s.sessionTypes=["persistent-license"]):n=!1),n)return void(this.b=s)}throw i="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(i="None of the requested configurations were supported."),i=Error(i),i.name="NotSupportedError",i.code=DOMException.NOT_SUPPORTED_ERR,i}function na(e){this.g=e,this.b=null,this.a=new F,this.c=[],this.f={}}function ra(e,t){e.b=t,$(e.a);var i=Fs;t&&(V(e.a,t,i+"needkey",e.Sd.bind(e)),V(e.a,t,i+"keymessage",e.Rd.bind(e)),V(e.a,t,i+"keyadded",e.Pd.bind(e)),V(e.a,t,i+"keyerror",e.Qd.bind(e)))}function oa(e,t){var i=e.f[t];return i||((i=e.c.shift())?(i.sessionId=t,e.f[t]=i):null)}function aa(e,t,i){wt.call(this),this.f=e,this.h=!1,this.a=this.b=null,this.c=t,this.g=i,this.sessionId="",this.expiration=NaN,this.closed=new b,this.keyStatuses=new ha}function sa(e,t,i){if(e.h)return Promise.reject(Error("The session is already initialized."));e.h=!0;try{if("persistent-license"==e.g)if(i)var n=new Uint8Array(ie("LOAD_SESSION|"+i));else{var r=ie("PERSISTENT|"),o=new Uint8Array(r.byteLength+t.byteLength);o.set(new Uint8Array(r),0),o.set(new Uint8Array(t),r.byteLength),n=o}else n=new Uint8Array(t)}catch(e){return Promise.reject(e)}e.b=new b;var a=Zo("generateKeyRequest");try{e.f[a](e.c,n)}catch(t){if("InvalidStateError"!=t.name)return e.b=null,Promise.reject(t);setTimeout(function(){try{this.f[a](this.c,n)}catch(e){this.b.reject(e),this.b=null}}.bind(e),10)}return e.b}function la(e,t){var i=e.keyStatuses;i.size=void 0==t?0:1,i.a=t,e.dispatchEvent(new H("keystatuseschange"))}function ha(){this.size=0,this.a=void 0}function ua(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,arguments);return t.abort=function(){},t}}function ca(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,i){return e.call(this,t,i-.001)}}function da(){var e=MediaSource.prototype.endOfStream;MediaSource.prototype.endOfStream=function(){for(var t,i=0,n=0;n<this.sourceBuffers.length;++n)t=this.sourceBuffers[n],t=t.buffered.end(t.buffered.length-1),i=Math.max(i,t);if(!isNaN(this.duration)&&i<this.duration)for(this.hc=!0,n=0;n<this.sourceBuffers.length;++n)t=this.sourceBuffers[n],t.cc=!1;return e.apply(this,arguments)};var t=!1,i=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var e=i.apply(this,arguments);return e.mediaSource_=this,e.addEventListener("updateend",pa,!1),t||(this.addEventListener("sourceclose",fa,!1),t=!0),e}}function pa(e){var t=e.target,i=t.mediaSource_;if(i.hc){for(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.cc=!0,e=0;e<i.sourceBuffers.length;++e)if(0==i.sourceBuffers[e].cc)return;i.hc=!1}}function fa(e){e=e.target;for(var t=0;t<e.sourceBuffers.length;++t)e.sourceBuffers[t].removeEventListener("updateend",pa,!1);e.removeEventListener("sourceclose",fa,!1)}function ga(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"mp2t"!=t.split(/ *; */)[0].split("/")[1]&&e(t)}}function va(){var e=MediaSource.isTypeSupported,t=/^dv(?:he|av)\./;MediaSource.isTypeSupported=function(i){for(var n,r,o=i.split(/ *; */),a=o[0],s={},l=1;l<o.length;++l)n=o[l].split("="),r=n[0],n=n[1].replace(/"(.*)"/,"$1"),s[r]=n;if(!(n=s.codecs))return e(i);var h=!1,u=!1;i=n.split(",").filter(function(e){return t.test(e)?(u=!0,!1):(/^(hev|hvc)1\.2/.test(e)&&(h=!0),!0)}),u&&(h=!1),s.codecs=i.join(","),h&&(s.eotf="smpte2084");for(r in s)n=s[r],a+="; "+r+'="'+n+'"';return cast.__platform__.canDisplayType(a)}}function ma(e){if(this.c=[],this.b=[],this.za=js,e)try{e(this.ma.bind(this),this.a.bind(this))}catch(e){this.a(e)}}function ya(e){var t=new ma;return t.ma(void 0),t.then(function(){return e})}function ba(e){var t=new ma;return t.a(e),t}function Ca(e){function t(e,t,i){e.za==js&&(r[t]=i,++n==r.length&&e.ma(r))}var i=new ma;if(!e.length)return i.ma([]),i;for(var n=0,r=Array(e.length),o=i.a.bind(i),a=0;a<e.length;++a)e[a]&&e[a].then?e[a].then(t.bind(null,i,a),o):t(i,a,e[a]);return i}function Ta(e){for(var t=new ma,i=t.ma.bind(t),n=t.a.bind(t),r=0;r<e.length;++r)e[r]&&e[r].then?e[r].then(i,n):i(e[r]);return t}function Ea(e,t,i){Gs.push(function(){if(i&&"function"==typeof i){try{var e=i(this.f)}catch(e){return void t.a(e)}try{var n=e&&e.then}catch(e){return void t.a(e)}e instanceof ma?e==t?t.a(new TypeError("Chaining cycle detected")):e.then(t.ma.bind(t),t.a.bind(t)):n?wa(e,n,t):t.ma(e)}else 1==this.za?t.ma(this.f):t.a(this.f)}.bind(e)),null==$s&&($s=Sa(Pa))}function wa(e,t,i){try{var n=!1;t.call(e,function(e){if(!n){n=!0;try{var t=e&&e.then}catch(e){return void i.a(e)}t?wa(e,t,i):i.ma(e)}},i.a.bind(i))}catch(e){i.a(e)}}function Pa(){for(;Gs.length;){null!=$s&&(_a($s),$s=null);var e=Gs;Gs=[];for(var t=0;t<e.length;++t)e[t]()}}function Sa(){return 0}function _a(){}function Ia(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function ka(t,i,n){return new e.TextTrackCue(t,i,n)}function Aa(t,i,n){return new e.TextTrackCue(t+"-"+i+"-"+n,t,i,n)}function La(e,t,i){this.startTime=e,this.endTime=t,this.payload=i,this.region={x:0,y:0,width:100,height:100},this.position=null,this.positionAlign=Hs,this.size=100,this.textAlign=qs,this.writingDirection=Xs,this.lineInterpretation=Qs,this.line=null,this.lineHeight="",this.lineAlign=el,this.displayAlign=zs,this.fontSize=this.backgroundColor=this.color="",this.fontWeight=il,this.fontStyle=nl,this.fontFamily="",this.textDecoration=[],this.wrapLine=!0,this.id=""}function Na(){}function xa(e){var t=[];if(!e)return t;for(var i=e.childNodes,n=0;n<i.length;n++){var r="span"==i[n].nodeName&&"p"==e.nodeName;i[n].nodeType!=Node.ELEMENT_NODE||"br"==i[n].nodeName||r||(r=xa(i[n]),t=t.concat(r))}return t.length||t.push(e),t}function Ba(e,t){for(var i=e.childNodes,n=0;n<i.length;n++)if("br"==i[n].nodeName&&0<n)i[n-1].textContent+="\n";else if(0<i[n].childNodes.length)Ba(i[n],t);else if(t){var r=i[n].textContent.trim(),r=r.replace(/\s+/g," ");i[n].textContent=r}}function Ma(e,t){for(var i=t.split(" "),n=0;n<i.length;n++)switch(i[n]){case"underline":0>e.textDecoration.indexOf("underline")&&e.textDecoration.push("underline");break;case"noUnderline":0<=e.textDecoration.indexOf("underline")&&O(e.textDecoration,"underline");break;case"lineThrough":0>e.textDecoration.indexOf("lineThrough")&&e.textDecoration.push("lineThrough");break;case"noLineThrough":0<=e.textDecoration.indexOf("lineThrough")&&O(e.textDecoration,"lineThrough");break;case"overline":0>e.textDecoration.indexOf("overline")&&e.textDecoration.push("overline");break;case"noOverline":0<=e.textDecoration.indexOf("overline")&&O(e.textDecoration,"overline")}}function Ra(e,t,i,n){return(e=Oa(e,i,n))?e:Da(t,i,n)}function Da(e,t,i){for(var n=xa(e),r=0;r<n.length;r++){var o=n[r].getAttribute(i);if(o)return o}return(e=Ua(e,"style",t))?e.getAttribute(i):null}function Oa(e,t,i){return(e=Ua(e,"style",t))?e.getAttribute(i):null}function Ua(e,t,i){if(!e||1>i.length)return null;var n=null,r=e;for(e=null;r&&!(e=r.getAttribute(t))&&(r=r.parentNode)instanceof Element;);if(t=e)for(e=0;e<i.length;e++)if(i[e].getAttribute("xml:id")==t){n=i[e];break}return n}function Fa(e,t){var i=null;if(ol.test(e))var i=ol.exec(e),n=Number(i[1]),r=Number(i[2]),o=Number(i[3]),a=Number(i[4]),a=a+(Number(i[5])||0)/t.b,o=o+a/t.frameRate,i=o+60*r+3600*n;else al.test(e)?i=Va(al,e):sl.test(e)?i=Va(sl,e):ll.test(e)?(i=ll.exec(e),i=Number(i[1])/t.frameRate):hl.test(e)?(i=hl.exec(e),i=Number(i[1])/t.a):ul.test(e)&&(i=Va(ul,e));return i}function Va(e,t){var i=e.exec(t);return i&&""!=i[0]?(Number(i[4])||0)/1e3+(Number(i[3])||0)+60*(Number(i[2])||0)+3600*(Number(i[1])||0):null}function ja(e,t,i,n){this.frameRate=Number(e)||30,this.b=Number(t)||1,this.a=Number(n),this.a||(this.a=e?this.frameRate*this.b:1),i&&(e=/^(\d+) (\d+)$/g.exec(i))&&(this.frameRate*=e[1]/e[2])}function $a(){this.a=new Na}function Ga(){}function Ha(e,t){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(i=i[1],e.textAlign="middle"==i?qs:Ks[i.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(t))?e.writingDirection="lr"==i[1]?Ys:Js:(i=/^size:([\d\.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d\.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(i=i[2],e.positionAlign="line-left"==i||"start"==i?"line-left":"line-right"==i||"end"==i?"line-right":"center")):(i=/^line:([\d\.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=Zs,e.line=Number(i[1]),i[2]&&(e.lineAlign=tl[i[2].toUpperCase()])):(i=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=Qs,e.line=Number(i[1]),i[2]&&(e.lineAlign=tl[i[2].toUpperCase()]))}function qa(e){if(!(e=hn(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g)))return null;var t=Number(e[2]),i=Number(e[3]);return 59<t||59<i?null:Number(e[4])/1e3+i+60*t+3600*(Number(e[1])||0)}function Ka(){this.a=null}function za(e,t,i){var n,r,o;return(new oi).G("payl",li(function(e){n=Z(e)})).G("iden",li(function(e){r=Z(e)})).G("sttg",li(function(e){o=Z(e)})).parse(e),n?Wa(n,r,o,t,i):null}function Wa(e,t,i,n,r){if(e=new La(n,r,e),t&&(e.id=t),i)for(t=new ln(i),i=un(t);i;)Ha(e,i),hn(t,/[ \t]+/gm),i=un(t);return e}var Xa,Ya=this;Ya.Pe=!0,a.prototype.getBandwidthEstimate=function(e){return 128e3>this.a?e:Math.min(o(this.b),o(this.c))},e.console&&e.console.log.bind&&(s=console.warn.bind(console)),t("shaka.util.Error",h),h.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},h.Severity={RECOVERABLE:1,CRITICAL:2},h.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9},h.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_LIVE_CONTENT_NOT_SUPPORTED:4029,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,LOAD_INTERRUPTED:7e3,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,CONTENT_UNSUPPORTED_BY_BROWSER:9009};var Ja=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;Xa=u.prototype,Xa.ea="",Xa.Aa="",Xa.ja="",Xa.Ia=null,Xa.ba="",Xa.ta="",Xa.toString=function(){var e=[],t=this.ea;if(t&&e.push(g(t,Qa,!0),":"),t=this.ja){e.push("//");var i=this.Aa;i&&e.push(g(i,Qa,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Ia,null!=t&&e.push(":",String(t))}return(t=this.ba)&&(this.ja&&"/"!=t.charAt(0)&&e.push("/"),e.push(g(t,"/"==t.charAt(0)?es:Za,!0))),(t=this.a.toString())&&e.push("?",t),(t=this.ta)&&e.push("#",g(t,is)),e.join("")},Xa.resolve=function(e){var t=new u(this);"data"===t.ea&&(t=new u);var i=!!e.ea;i?c(t,e.ea):i=!!e.Aa,i?t.Aa=e.Aa:i=!!e.ja,i?t.ja=e.ja:i=null!=e.Ia;var n=e.ba;if(i)d(t,e.Ia);else if(i=!!e.ba){if("/"!=n.charAt(0))if(this.ja&&!this.ba)n="/"+n;else{var r=t.ba.lastIndexOf("/");-1!=r&&(n=t.ba.substr(0,r+1)+n)}if(".."==n||"."==n)n="";else if(-1!=n.indexOf("./")||-1!=n.indexOf("/.")){for(var r=!n.lastIndexOf("/",0),n=n.split("/"),o=[],a=0;a<n.length;){var s=n[a++];"."==s?r&&a==n.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==n.length&&o.push("")):(o.push(s),r=!0)}n=o.join("/")}}return i?t.ba=n:i=""!==e.a.toString(),i?p(t,y(e.a)):i=!!e.ta,i&&(t.ta=e.ta),t};var Qa=/[#\/\?@]/g,Za=/[\#\?:]/g,es=/[\#\?]/g,ts=/[\#\?@]/g,is=/#/g;m.prototype.a=null,m.prototype.c=null,m.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return"";var e,t=[];for(e in this.a)for(var i=encodeURIComponent(e),n=this.a[e],r=0;r<n.length;r++){var o=i;""!==n[r]&&(o+="="+encodeURIComponent(n[r])),t.push(o)}return this.b=t.join("&")},t("shaka.net.NetworkingEngine",x),x.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3};var ns={};x.registerScheme=function(e,t){ns[e]=t},x.unregisterScheme=function(e){delete ns[e]},x.prototype.ae=function(e){this.b.push(e)},x.prototype.registerRequestFilter=x.prototype.ae,x.prototype.He=function(e){var t=this.b;0<=(e=t.indexOf(e))&&t.splice(e,1)},x.prototype.unregisterRequestFilter=x.prototype.He,x.prototype.Tc=function(){this.b=[]},x.prototype.clearAllRequestFilters=x.prototype.Tc,x.prototype.be=function(e){this.c.push(e)},x.prototype.registerResponseFilter=x.prototype.be,x.prototype.Ie=function(e){var t=this.c;0<=(e=t.indexOf(e))&&t.splice(e,1)},x.prototype.unregisterResponseFilter=x.prototype.Ie,x.prototype.Uc=function(){this.c=[]},x.prototype.clearAllResponseFilters=x.prototype.Uc,x.prototype.o=function(){this.f=!0,this.b=[],this.c=[];for(var e=[],t=0;t<this.a.length;++t)e.push(this.a[t].catch(A));return Promise.all(e)},x.prototype.destroy=x.prototype.o,x.prototype.request=function(e,t,i){var n=i||function(){return!1};if(this.f)return Promise.reject();t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?_(t.retryParameters):E(),t.uris=_(t.uris);var r=Date.now(),o=Promise.resolve();return this.b.forEach(function(i){o=o.then(i.bind(null,e,t))}),o=o.catch(function(e){throw new h(2,1,1006,e)}),o=o.then(function(){var o=Date.now()-r,a=new C(t.retryParameters,!1,i);return T(a).then(function(){return M(this,e,t,a,0,o,n)}.bind(this))}.bind(this)),this.a.push(o),o.then(function(t){return 0<=this.a.indexOf(o)&&this.a.splice(this.a.indexOf(o),1),this.g&&!t.fromCache&&1==e&&this.g(t.timeMs,t.data.byteLength),t}.bind(this)).catch(function(e){return e&&(e.severity=2),0<=this.a.indexOf(o)&&this.a.splice(this.a.indexOf(o),1),Promise.reject(e)}.bind(this))},x.prototype.request=x.prototype.request,U.prototype.push=function(e,t){this.a.hasOwnProperty(e)?this.a[e].push(t):this.a[e]=[t]},U.prototype.get=function(e){return(e=this.a[e])?e.slice():null},U.prototype.remove=function(e,t){var i=this.a[e];if(i)for(var n=0;n<i.length;++n)i[n]==t&&(i.splice(n,1),--n)},F.prototype.o=function(){return $(this),this.a=null,Promise.resolve()},F.prototype.ha=function(e,t){if(this.a)for(var i=this.a.get(t)||[],n=0;n<i.length;++n){var r=i[n];r.target==e&&(r.ha(),this.a.remove(t,r))}},G.prototype.ha=function(){this.target.removeEventListener(this.type,this.a,!1),this.a=this.target=null},H.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},H.prototype.stopImmediatePropagation=function(){this.a=!0},H.prototype.stopPropagation=function(){};var rs=1/15,os={codecs:"codecs",frameRate:"framerate",bandwidth:"bitrate",width:"width",height:"height",channelsCount:"channels"};t("shaka.util.StringUtils.fromUTF8",Z),t("shaka.util.StringUtils.fromUTF16",ee),t("shaka.util.StringUtils.fromBytesAutoDetect",te),t("shaka.util.StringUtils.toUTF8",ie),re.prototype.cancel=function(){null!=this.a&&(clearTimeout(this.a),this.a=null)},t("shaka.util.Uint8ArrayUtils.toBase64",se),t("shaka.util.Uint8ArrayUtils.fromBase64",le),t("shaka.util.Uint8ArrayUtils.fromHex",he),t("shaka.util.Uint8ArrayUtils.toHex",ue),t("shaka.util.Uint8ArrayUtils.equal",ce),t("shaka.util.Uint8ArrayUtils.concat",function(e){for(var t=0,i=0;i<arguments.length;++i)t+=arguments[i].length;for(var t=new Uint8Array(t),n=0,i=0;i<arguments.length;++i)t.set(arguments[i],n),n+=arguments[i].length;return t}),Xa=de.prototype,Xa.o=function(){this.c=!0;var e=[];return this.a.forEach(function(t){t=t.fa.close().catch(A);var i=new Promise(function(e){setTimeout(e,1e3)});e.push(Promise.race([t,i]))}),this.i.reject(),this.f&&e.push(this.f.o()),this.l&&e.push(this.l.setMediaKeys(null).catch(A)),this.B&&(this.B.cancel(),this.B=null),this.D&&(this.D.cancel(),this.D=null),this.f=this.l=this.j=this.w=this.b=null,this.a=[],this.m=[],this.s=this.g=this.h=null,Promise.all(e)},Xa.configure=function(e){this.h=e},Xa.init=function(e,t){var i={},n=[];return this.ia=t,this.m=e.offlineSessionIds,me(this,e,t||0<e.offlineSessionIds.length,i,n),n.length?ye(this,i,n):(this.L=!0,Promise.resolve())},Xa.keySystem=function(){return this.b?this.b.keySystem:""},Xa.mb=function(){var e=this.a.map(function(e){return e=e.fa.expiration,isNaN(e)?1/0:e});return Math.min.apply(Math,e)},Xa.vd=function(e){for(var t=new Uint8Array(e.initData),i=0;i<this.a.length;++i)if(ce(t,this.a[i].initData))return;Pe(this,e.initDataType,t)},Xa.uc=function(e){this.h.delayLicenseRequestUntilPlayed&&this.l.paused&&!this.X?this.J.push(e):Se(this,e)},Xa.oc=function(e){e=e.target;var t;for(t=0;t<this.a.length&&this.a[t].fa!=e;++t);if(t!=this.a.length){var i=!1;e.keyStatuses.forEach(function(e,n){if("string"==typeof n){var r=n;n=e,e=r}if("com.microsoft.playready"==this.b.keySystem&&16==n.byteLength){var r=new DataView(n),o=r.getUint32(0,!0),a=r.getUint16(4,!0),s=r.getUint16(6,!0);r.setUint32(0,o,!1),r.setUint16(4,a,!1),r.setUint16(6,s,!1)}"com.microsoft.playready"==this.b.keySystem&&"status-pending"==e&&(e="usable"),"status-pending"!=e&&(this.a[t].loaded=!0,this.a.every(function(e){return e.loaded})&&this.i.resolve()),"expired"==e&&(i=!0),r=ue(new Uint8Array(n)),this.C[r]=e}.bind(this));var n=e.expiration-Date.now();(0>n||i&&1e3>n)&&!this.a[t].na&&(this.a.splice(t,1),e.close()),oe(this.D,.5)}},Xa.$d=function(){function e(e,t){return"expired"==t}!z(this.C)&&Y(this.C,e)&&this.g(new h(2,6,6014)),this.s.Hb(this.C)},Xa.Gd=function(){for(var e=0;e<this.J.length;e++)Se(this,this.J[e]);this.X=!0,this.J=[]},Xa.Zd=function(){this.a.forEach(function(e){var t=e.Gb,i=e.fa.expiration;isNaN(i)&&(i=1/0),i!=t&&(this.s.onExpirationUpdated(e.fa.sessionId,i),e.Gb=i)}.bind(this))};var as={};t("shaka.text.TextEngine.registerParser",Re),t("shaka.text.TextEngine.unregisterParser",function(e){delete as[e]}),Me.prototype.o=function(){return this.c=this.f=null,Promise.resolve()},Me.prototype.pe=function(e){this.c=e},Me.prototype.setDisplayer=Me.prototype.pe,Me.prototype.remove=function(e,t){return Promise.resolve().then(function(){!this.c||!this.c.remove(e,t)||null==this.a||t<=this.a||e>=this.b||(e<=this.a&&t>=this.b?this.a=this.b=null:e<=this.a&&t<this.b?this.a=t:e>this.a&&t>=this.b&&(this.b=e))}.bind(this))},Oe.prototype.parseInit=function(e){this.Ta(e,0,null,null)},Oe.prototype.parseMedia=function(e,t){return this.Ta(e,t.periodStart,t.segmentStart,t.segmentEnd)},Xa=Ue.prototype,Xa.o=function(){this.i=!0;var e,t=[];for(e in this.c){var i=this.c[e],n=i[0];for(this.c[e]=i.slice(0,1),n&&t.push(n.p.catch(A)),n=1;n<i.length;++n)i[n].p.catch(A),i[n].p.reject()}return this.a&&t.push(this.a.o()),Promise.all(t).then(function(){this.h.o(),this.j=this.a=this.f=this.g=this.h=null,this.b={},this.c={}}.bind(this))},Xa.init=function(e){for(var t in e){var i=e[t],i=Q(i.mimeType,i.codecs);"text"==t?Ve(this,i):(i=this.f.addSourceBuffer(i),V(this.h,i,"error",this.Be.bind(this,t)),V(this.h,i,"updateend",this.Ha.bind(this,t)),this.b[t]=i,this.c[t]=[])}},Xa.yb=function(){var e=this.a&&null!=this.a.a?[{start:this.a.a,end:this.a.b}]:[];return{total:Be(this.g.buffered),audio:Be($e(this,"audio")),video:Be($e(this,"video")),text:e}},Xa.remove=function(e,t,i){return"text"==e?this.a.remove(t,i):Ke(this,e,this.Ac.bind(this,e,t,i))},Xa.endOfStream=function(e){return ze(this,function(){e?this.f.endOfStream(e):this.f.endOfStream()}.bind(this))},Xa.ga=function(e){return ze(this,function(){this.f.duration=e}.bind(this))},Xa.W=function(){return this.f.duration},Xa.Ae=function(e,t){this.b[e].appendBuffer(t)},Xa.Ac=function(e,t,i){i<=t?this.Ha(e):this.b[e].remove(t,i)},Xa.Pc=function(e){var t=this.b[e].appendWindowStart,i=this.b[e].appendWindowEnd;this.b[e].abort(),this.b[e].appendWindowStart=t,this.b[e].appendWindowEnd=i,this.Ha(e)},Xa.Yc=function(e){this.g.currentTime-=.001,this.Ha(e)},Xa.re=function(e,t){this.b[e].timestampOffset=t,this.Ha(e)},Xa.oe=function(e,t,i){this.b[e].appendWindowStart=0,this.b[e].appendWindowEnd=i,this.b[e].appendWindowStart=t,this.Ha(e)},Xa.Be=function(e){this.c[e][0].p.reject(new h(2,3,3014,this.g.error?this.g.error.code:0))},Xa.Ha=function(e){var t=this.c[e][0];t&&(t.p.resolve(),We(this,e))};var ss=1,ls=2,hs={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};t("shaka.abr.SimpleAbrManager",ft),ft.prototype.stop=function(){this.h=null,this.c=!1,this.g=[],this.f=null},ft.prototype.stop=ft.prototype.stop,ft.prototype.init=function(e){this.h=e},ft.prototype.init=ft.prototype.init,ft.prototype.chooseVariant=function(){var e=gt(this.a.restrictions,this.g),t=this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate);if(this.g.length&&!e.length)throw new h(2,4,4012);for(var i=e[0]||null,n=0;n<e.length;++n){var r=e[n],o=(e[n+1]||{bandwidth:1/0}).bandwidth/this.a.bandwidthUpgradeTarget;t>=r.bandwidth/this.a.bandwidthDowngradeTarget&&t<=o&&(i=r)}return this.f=Date.now(),i},ft.prototype.chooseVariant=ft.prototype.chooseVariant,ft.prototype.enable=function(){this.c=!0},ft.prototype.enable=ft.prototype.enable,ft.prototype.disable=function(){this.c=!1},ft.prototype.disable=ft.prototype.disable,ft.prototype.segmentDownloaded=function(e,t){var i=this.b;if(!(16e3>t)){var n=8e3*t/e,o=e/1e3;i.a+=t,r(i.b,o,n),r(i.c,o,n)}if(null!=this.f&&this.c)e:{if(this.i){if(Date.now()-this.f<1e3*this.a.switchInterval)break e}else{if(!(128e3<=this.b.a))break e;this.i=!0}i=this.chooseVariant(),this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate),this.h(i)}},ft.prototype.segmentDownloaded=ft.prototype.segmentDownloaded,ft.prototype.getBandwidthEstimate=function(){return this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate)},ft.prototype.getBandwidthEstimate=ft.prototype.getBandwidthEstimate,ft.prototype.setVariants=function(e){this.g=e},ft.prototype.setVariants=ft.prototype.setVariants,ft.prototype.configure=function(e){this.a=e},ft.prototype.configure=ft.prototype.configure;var us="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),cs="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),ds=["loop","playbackRate"],ps=["pause","play"],fs="adaptation buffering emsg error loading streaming texttrackvisibility timelineregionadded timelineregionenter timelineregionexit trackschanged unloading".split(" "),gs="drmInfo getAudioLanguages getBufferedInfo getConfiguration getExpiration getManifest getManifestUri getPlaybackRate getTextLanguages getTextTracks getStats getVariantTracks isAudioOnly isBuffering isInProgress isLive isTextTrackVisible keySystem seekRange".split(" "),vs=["getPlayheadTimeAsDate","getPresentationStartTimeAsDate"],ms=[["getConfiguration","configure"]],ys=[["isTextTrackVisible","setTextTrackVisibility"]],bs="addTextTrack cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack setTextTrackVisibility trickPlay".split(" "),Cs=["load","unload"],Ts=!1,Es=null;Xa=bt.prototype,Xa.o=function(){return Tt(this),Es&&Ct(this),this.D=this.C=this.g=null,this.b=this.h=!1,this.m=this.l=this.f=this.c=this.a=this.i=null,Promise.resolve()},Xa.aa=function(){return this.b},Xa.Nb=function(){return this.B},Xa.init=function(){if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){delete e.__onGCastApiAvailable,this.h=!0,this.g();var t=new chrome.cast.SessionRequest(this.J),t=new chrome.cast.ApiConfig(t,this.nc.bind(this),this.Id.bind(this),"origin_scoped");chrome.cast.initialize(t,function(){},function(){}),Ts&&setTimeout(this.g.bind(this),20),(t=Es)&&t.status!=chrome.cast.SessionStatus.STOPPED?this.nc(t):Es=null}else e.__onGCastApiAvailable=function(e){e&&this.init()}.bind(this)},Xa.Rb=function(e){this.i=e,this.b&&Et({type:"appData",appData:this.i})},Xa.cast=function(e){return this.h?Ts?this.b?Promise.reject(new h(1,8,8002)):(this.f=new b,chrome.cast.requestSession(this.Jb.bind(this,e),this.lc.bind(this)),this.f):Promise.reject(new h(1,8,8001)):Promise.reject(new h(1,8,8e3))},Xa.lb=function(){this.b&&(Tt(this),Es&&(Ct(this),Es.stop(function(){},function(){}),Es=null))},Xa.get=function(e,t){if("video"==e){if(0<=ps.indexOf(t))return this.zc.bind(this,e,t)}else if("player"==e){if(0<=vs.indexOf(t)&&!this.get("player","isLive")())return function(){};if(0<=bs.indexOf(t))return this.zc.bind(this,e,t);if(0<=Cs.indexOf(t))return this.de.bind(this,e,t);if(0<=gs.indexOf(t))return this.vc.bind(this,e,t)}return this.vc(e,t)},Xa.set=function(e,t,i){this.a[e][t]=i,Et({type:"set",targetName:e,property:t,value:i})},Xa.Jb=function(e,t){Es=t,t.addUpdateListener(this.l),t.addMessageListener("urn:x-cast:com.google.shaka.v2",this.m),this.mc(),Et({type:"init",initState:e,appData:this.i}),this.f.resolve()},Xa.lc=function(e){var t=8003;switch(e.code){case"cancel":t=8004;break;case"timeout":t=8005;break;case"receiver_unavailable":t=8006}this.f.reject(new h(2,8,t,e))},Xa.vc=function(e,t){return this.a[e][t]},Xa.zc=function(e,t){Et({type:"call",targetName:e,methodName:t,args:Array.prototype.slice.call(arguments,2)})},Xa.de=function(e,t){var i=Array.prototype.slice.call(arguments,2),n=new b,r=this.s.toString();return this.s++,this.c[r]=n,Et({type:"asyncCall",targetName:e,methodName:t,args:i,id:r}),n},Xa.nc=function(e){var t=this.w();this.f=new b,this.j=!0,this.Jb(t,e)},Xa.Id=function(e){Ts="available"==e,this.g()},Xa.mc=function(){var e=!!Es&&"connected"==Es.status;if(this.b&&!e){this.D();for(var t in this.a)this.a[t]={};Tt(this)}this.B=(this.b=e)?Es.receiver.friendlyName:"",this.g()},Xa.Cd=function(e,t){var i=mt(t);switch(i.type){case"event":var n=i.targetName,r=i.event;this.C(n,new H(r.type,r));break;case"update":r=i.update;for(n in r){var i=this.a[n]||{};for(o in r[n])i[o]=r[n][o]}this.j&&(this.L(),this.j=!1);break;case"asyncComplete":n=i.id;var o=i.error;if(i=this.c[n],delete this.c[n],i)if(o){n=new h(o.severity,o.category,o.code);for(r in o)n[r]=o[r];i.reject(n)}else i.resolve()}},wt.prototype.addEventListener=function(e,t){this.vb.push(e,t)},wt.prototype.removeEventListener=function(e,t){this.vb.remove(e,t)},wt.prototype.dispatchEvent=function(e){for(var t=this.vb.get(e.type)||[],i=0;i<t.length;++i){e.target=this.bb,e.currentTarget=this.bb;var n=t[i];try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(e){}if(e.a)break}return e.defaultPrevented},i(Pt),t("shaka.cast.CastProxy",Pt),Pt.prototype.o=function(e){return e&&this.a&&this.a.lb(),e=[this.i?this.i.o():null,this.b?this.b.o():null,this.a?this.a.o():null],this.a=this.i=this.j=this.h=this.b=this.c=null,Promise.all(e)},Pt.prototype.destroy=Pt.prototype.o,Pt.prototype.nd=function(){return this.h},Pt.prototype.getVideo=Pt.prototype.nd,Pt.prototype.dd=function(){return this.j},Pt.prototype.getPlayer=Pt.prototype.dd,Pt.prototype.Qc=function(){return!!this.a&&(this.a.h&&Ts)},Pt.prototype.canCast=Pt.prototype.Qc,Pt.prototype.aa=function(){return!!this.a&&this.a.aa()},Pt.prototype.isCasting=Pt.prototype.aa,Pt.prototype.Nb=function(){return this.a?this.a.Nb():""},Pt.prototype.receiverName=Pt.prototype.Nb,Pt.prototype.cast=function(){var e=this.fc();return this.a.cast(e).then(function(){return this.b.sb()}.bind(this))},Pt.prototype.cast=Pt.prototype.cast,Pt.prototype.Rb=function(e){this.a.Rb(e)},Pt.prototype.setAppData=Pt.prototype.Rb,Pt.prototype.Ee=function(){var e=this.a;if(e.b){var t=e.w();chrome.cast.requestSession(e.Jb.bind(e,t),e.lc.bind(e))}},Pt.prototype.suggestDisconnect=Pt.prototype.Ee,Pt.prototype.lb=function(){this.a.lb()},Pt.prototype.forceDisconnect=Pt.prototype.lb,Xa=Pt.prototype,Xa.fc=function(){var e={video:{},player:{},playerAfterLoad:{},manifest:this.b.ib,startTime:null};return this.c.pause(),ds.forEach(function(t){e.video[t]=this.c[t]}.bind(this)),this.c.ended||(e.startTime=this.c.currentTime),ms.forEach(function(t){var i=t[1];t=this.b[t[0]](),e.player[i]=t}.bind(this)),ys.forEach(function(t){var i=t[1];t=this.b[t[0]](),e.playerAfterLoad[i]=t}.bind(this)),e},Xa.ve=function(){this.dispatchEvent(new H("caststatuschanged"))},Xa.we=function(){this.f.dispatchEvent(new H(this.h.paused?"pause":"play"))},Xa.ye=function(){ms.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(this));var e=this.a.get("player","getManifestUri")(),t=this.a.get("video","ended"),i=Promise.resolve(),n=this.c.autoplay,r=null;t||(r=this.a.get("video","currentTime")),e&&(this.c.autoplay=!1,i=this.b.load(e,r),i.catch(function(e){this.b.dispatchEvent(new H("error",{detail:e}))}.bind(this)));var o={};ds.forEach(function(e){o[e]=this.a.get("video",e)}.bind(this)),i.then(function(){ds.forEach(function(e){this.c[e]=o[e]}.bind(this)),ys.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(this)),this.c.autoplay=n,e&&this.c.play()}.bind(this))},Xa.Le=function(e){if("addEventListener"==e)return this.f.addEventListener.bind(this.f);if("removeEventListener"==e)return this.f.removeEventListener.bind(this.f);if(this.a.aa()&&!Object.keys(this.a.a.video).length){var t=this.c[e];if("function"!=typeof t)return t}return this.a.aa()?this.a.get("video",e):(t=this.c[e],"function"==typeof t&&(t=t.bind(this.c)),t)},Xa.Ne=function(e,t){this.a.aa()?this.a.set("video",e,t):this.c[e]=t},Xa.Me=function(e){this.a.aa()||this.f.dispatchEvent(new H(e.type,e))},Xa.Xd=function(e){return"addEventListener"==e?this.g.addEventListener.bind(this.g):"removeEventListener"==e?this.g.removeEventListener.bind(this.g):"getMediaElement"==e?function(){return this.h}.bind(this):"getNetworkingEngine"==e?this.b.gc.bind(this.b):this.a.aa()&&!Object.keys(this.a.a.video).length&&0<=gs.indexOf(e)||!this.a.aa()?(e=this.b[e],e.bind(this.b)):this.a.get("player",e)},Xa.Yd=function(e){this.a.aa()||this.g.dispatchEvent(e)},Xa.xe=function(e,t){this.a.aa()&&("video"==e?this.f.dispatchEvent(t):"player"==e&&this.g.dispatchEvent(t))},i(_t),t("shaka.cast.CastReceiver",_t),_t.prototype.isConnected=function(){return this.i},_t.prototype.isConnected=_t.prototype.isConnected,_t.prototype.qd=function(){return this.f},_t.prototype.isIdle=_t.prototype.qd,_t.prototype.o=function(){var t=this.b?this.b.o():Promise.resolve();return null!=this.h&&e.clearTimeout(this.h),this.l=this.j=this.b=this.a=null,this.i=!1,this.f=!0,this.h=this.g=this.c=null,t.then(function(){cast.receiver.CastReceiverManager.getInstance().stop()})},_t.prototype.destroy=_t.prototype.o,Xa=_t.prototype,Xa.tc=function(){this.i=!!cast.receiver.CastReceiverManager.getInstance().getSenders().length,kt(this)},Xa.wc=function(e,t){this.b&&(this.Kb(),Lt(this,{type:"event",targetName:e,event:t},this.c))},Xa.Kb=function(){null!=this.h&&e.clearTimeout(this.h),this.h=e.setTimeout(this.Kb.bind(this),500);var t={video:{},player:{}};cs.forEach(function(e){t.video[e]=this.a[e]}.bind(this));var i=gs;this.b.R()&&(i=i.concat(vs)),i.forEach(function(e){t.player[e]=this.b[e]()}.bind(this)),(i=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=i.level,t.video.muted=i.muted),Lt(this,{type:"update",update:t},this.c)},Xa.Xc=function(){var e=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();e&&Lt(this,{type:"update",update:{video:{volume:e.level,muted:e.muted}}},this.c),Lt(this,{type:"event",targetName:"video",event:{type:"volumechange"}},this.c)},Xa.Ld=function(e){var t=mt(e.data);switch(t.type){case"init":At(this,t.initState,t.appData),this.Kb();break;case"appData":this.l(t.appData);break;case"set":var i=t.targetName,n=t.property,r=t.value;if("video"==i){if(t=cast.receiver.CastReceiverManager.getInstance(),"volume"==n){t.setSystemVolumeLevel(r);break}if("muted"==n){t.setSystemVolumeMuted(r);break}}this.j[i][n]=r;break;case"call":i=t.targetName,n=t.methodName,r=t.args,i=this.j[i],i[n].apply(i,r);break;case"asyncCall":i=t.targetName,n=t.methodName,r=t.args,t=t.id,e=e.senderId,i=this.j[i],i[n].apply(i,r).then(this.Ec.bind(this,e,t,null),this.Ec.bind(this,e,t))}},Xa.xd=function(e){var t=mt(e.data);switch(t.type){case"PLAY":this.a.play(),Nt(this,0);break;case"PAUSE":this.a.pause(),Nt(this,0);break;case"SEEK":e=t.currentTime;var i=t.resumeState;null!=e&&(this.a.currentTime=Number(e)),i&&"PLAYBACK_START"==i?(this.a.play(),Nt(this,0)):i&&"PLAYBACK_PAUSE"==i&&(this.a.pause(),Nt(this,0));break;case"STOP":this.b.sb().then(function(){Nt(this,0)}.bind(this));break;case"GET_STATUS":Nt(this,Number(t.requestId));break;case"VOLUME":i=t.volume,e=i.level;var i=i.muted,n=this.a.volume,r=this.a.muted;null!=e&&(this.a.volume=Number(e)),null!=i&&(this.a.muted=i),n==this.a.volume&&r==this.a.muted||Nt(this,0);break;case"LOAD":i=t.media.contentId,e=t.currentTime;var o=this.m(i);this.a.autoplay=!0,this.b.load(o,e).then(function(){Nt(this,0,{contentId:o,streamType:this.b.R()?"LIVE":"BUFFERED",contentType:""})}.bind(this)).catch(function(e){var i="LOAD_FAILED";7==e.category&&7e3==e.code&&(i="LOAD_CANCELLED"),Lt(this,{requestId:Number(t.requestId),type:i},this.g)}.bind(this));break;default:Lt(this,{requestId:Number(t.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.g)}},Xa.Ec=function(e,t,i){Lt(this,{type:"asyncComplete",id:t,error:i},this.c,e)};var ws={IDLE:"IDLE",Nc:"PLAYING",Lc:"BUFFERING",Mc:"PAUSED"},Ps={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"};t("shaka.media.InitSegmentReference",ei),t("shaka.media.SegmentReference",ti),t("shaka.util.DataViewReader",ii);var Ss=1;ii.Endianness={Oe:0,Qe:Ss},ii.prototype.da=function(){return this.v<this.O.byteLength},ii.prototype.hasMoreData=ii.prototype.da,ii.prototype.fd=function(){return this.v},ii.prototype.getPosition=ii.prototype.fd,ii.prototype.$c=function(){return this.O.byteLength},ii.prototype.getLength=ii.prototype.$c,ii.prototype.Mb=function(){try{var e=this.O.getUint8(this.v)}catch(e){ni()}return this.v+=1,e},ii.prototype.readUint8=ii.prototype.Mb,ii.prototype.yc=function(){try{var e=this.O.getUint16(this.v,this.a)}catch(e){ni()}return this.v+=2,e},ii.prototype.readUint16=ii.prototype.yc,ii.prototype.F=function(){try{var e=this.O.getUint32(this.v,this.a)}catch(e){ni()}return this.v+=4,e},ii.prototype.readUint32=ii.prototype.F,ii.prototype.xc=function(){try{var e=this.O.getInt32(this.v,this.a)}catch(e){ni()}return this.v+=4,e},ii.prototype.readInt32=ii.prototype.xc,ii.prototype.Va=function(){try{if(this.a)var e=this.O.getUint32(this.v,!0),t=this.O.getUint32(this.v+4,!0);else t=this.O.getUint32(this.v,!1),e=this.O.getUint32(this.v+4,!1)}catch(e){ni()}if(2097151<t)throw new h(2,3,3001);return this.v+=8,t*Math.pow(2,32)+e},ii.prototype.readUint64=ii.prototype.Va,ii.prototype.Ja=function(e){this.v+e>this.O.byteLength&&ni();var t=ri(this,this.v,this.v+e);return this.v+=e,new Uint8Array(t)},ii.prototype.readBytes=ii.prototype.Ja,ii.prototype.I=function(e){this.v+e>this.O.byteLength&&ni(),this.v+=e},ii.prototype.skip=ii.prototype.I,ii.prototype.Lb=function(){for(var e=this.v;this.da()&&this.O.getUint8(this.v);)this.v+=1;return e=ri(this,e,this.v),this.v+=1,Z(e)},ii.prototype.readTerminatedString=ii.prototype.Lb,t("shaka.util.Mp4Parser",oi),oi.prototype.G=function(e,t){var i=hi(e);return this.b[i]=0,this.a[i]=t,this},oi.prototype.box=oi.prototype.G,oi.prototype.ca=function(e,t){var i=hi(e);return this.b[i]=1,this.a[i]=t,this},oi.prototype.fullBox=oi.prototype.ca,oi.prototype.parse=function(e){for(e=new ii(new DataView(e),0);e.da();)this.qb(0,e)},oi.prototype.parse=oi.prototype.parse,oi.prototype.qb=function(e,t){var i=t.v,n=t.F(),r=t.F();switch(n){case 0:n=t.O.byteLength-i;break;case 1:n=t.Va()}var o=this.a[r];if(o){var a=null,s=null;1==this.b[r]&&(s=t.F(),a=s>>>24,s&=16777215),r=i+n-t.v,r=0<r?t.Ja(r).buffer:new ArrayBuffer(0),r=new ii(new DataView(r),0),o({Ta:this,version:a,ec:s,u:r,size:n,start:i+e})}else t.I(i+n-t.v)},oi.prototype.parseNext=oi.prototype.qb,oi.children=ai,oi.sampleDescription=si,oi.allData=li,t("shaka.media.SegmentIndex",di),di.prototype.o=function(){return this.a=null,Promise.resolve()},di.prototype.destroy=di.prototype.o,di.prototype.find=function(e){for(var t=this.a.length-1;0<=t;--t){var i=this.a[t];if(e>=i.startTime&&e<i.endTime)return i.position}return this.a.length&&e<this.a[0].startTime?this.a[0].position:null},di.prototype.find=di.prototype.find,di.prototype.get=function(e){return this.a.length?(e-=this.a[0].position,0>e||e>=this.a.length?null:this.a[e]):null},di.prototype.get=di.prototype.get,di.prototype.ob=function(e){for(var t,i,n,r=[],o=t=0;t<this.a.length&&o<e.length;)i=this.a[t],n=e[o],i.startTime<n.startTime?(r.push(i),t++):(i.startTime>n.startTime?t||r.push(n):(.1<Math.abs(i.endTime-n.endTime)?(n=new ti(i.position,n.startTime,n.endTime,n.a,n.T,n.K),r.push(n)):r.push(i),t++),o++);for(;t<this.a.length;)r.push(this.a[t++]);if(r.length)for(t=r[r.length-1].position+1;o<e.length;)n=e[o++],n=new ti(t++,n.startTime,n.endTime,n.a,n.T,n.K),r.push(n);else r=e;this.a=r},di.prototype.merge=di.prototype.ob,di.prototype.xb=function(e){for(var t=0;t<this.a.length&&!(this.a[t].endTime>e);++t);this.a.splice(0,t)},di.prototype.evict=di.prototype.xb;var _s;fi.prototype.da=function(){return this.a.da()},bi.prototype.parse=function(e,t,i,n){var r;if(t=new fi(new DataView(t)),440786851!=gi(t).id)throw new h(2,3,3008);var o=gi(t);if(408125543!=o.id)throw new h(2,3,3009);for(t=o.a.byteOffset,o=new fi(o.a),r=null;o.da();){var a=gi(o);if(357149030==a.id){r=a;break}}if(!r)throw new h(2,3,3010);for(o=new fi(r.a),r=1e6,a=null;o.da();){var s=gi(o);if(2807729==s.id)r=yi(s);else if(17545==s.id)if(a=s,4==a.a.byteLength)a=a.a.getFloat32(0);else{if(8!=a.a.byteLength)throw new h(2,3,3003);a=a.a.getFloat64(0)}}if(null==a)throw new h(2,3,3011);if(o=r/1e9,r=a*o,e=gi(new fi(new DataView(e))),475249515!=e.id)throw new h(2,3,3007);return Ci(e,t,o,r,i,n)};var Is={},ks={};t("shaka.media.ManifestParser.registerParserByExtension",function(e,t){ks[e]=t}),t("shaka.media.ManifestParser.registerParserByMime",function(e,t){Is[e]=t}),t("shaka.media.PresentationTimeline",Oi),Oi.prototype.W=function(){return this.a},Oi.prototype.getDuration=Oi.prototype.W,Oi.prototype.ga=function(e){this.a=e},Oi.prototype.setDuration=Oi.prototype.ga,Oi.prototype.gd=function(){return this.c},Oi.prototype.getPresentationStartTime=Oi.prototype.gd,Oi.prototype.Gc=function(e){this.i=e},Oi.prototype.setClockOffset=Oi.prototype.Gc,Oi.prototype.rb=function(e){this.h=e},Oi.prototype.setStatic=Oi.prototype.rb,Oi.prototype.jd=function(){return this.f},Oi.prototype.getSegmentAvailabilityDuration=Oi.prototype.jd,Oi.prototype.Ic=function(e){this.f=e},Oi.prototype.setSegmentAvailabilityDuration=Oi.prototype.Ic,Oi.prototype.Hc=function(e){this.j=e},Oi.prototype.setDelay=Oi.prototype.Hc,Oi.prototype.Ga=function(e,t){t.length&&(this.b=t.reduce(function(e,t){return Math.max(e,t.endTime-t.startTime)},this.b))},Oi.prototype.notifySegments=Oi.prototype.Ga,Oi.prototype.Eb=function(e){this.b=Math.max(this.b,e)},Oi.prototype.notifyMaxSegmentDuration=Oi.prototype.Eb,Oi.prototype.R=function(){return 1/0==this.a&&!this.h},Oi.prototype.isLive=Oi.prototype.R,Oi.prototype.va=function(){return 1/0!=this.a&&!this.h},Oi.prototype.isInProgress=Oi.prototype.va,Oi.prototype.ka=function(){return this.Da(0)},Oi.prototype.getSegmentAvailabilityStart=Oi.prototype.ka,Oi.prototype.Da=function(e){if(1/0==this.f)return this.g;var t=this.ua();return Math.max(this.g,Math.min(t-this.f+e,t))},Oi.prototype.getSafeAvailabilityStart=Oi.prototype.Da,Oi.prototype.Fc=function(e){this.g=e},Oi.prototype.setAvailabilityStart=Oi.prototype.Fc,Oi.prototype.ua=function(){return this.R()||this.va()?Math.min(Math.max(0,(Date.now()+this.i)/1e3-this.b-this.c),this.a):this.a},Oi.prototype.getSegmentAvailabilityEnd=Oi.prototype.ua,Oi.prototype.nb=function(){return Math.max(0,this.ua()-(this.R()||this.va()?this.j:0))},Oi.prototype.getSeekRangeEnd=Oi.prototype.nb,t("shaka.dash.DashParser",Ui),Xa=Ui.prototype,Xa.configure=function(e){this.b=e},Xa.start=function(e,t){return this.g=[e],this.a=t,Fi(this).then(function(){return this.a&&Ki(this,0),this.c}.bind(this))},Xa.stop=function(){return this.b=this.a=null,this.g=[],this.c=null,this.i=[],this.j={},null!=this.f&&(e.clearTimeout(this.f),this.f=null),Promise.resolve()},Xa.update=function(){Fi(this).catch(function(e){this.a&&this.a.onError(e)}.bind(this))},Xa.onExpirationUpdated=function(){},Xa.Td=function(e,t){e.V=zi(t,e.Y,null);var i=!1,n=Bt(t,"Role"),r=n.map(function(e){return e.getAttribute("value")}).filter(L),o=void 0;"text"==e.V.contentType&&(o="subtitle");for(var a=0;a<n.length;a++){var s=n[a].getAttribute("schemeIdUri");if(null==s||"urn:mpeg:dash:role:2011"==s)switch(s=n[a].getAttribute("value")){case"main":i=!0;break;case"caption":case"subtitle":o=s}}var l=null,u=!1;if(Bt(t,"EssentialProperty").forEach(function(e){"http://dashif.org/guidelines/trickmode"==e.getAttribute("schemeIdUri")?l=e.getAttribute("value"):u=!0}),u)return null;var n=Bt(t,"ContentProtection"),c=Gt(n,this.b.dash.customScheme,this.b.dash.ignoreDrmInfo),n=Ye(t.getAttribute("lang")||"und"),s=t.getAttribute("label"),a=Bt(t,"Representation"),r=a.map(this.Wd.bind(this,e,c,o,n,s,i,r)).filter(function(e){return!!e});if(!r.length)throw new h(2,4,4003);return e.V.contentType&&"application"!=e.V.contentType||(e.V.contentType=Qi(r[0].mimeType,r[0].codecs),r.forEach(function(t){t.type=e.V.contentType})),r.forEach(function(e){c.drmInfos.forEach(function(t){e.keyId&&t.keyIds.push(e.keyId)})}),o=a.map(function(e){return e.getAttribute("id")}).filter(L),{id:e.V.id||"__fake__"+this.h++,contentType:e.V.contentType,language:n,Cb:i,streams:r,drmInfos:c.drmInfos,Wb:l,ee:o}},Xa.Wd=function(e,t,i,n,r,o,a,s){if(e.A=zi(s,e.V,null),!Xi(e.A))return null;e.bandwidth=Rt(s,"bandwidth",Vt)||0;var l=this.fe.bind(this);if(e.A.Wa)l=wi(e,l);else if(e.A.pa)l=_i(e,this.j);else if(e.A.Xa)l=Li(e,l,this.j,!!this.c);else{var h=e.A.$,u=e.S.duration||0;l={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0<=e&&e<u?1:null},getSegmentReference:function(e){return 1!=e?null:new ti(1,0,u,function(){return h},0,null)},initSegmentReference:null,Z:0}}return s=Bt(s,"ContentProtection"),s=Ht(s,this.b.dash.customScheme,t,this.b.dash.ignoreDrmInfo),{id:this.h++,createSegmentIndex:l.createSegmentIndex,findSegmentPosition:l.findSegmentPosition,getSegmentReference:l.getSegmentReference,initSegmentReference:l.initSegmentReference,presentationTimeOffset:l.Z,mimeType:e.A.mimeType,codecs:e.A.codecs,frameRate:e.A.frameRate,bandwidth:e.bandwidth,width:e.A.width,height:e.A.height,kind:i,encrypted:0<t.drmInfos.length,keyId:s,language:n,label:r,type:e.V.contentType,primary:o,trickModeVideo:null,containsEmsgBoxes:e.A.containsEmsgBoxes,roles:a,channelsCount:e.A.Fb}},Xa.ze=function(){this.f=null;var e=Date.now();Fi(this).then(function(){this.a&&Ki(this,(Date.now()-e)/1e3)}.bind(this)).catch(function(e){this.a&&(e.severity=1,this.a.onError(e),Ki(this,0))}.bind(this))},Xa.Vd=function(e,t,i){var n=i.getAttribute("schemeIdUri")||"",r=i.getAttribute("value")||"",o=Rt(i,"timescale",jt)||1;Bt(i,"Event").forEach(function(i){var a=Rt(i,"presentationTime",jt)||0,s=Rt(i,"duration",jt)||0,a=a/o+e,s=a+s/o;null!=t&&(a=Math.min(a,e+t),s=Math.min(s,e+t)),i={schemeIdUri:n,value:r,startTime:a,endTime:s,id:i.getAttribute("id")||"",eventElement:i},this.a.onTimelineRegionAdded(i)}.bind(this))},Xa.fe=function(e,t,i){return e=B(e,this.b.retryParameters),null!=t&&(e.headers.Range="bytes="+t+"-"+(null!=i?i:"")),this.a.networkingEngine.request(1,e).then(function(e){return e.data})},ks.mpd=Ui,Is["application/dash+xml"]=Ui,en.prototype.toString=function(){function e(e){return e.name+'="'+e.value+'"'}return this.value?"#"+this.name+":"+this.value:0<this.a.length?"#"+this.name+":"+this.a.map(e).join(","):"#"+this.name},en.prototype.getAttribute=function(e){var t=this.a.filter(function(t){return t.name==e});return t.length?t[0]:null};var As="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-MAP EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),Ls="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE".split(" ");t("shaka.net.DataUriPlugin",gn),gn.parse=function(t){var i=t.split(":");if(2>i.length||"data"!=i[0])throw new h(2,1,1004,t);if(i=i.slice(1).join(":").split(","),2>i.length)throw new h(2,1,1004,t);var n=i[0],i=e.decodeURIComponent(i.slice(1).join(",")),n=n.split(";"),r=null;if(1<n.length&&(r=n[1]),"base64"==r)t=le(i).buffer;else{if(r)throw new h(2,1,1005,t);t=ie(i)}return{data:t,contentType:n[0]}},ns.data=gn,t("shaka.hls.HlsParser",vn),Xa=vn.prototype,Xa.configure=function(e){this.h=e},Xa.start=function(e,t){return this.b=t,this.m=e,Fn(this,e).then(function(t){return yn(this,t.data,e).then(function(){return Vn(this,this.c),this.B}.bind(this))}.bind(this))},Xa.stop=function(){return this.h=this.b=null,this.g={},this.C={},this.B=null,Promise.resolve()},Xa.update=function(){if(this.f){for(var e=[],t=Object.keys(this.s),i=0;i<t.length;i++){var n=t[i];e.push(mn(this,this.s[n],n))}return Promise.all(e)}},Xa.onExpirationUpdated=function(){};var Ns={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},xs={audio:{mp4:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",ts:"video/mp2t"},video:{mp4:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}};vn.prototype.J=function(){this.b&&(this.i=null,this.update().then(function(){Vn(this,this.c)}.bind(this)).catch(function(e){this.b&&(e.severity=1,this.b.onError(e),Vn(this,0))}.bind(this)))};var Bs={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){if("SAMPLE-AES-CENC"!=On(e,"METHOD"))return null;var t=On(e,"URI"),t=gn.parse(t),t=new Uint8Array(t.data),t=K("com.widevine.alpha",[{initDataType:"cenc",initData:t}]);return(e=nn(e,"KEYID"))&&(t.keyIds=[e.substr(2).toLowerCase()]),t}};ks.m3u8=vn,Is["application/x-mpegurl"]=vn,Is["application/vnd.apple.mpegurl"]=vn,Xa=$n.prototype,Xa.o=function(){var e=this.b.o();return this.b=null,this.f&&(this.f.cancel(),this.f=null),this.h&&(this.h.cancel(),this.h=null),this.g&&(this.g.cancel(),this.g=null),this.J=this.L=this.l=this.c=this.a=null,e},Xa.zb=function(){return this.i},Xa.Ib=function(){this.w=!0,this.rc()},Xa.Hd=function(){var e=this.j||0>this.i?0:this.i;this.a.playbackRate&&this.a.playbackRate!=e&&zn(this,this.a.playbackRate)},Xa.pc=function(){var e=Kn(this);this.b.ha(this.a,"timeupdate"),this.g.cancel(),.001>Math.abs(this.a.currentTime-e)?(V(this.b,this.a,"seeking",this.sc.bind(this)),V(this.b,this.a,"playing",this.qc.bind(this))):(j(this.b,this.a,"seeking",this.Jd.bind(this)),this.a.currentTime=e)},Xa.Jd=function(){V(this.b,this.a,"seeking",this.sc.bind(this)),V(this.b,this.a,"playing",this.qc.bind(this))},Xa.rc=function(){if(this.a.readyState&&!this.a.paused){this.a.readyState!=this.D&&(this.s=!1,this.D=this.a.readyState);var e=this.l.smallGapLimit,t=this.a.currentTime,i=this.a.buffered;if(t<this.c.presentationTimeline.ka())i=Wn(this,t),Xn(this,t,i);else{e:{if(i&&i.length&&!(1==i.length&&1e-6>i.end(0)-i.start(0))){var n=.1;/(Edge\/|Trident\/|Tizen)/.test(navigator.userAgent)&&(n=.5);for(var r=0;r<i.length;r++)if(i.start(r)>t&&(!r||i.end(r-1)-t<=n)){n=r;break e}}n=null}if(null==n){if(3>this.a.readyState&&0<this.a.playbackRate)if(this.C!=t)this.C=t,this.X=Date.now(),this.B=!1;else if(!this.B&&this.X<Date.now()-1e3)for(n=0;n<i.length;n++)if(t>=i.start(n)&&t<i.end(n)-.5){this.a.currentTime+=.1,this.C=this.a.currentTime,this.B=!0;break}}else if((n||this.w)&&!((r=i.start(n))>=this.c.presentationTimeline.nb())){var o=r-t,e=o<=e,a=!1;e||this.s||(this.s=!0,o=new H("largegap",{currentTime:t,gapSize:o}),o.cancelable=!0,this.J(o),this.l.jumpLargeGaps&&!o.defaultPrevented&&(a=!0)),(e||a)&&(n&&i.end(n-1),Xn(this,t,r))}}}},Xa.ud=function(){this.m=Wn(this,this.a.currentTime)},Xa.sc=function(){this.w=!1;var e=this.a.currentTime,t=Wn(this,e);.001<Math.abs(t-e)?Xn(this,e,t):(this.s=!1,this.L())},Xa.qc=function(){var e=this.a.currentTime,t=Wn(this,e);.001<Math.abs(t-e)&&Xn(this,e,t)},Jn.prototype.o=function(){var e=this.j?this.j.o():Promise.resolve();return this.j=null,er(this),this.C=this.h=this.l=this.w=this.g=this.B=this.a=null,this.c=[],e},Jn.prototype.s=function(e){if(!this.c.some(function(t){return t.info.schemeIdUri==e.schemeIdUri&&t.info.startTime==e.startTime&&t.info.endTime==e.endTime})){var t={info:e,status:1};this.c.push(t);var i=new H("timelineregionadded",{detail:Qn(e)});this.h(i),this.m(!0,t)}},Jn.prototype.m=function(e,t){var i=t.info.startTime>this.a.currentTime?1:t.info.endTime<this.a.currentTime?3:2,n=2==t.status,r=2==i;i!=t.status&&((!e||n||r)&&(n||this.h(new H("timelineregionenter",{detail:Qn(t.info)})),r||this.h(new H("timelineregionexit",{detail:Qn(t.info)}))),t.status=i)},Jn.prototype.D=function(){this.f=null,Zn(this);var e=dt(this.g,this.a.currentTime);e!=this.i&&(-1!=this.i&&this.C(),this.i=e);var e=xe(this.a.buffered,this.a.currentTime),t=Le(this.a.buffered),i=this.g.presentationTimeline,n=i.ua(),r="ended"==this.B.readyState,t=i.R()&&t>=n||this.a.ended||r;this.b?(i=1*Math.max(this.g.minBufferTime||0,this.w.rebufferingGoal),(t||e>=i)&&0!=this.b&&(this.b=!1,this.l(!1))):!t&&.5>e&&1!=this.b&&(this.b=!0,this.l(!0)),this.c.forEach(this.m.bind(this,!1))},Xa=tr.prototype,Xa.o=function(){for(var e in this.c)Ir(this.c[e]);return this.h=this.c=this.j=this.g=this.m=this.b=this.a=null,this.f=!0,Promise.resolve()},Xa.configure=function(e){this.h=e,this.w=new C({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0},!0)},Xa.init=function(){var e=qn(this.a.Ua),e=this.a.kc(this.b.periods[dt(this.b,e)]);return e.variant||e.text?ur(this,e).then(function(){this.a&&this.a.yd&&this.a.yd()}.bind(this)):Promise.reject(new h(2,5,5005))},Xa.Ce=function(e){if(!this.f&&!e.xa&&null!=e.qa&&!e.sa)if(e.qa=null,e.ra)Sr(this,e,e.tb);else{try{var t=fr(this,e);null!=t&&(_r(this,e,t),e.Qa=!1)}catch(e){return void kr(this,e)}t=W(this.c),Er(this,e),t.every(function(e){return e.endOfStream})&&this.a.M.endOfStream().then(function(){this.b.presentationTimeline.ga(this.a.M.W())}.bind(this))}},Xa.Ud=function(e,t,i){var n=i.u.Lb(),r=i.u.Lb(),o=i.u.F(),a=i.u.F(),s=i.u.F(),l=i.u.F();i=i.u.Ja(i.u.O.byteLength-i.u.v),e=e.startTime+t.startTime+a/o,"urn:mpeg:dash:event:2012"==n?this.a.Ad():this.a.onEvent(new H("emsg",{detail:{startTime:e,endTime:e+s/o,schemeIdUri:n,value:r,timescale:o,presentationTimeDelta:a,eventDuration:s,id:l,messageData:i}}))},t("shaka.net.HttpPlugin",Ar),ns.http=Ar,ns.https=Ar,Xa=Lr.prototype,Xa.init=function(e,t){return Rr(this,e,t).then(function(){var t=Object.keys(e);return Promise.all(t.map(function(e){return Br(this,e).then(function(t){this.c[e]=t}.bind(this))}.bind(this)))}.bind(this))},Xa.o=function(){return Promise.all(this.b.map(function(e){try{e.transaction.abort()}catch(e){}return e.N.catch(A)})).then(function(){this.a&&(this.a.close(),this.a=null)}.bind(this))},Xa.get=function(e,t){var i;return Mr(this,e,"readonly",function(e){i=e.get(t)}).then(function(){return i.result})},Xa.forEach=function(e,t){return Mr(this,e,"readonly",function(e){e.openCursor().onsuccess=function(e){(e=e.target.result)&&(t(e.value),e.continue())}})},Xa.remove=function(e,t){return Mr(this,e,"readwrite",function(e){e.delete(t)})};var Ms={manifest:"key",segment:"key"};Hr.prototype.o=function(){var e=this.j,t=this.l,i=this.i||Promise.resolve();return t.length&&(i=i.then(function(){return xr(e,t)})),this.b={},this.l=[],this.i=this.a=this.w=this.s=this.j=this.m=null,i},Xa=Wr.prototype,Xa.configure=function(){},Xa.start=function(e){var t=/^offline:([0-9]+)$/.exec(e);if(!t)return Promise.reject(new h(2,1,9004,e));var i=Number(t[1]),n=Gr();return this.a=i,n?n.init(Ms).then(function(){return n.get("manifest",i)}).then(function(e){if(!e)throw new h(2,9,9003,i);return Xr(e)}).then(function(e){return n.o().then(function(){return e})},function(e){return n.o().then(function(){throw e})}):Promise.reject(new h(2,9,9e3))},Xa.stop=function(){return Promise.resolve()},Xa.update=function(){},Xa.onExpirationUpdated=function(e,t){var i=Gr();i.init(Ms).then(function(){return i.get("manifest",this.a)}.bind(this)).then(function(n){if(n&&!(0>n.sessionIds.indexOf(e))&&(void 0==n.expiration||n.expiration>t))return n.expiration=t,Nr(i,"manifest",n)}).catch(function(){}).then(function(){return i.o()})},Is["application/x-offline-manifest"]=Wr,t("shaka.offline.OfflineScheme",Yr),ns.offline=Yr,t("shaka.text.SimpleTextDisplayer",Jr),Jr.prototype.remove=function(e,t){return!!this.a&&(Zr(this,function(i){return!(i.startTime>=t||i.endTime<=e)}),!0)},Jr.prototype.remove=Jr.prototype.remove,Jr.prototype.append=function(e){for(var t=[],i=0;i<e.length;i++){var n=Qr(e[i]);n&&t.push(n)}t.slice().sort(function(e,i){return e.startTime!=i.startTime?e.startTime-i.startTime:e.endTime!=i.endTime?e.endTime-i.startTime:t.indexOf(i)-t.indexOf(e)}).forEach(function(e){this.a.addCue(e)}.bind(this))},Jr.prototype.append=Jr.prototype.append,Jr.prototype.o=function(){return this.a&&Zr(this,function(){return!0}),this.a=null,Promise.resolve()},Jr.prototype.destroy=Jr.prototype.o,Jr.prototype.isTextVisible=function(){return"showing"==this.a.mode},Jr.prototype.isTextVisible=Jr.prototype.isTextVisible,Jr.prototype.setTextVisibility=function(e){this.a.mode=e?"showing":"hidden"},Jr.prototype.setTextVisibility=Jr.prototype.setTextVisibility,eo.prototype.then=function(e){return this.a=this.a.then(e).then(function(e){return this.b?(this.g(),Promise.reject(this.h)):Promise.resolve(e)}.bind(this)),this},eo.prototype.cancel=function(e){return this.c?Promise.resolve():(this.b=!0,this.h=e,this.i)},i(io),t("shaka.Player",io),io.prototype.o=function(){return this.D=!0,no(this).then(function(){var e=Promise.all([this.Pa,co(this),this.m?this.m.o():null,this.s?this.s.o():null]);return this.f=null,this.jb=!1,this.c=this.s=this.g=this.m=null,e}.bind(this))},io.prototype.destroy=io.prototype.o,io.version="v2.2.8";var Rs={};io.registerSupportPlugin=function(e,t){Rs[e]=t},io.isBrowserSupported=function(){return!!(e.Promise&&e.Uint8Array&&Array.prototype.forEach&&e.MediaSource&&MediaSource.isTypeSupported&&e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration)},io.probeSupport=function(){return Ie().then(function(e){e={manifest:Ri(),media:Fe(),drm:e};for(var t in Rs)e[t]=Rs[t]();return e})},io.prototype.load=function(e,t,i){var n=this.sb(),r=new eo;this.ia=r,this.dispatchEvent(new H("loading"));var o=Date.now();return to(r.then(function(){return n}).then(function(){return this.j=vo(),V(this.m,this.f,"playing",this.Za.bind(this)),V(this.m,this.f,"pause",this.Za.bind(this)),V(this.m,this.f,"ended",this.Za.bind(this)),this.g=new this.c.abrFactory,so(this),this.w=new this.c.textDisplayFactory,this.w.setTextVisibility(this.jb),Di(e,this.s,this.c.manifest.retryParameters,i)}.bind(this)).then(function(t){return this.i=new t,this.i.configure(this.c.manifest),t={networkingEngine:this.s,filterNewPeriod:this.kb.bind(this),filterAllPeriods:this.Tb.bind(this),onTimelineRegionAdded:this.Nd.bind(this),onEvent:this.Ya.bind(this),onError:this.La.bind(this)},2<this.i.start.length?(s("The ManifestParser interface has changed. Please upgrade your plugin to accept the PlayerInterface structure. See the ManifestParser documentation for details."),this.i.start(e,this.s,t.filterNewPeriod,t.onError,t.onEvent)):this.i.start(e,t)}.bind(this)).then(function(t){if(t.periods.some(function(e){return e.variants.some(function(e){return e.video&&e.audio})})&&t.periods.forEach(function(e){e.variants=e.variants.filter(function(e){return e.video&&e.audio})}),0==t.periods.length)throw new h(2,4,4014);return this.b=t,this.ib=e,this.l=new de({Sa:this.s,onError:this.La.bind(this),Hb:this.zd.bind(this),onExpirationUpdated:this.wd.bind(this),onEvent:this.Ya.bind(this)}),this.l.configure(this.c.drm),this.l.init(t,!1)}.bind(this)).then(function(){this.Tb(this.b.periods),this.cb=Date.now()/1e3,this.Ma=this.c.preferredAudioLanguage,this.$a=this.c.preferredTextLanguage;var e=this.b.presentationTimeline.W(),t=this.c.playRangeEnd,i=this.c.playRangeStart;return 0<i&&(this.R()||this.b.presentationTimeline.Fc(i)),t<e&&(this.R()||this.b.presentationTimeline.ga(t)),Promise.all([pe(this.l,this.f),this.gb])}.bind(this)).then(function(){return this.g.chooseStreams?(s("AbrManager API has changed. The SwitchCallback signature has changed to accept a variant instead of a map. Please update your AbrManager. The old API will be removed in v2.3."),this.g.init(this.Fe.bind(this))):this.g.init(this.Kc.bind(this)),this.h=new $n(this.f,this.b,this.c.streaming,void 0==t?null:t,this.te.bind(this),this.Ya.bind(this)),this.B=new Jn(this.f,this.L,this.b,this.c.streaming,this.Jc.bind(this),this.Ya.bind(this),this.se.bind(this)),this.J=new Ue(this.f,this.L,this.w),this.a=new tr(this.b,{Ua:this.h,M:this.J,Sa:this.s,kc:this.td.bind(this),jc:this.Rc.bind(this),onError:this.La.bind(this),onEvent:this.Ya.bind(this),Ad:this.Bd.bind(this),Ib:this.Kd.bind(this),filterNewPeriod:this.kb.bind(this),filterAllPeriods:this.Tb.bind(this)}),this.a.configure(this.c.streaming),this.dispatchEvent(new H("streaming")),ro(this),this.a.init()}.bind(this)).then(function(){if(this.c.streaming.startAtSegmentBoundary){var e=bo(this,qn(this.h));Gn(this.h,e)}this.b.periods.forEach(this.kb.bind(this)),wo(this),Eo(this);var e=ir(this.a),t=at(e,this.Ma,this.ab);this.g.setVariants(t),e.variants.some(function(e){return e.primary}),this.hb.forEach(this.B.s.bind(this.B)),this.hb=[],j(this.m,this.f,"loadeddata",function(){this.j.loadLatency=(Date.now()-o)/1e3}.bind(this)),this.ia=null}.bind(this))).catch(function(e){return this.ia==r&&(this.ia=null,this.dispatchEvent(new H("unloading"))),Promise.reject(e)}.bind(this))},io.prototype.load=io.prototype.load,io.prototype.configure=function(e){if(e.abr&&e.abr.manager){s("AbrManager configuration has changed. Please use abrFactory instead of abr.manager. The old API will be removed in v2.3.");var t=e.abr.manager;delete e.abr.manager,e.abrFactory=function(){return t}}e.streaming&&null!=e.streaming.infiniteRetriesForLiveStreams&&(s("Streaming configuration has changed. Please use streaming.failureCallback instead of streaming.infiniteRetriesForLiveStreams. The old API will be removed in v2.3."),this.Zb=!!e.streaming.infiniteRetriesForLiveStreams,delete e.streaming.infiniteRetriesForLiveStreams),S(this.c,e,go(this),fo(),""),ao(this)},io.prototype.configure=io.prototype.configure,io.prototype.getConfiguration=function(){var e=go(this);return S(e,this.c,go(this),fo(),""),e},io.prototype.getConfiguration=io.prototype.getConfiguration,io.prototype.ge=function(){this.c=go(this),ao(this)},io.prototype.resetConfiguration=io.prototype.ge,io.prototype.cd=function(){return this.f},io.prototype.getMediaElement=io.prototype.cd,io.prototype.gc=function(){return this.s},io.prototype.getNetworkingEngine=io.prototype.gc,io.prototype.bd=function(){return this.ib},io.prototype.getManifestUri=io.prototype.bd,io.prototype.R=function(){return!!this.b&&this.b.presentationTimeline.R()},io.prototype.isLive=io.prototype.R,io.prototype.va=function(){return!!this.b&&this.b.presentationTimeline.va()},io.prototype.isInProgress=io.prototype.va,io.prototype.od=function(){if(!this.b||!this.b.periods.length)return!1;var e=this.b.periods[0].variants;return!!e.length&&!e[0].video},io.prototype.isAudioOnly=io.prototype.od,io.prototype.ie=function(){var e=0,t=0;return this.b&&(t=this.b.presentationTimeline,e=t.ka(),t=t.nb()),{start:e,end:t}},io.prototype.seekRange=io.prototype.ie,io.prototype.keySystem=function(){return this.l?this.l.keySystem():""},io.prototype.keySystem=io.prototype.keySystem,io.prototype.drmInfo=function(){return this.l?this.l.b:null},io.prototype.drmInfo=io.prototype.drmInfo,io.prototype.mb=function(){return this.l?this.l.mb():1/0},io.prototype.getExpiration=io.prototype.mb,io.prototype.pd=function(){return this.Oa},io.prototype.isBuffering=io.prototype.pd,io.prototype.sb=function(){return this.D?Promise.resolve():(this.dispatchEvent(new H("unloading")),no(this).then(function(){return this.Pa||(this.Pa=po(this).then(function(){this.Pa=null}.bind(this))),this.Pa}.bind(this)))},io.prototype.unload=io.prototype.sb,io.prototype.zb=function(){return this.h?this.h.zb():0},io.prototype.getPlaybackRate=io.prototype.zb,io.prototype.Ge=function(e){this.h&&zn(this.h,e),this.a&&or(this.a,1!=e)},io.prototype.trickPlay=io.prototype.Ge,io.prototype.Sc=function(){this.h&&zn(this.h,1),this.a&&or(this.a,!1)},io.prototype.cancelTrickPlay=io.prototype.Sc,io.prototype.md=function(){if(!this.b||!this.h)return[];var e=dt(this.b,qn(this.h)),t=this.C[e]||{};return tt(this.b.periods[e],t.audio,t.video)},io.prototype.getVariantTracks=io.prototype.md,io.prototype.ld=function(){if(!this.b||!this.h)return[];var e=dt(this.b,qn(this.h));return it(this.b.periods[e],(this.C[e]||{}).text).filter(function(e){return 0>this.eb.indexOf(e.id)}.bind(this))},io.prototype.getTextTracks=io.prototype.ld,io.prototype.me=function(e){if(this.a){(e=rt(ir(this.a),e))&&(ho(this,e,!1),this.Ba?this.X=e:sr(this.a,e,!0))}},io.prototype.selectTextTrack=io.prototype.me,io.prototype.ne=function(e,t){if(this.a){this.c.abr.enabled&&s("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var i=ir(this.a);(i=nt(i,e))&&i.allowedByApplication&&i.allowedByKeySystem&&(lo(this,i,!1),mo(this,i,t))}},io.prototype.selectVariantTrack=io.prototype.ne,io.prototype.Zc=function(){return this.a?ot(ir(this.a).variants).map(function(e){return e.language}).filter(N):[]},io.prototype.getAudioLanguages=io.prototype.Zc,io.prototype.kd=function(){return this.a?ir(this.a).textStreams.map(function(e){return e.language}).filter(N):[]},io.prototype.getTextLanguages=io.prototype.kd,io.prototype.ke=function(e,t){if(this.a){var i=ir(this.a);this.Ma=e,this.ab=t||"",To(this,i)}},io.prototype.selectAudioLanguage=io.prototype.ke,io.prototype.le=function(e,t){if(this.a){var i=ir(this.a);this.$a=e,this.ub=t||"",To(this,i)}},io.prototype.selectTextLanguage=io.prototype.le,io.prototype.rd=function(){return this.w?this.w.isTextVisible():this.jb},io.prototype.isTextTrackVisible=io.prototype.rd,io.prototype.qe=function(e){this.w?this.w.setTextVisibility(e):this.jb=e,Po(this)},io.prototype.setTextTrackVisibility=io.prototype.qe,io.prototype.ed=function(){return this.b?new Date(1e3*this.b.presentationTimeline.c+1e3*this.f.currentTime):null},io.prototype.getPlayheadTimeAsDate=io.prototype.ed,io.prototype.hd=function(){return this.b?new Date(1e3*this.b.presentationTimeline.c):null},io.prototype.getPresentationStartTimeAsDate=io.prototype.hd,io.prototype.yb=function(){return this.J?this.J.yb():{total:[],audio:[],video:[],text:[]}},io.prototype.getBufferedInfo=io.prototype.yb,io.prototype.getStats=function(){yo(this),this.Za();var e=null,t=null,i=this.f,i=i&&i.getVideoPlaybackQuality?i.getVideoPlaybackQuality():{};return this.h&&this.b&&(e=dt(this.b,qn(this.h)),t=this.C[e],t=ct(t.audio,t.video,this.b.periods[e].variants),e=t.video||{}),e||(e={}),t||(t={}),{width:e.width||0,height:e.height||0,streamBandwidth:t.bandwidth||0,decodedFrames:Number(i.totalVideoFrames),droppedFrames:Number(i.droppedVideoFrames),estimatedBandwidth:this.g?this.g.getBandwidthEstimate():NaN,loadLatency:this.j.loadLatency,playTime:this.j.playTime,bufferingTime:this.j.bufferingTime,switchHistory:_(this.j.switchHistory),stateHistory:_(this.j.stateHistory)}},io.prototype.getStats=io.prototype.getStats,io.prototype.addTextTrack=function(e,t,i,n,r,o){if(!this.a)return Promise.reject();for(var a,s=ir(this.a),l=0;l<this.b.periods.length;l++)if(this.b.periods[l]==s){if(l==this.b.periods.length-1){if(a=this.b.presentationTimeline.W()-s.startTime,1/0==a)return Promise.reject()}else a=this.b.periods[l+1].startTime-s.startTime;break}var h={id:this.Oc++,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(t){return 1!=t?null:new ti(1,0,a,function(){return[e]},0,null)},initSegmentReference:null,presentationTimeOffset:0,mimeType:n,codecs:r||"",kind:i,encrypted:!1,keyId:null,language:t,label:o||null,type:"text",primary:!1,trickModeVideo:null,containsEmsgBoxes:!1,roles:[],channelsCount:null};return this.eb.push(h.id),s.textStreams.push(h),ur(this.a,{text:h}).then(function(){if(!this.D){var e=this.b.periods.indexOf(s),n=rr(this.a);return n.text&&(this.C[e].text=n.text.id),this.eb.splice(this.eb.indexOf(h.id),1),To(this,s),wo(this),{id:h.id,active:!1,type:"text",bandwidth:0,language:t,label:o||null,kind:i,width:null,height:null}}}.bind(this))},io.prototype.addTextTrack=io.prototype.addTextTrack,io.prototype.Sb=function(e,t){this.fb.width=e,this.fb.height=t},io.prototype.setMaxHardwareResolution=io.prototype.Sb,io.prototype.Cc=function(){if(this.a){var e=this.a;if(e.f)e=!1;else if(e.l)e=!1;else{for(var t in e.c){var i=e.c[t];i.Qa&&(i.Qa=!1,_r(e,i,.1))}e=!0}}else e=!1;return e},io.prototype.retryStreaming=io.prototype.Cc,io.prototype.ad=function(){return this.b},io.prototype.getManifest=io.prototype.ad,Xa=io.prototype,Xa.Vc=function(e){var t=[1001,1002,1003];this.R()&&this.Zb&&0<=t.indexOf(e.code)&&(e.severity=1,this.Cc())},Xa.Tb=function(e){var t=this.a?rr(this.a):{};e.forEach(function(e){Ze(this.l,t,e)}.bind(this));var i=0;if(e.forEach(function(e){0<ot(e.variants).length&&i++}.bind(this)),!i)throw new h(2,4,9009);if(i<e.length)throw new h(2,4,4011);e.forEach(function(e){if(Qe(e,this.c.restrictions,this.fb)&&this.a&&ir(this.a)==e&&wo(this),1>ot(e.variants).length)throw new h(2,4,4012)}.bind(this))},Xa.kb=function(e){var t=this.a?rr(this.a):{};if(Ze(this.l,t,e),t=0<ot(e.variants).length,Qe(e,this.c.restrictions,this.fb)&&this.a&&ir(this.a)==e&&wo(this),e=1>ot(e.variants).length,!t)throw new h(2,4,4011);if(e)throw new h(2,4,4012)},Xa.ue=function(e,t){this.g&&this.g.segmentDownloaded(e,t)},Xa.Jc=function(e){if(yo(this),this.Oa=e,this.Za(),this.h){var t=this.h;e!=t.j&&(t.j=e,zn(t,t.i))}this.dispatchEvent(new H("buffering",{buffering:e}))},Xa.se=function(){wo(this)},Xa.Za=function(){if(!this.D){var e=this.Oa?"buffering":this.f.ended?"ended":this.f.paused?"paused":"playing",t=Date.now()/1e3;if(this.j.stateHistory.length){var i=this.j.stateHistory[this.j.stateHistory.length-1];if(i.duration=t-i.timestamp,e==i.state)return}this.j.stateHistory.push({timestamp:t,state:e,duration:0})}},Xa.te=function(){if(this.B){var e=this.B;e.c.forEach(e.m.bind(e,!0))}this.a&&lr(this.a)},Xa.td=function(e){this.Ba=!0,this.g.disable();var t={audio:!1,text:!1},i=at(e,this.Ma,this.ab,t);return e=st(e,this.$a,this.ub,t),i=Co(this,i),e=e[0]||null,this.X=this.Na=null,i&&lo(this,i,!0),e&&(ho(this,e,!0),!nr(this.a)&&i&&i.audio&&t.text&&e.language!=i.audio.language&&(this.w.setTextVisibility(!0),Po(this))),{variant:i,text:e}},Xa.Rc=function(){this.Ba=!1,this.c.abr.enabled&&this.g.enable(),this.Na&&(ar(this.a,this.Na,this.Yb),this.Na=null),this.X&&(sr(this.a,this.X,!0),this.X=null)},Xa.Bd=function(){this.i&&this.i.update&&this.i.update()},Xa.Kd=function(){this.h&&this.h.Ib()},Xa.Kc=function(e,t){lo(this,e,!0),this.a&&(ar(this.a,e,t||!1),Eo(this))},Xa.Fe=function(e,t){if(this.a){var i=nr(this.a);(i=ut(e.audio,e.video,i?i.variants:[]))&&this.Kc(i,t)}},Xa.La=function(e){if(!this.D){var t=new H("error",{detail:e});this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)}},Xa.Nd=function(e){this.B?this.B.s(e):this.hb.push(e)},Xa.Ya=function(e){this.dispatchEvent(e)},Xa.Od=function(){if(this.f.error){var e=this.f.error.code;if(1!=e){var t=this.f.error.msExtendedCode;t&&(0>t&&(t+=Math.pow(2,32)),t=t.toString(16)),this.La(new h(2,3,3016,e,t,this.f.error.message))}}},Xa.zd=function(e){var t=["output-restricted","internal-error"],i=ir(this.a),n=!1,r=1==Object.keys(e).length&&"00"==Object.keys(e)[0];i.variants.forEach(function(i){var o=[];i.audio&&o.push(i.audio),i.video&&o.push(i.video),o.forEach(function(o){var a=i.allowedByKeySystem;o.keyId&&(o=e[r?"00":o.keyId],i.allowedByKeySystem=!!o&&0>t.indexOf(o)),a!=i.allowedByKeySystem&&(n=!0)})});var o=rr(this.a);(o=ut(o.audio,o.video,i.variants))&&!o.allowedByKeySystem&&To(this,i),n&&wo(this)},Xa.wd=function(e,t){this.i&&this.i.onExpirationUpdated&&this.i.onExpirationUpdated(e,t),this.dispatchEvent(new H("expirationupdated"))},t("shaka.offline.Storage",So),So.support=_o,So.prototype.o=function(){var e=this.a,t=this.i?this.i.o().catch(function(){}).then(function(){if(e)return e.o()}):Promise.resolve();return this.b=this.g=this.i=this.a=null,t},So.prototype.destroy=So.prototype.o,So.prototype.configure=function(e){S(this.b,e,ko(this),{},"")},So.prototype.configure=So.prototype.configure,So.prototype.De=function(e,t,i){function n(e){o=e}if(this.s)return Promise.reject(new h(2,9,9006));this.s=!0;var r,o=null;return Ao(this).then(function(){return Bo(this),Io(this,e,n,i)}.bind(this)).then(function(i){if(Bo(this),this.f=i.manifest,this.c=i.Wc,this.f.presentationTimeline.R()||this.f.presentationTimeline.va())throw new h(2,9,9005,e);this.m(this.f.periods),this.h=this.a.c.manifest++,this.l=0,i=t||{};var n=this.f.periods.map(this.C.bind(this)),o=this.c.b,a=ve(this.c);if(o){if(!a.length)throw new h(2,9,9007,e);o.initData=[]}return r={key:this.h,originalManifestUri:e,duration:this.l,size:0,expiration:this.c.mb(),periods:n,sessionIds:this.b.usePersistentLicense?a:[],drmInfo:o,appMetadata:i},Kr(this.i,r)}.bind(this)).then(function(){if(Bo(this),o)throw o;return Lo(this)}.bind(this)).then(function(){return Or(r)}.bind(this)).catch(function(e){return Lo(this).catch(A).then(function(){throw e})}.bind(this))},So.prototype.store=So.prototype.De,So.prototype.remove=function(e){function t(e){6013!=e.code&&(a=e)}var i=e.offlineUri,n=/^offline:([0-9]+)$/.exec(i);if(!n)return Promise.reject(new h(2,9,9004,i));var r,o,a=null,s=Number(n[1]);return Ao(this).then(function(){return Bo(this),this.a.get("manifest",s)}.bind(this)).then(function(e){if(Bo(this),!e)throw new h(2,9,9003,i);return r=e,e=Xr(r),o=new de({Sa:this.g.s,onError:t,Hb:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),o.configure(this.g.getConfiguration().drm),o.init(e,this.b.usePersistentLicense||!1)}.bind(this)).then(function(){return fe(o,r.sessionIds)}.bind(this)).then(function(){return o.o()}.bind(this)).then(function(){if(Bo(this),a)throw a;var t=r.periods.map(function(e){return e.streams.map(function(e){var t=e.segments.map(function(e){return e=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e.uri),Number(e[1])});return e.initSegmentUri&&(e=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e.initSegmentUri),t.push(Number(e[1]))),t}).reduce(k,[])}).reduce(k,[]),i=0,n=t.length,o=this.b.progressCallback;return xr(this.a,t,function(){i++,o(e,i/n)})}.bind(this)).then(function(){return Bo(this),this.b.progressCallback(e,1),this.a.remove("manifest",s)}.bind(this))},So.prototype.remove=So.prototype.remove,So.prototype.list=function(){var e=[];return Ao(this).then(function(){return Bo(this),this.a.forEach("manifest",function(t){e.push(Or(t))})}.bind(this)).then(function(){return e})},So.prototype.list=So.prototype.list,So.prototype.B=function(e){for(var t,i=[],n=Ye(this.g.getConfiguration().preferredAudioLanguage),r=[0,ss,ls],o=e.filter(function(e){return"variant"==e.type}),r=r.map(function(e){return o.filter(function(t){return t=Ye(t.language),Xe(e,n,t)})}),a=0;a<r.length;a++)if(r[a].length){t=r[a];break}t||(r=o.filter(function(e){return e.primary}),r.length&&(t=r)),t||(t=o,o.map(function(e){return e.language}).filter(N));var s=t.filter(function(e){return e.height&&480>=e.height});return s.length&&(s.sort(function(e,t){return t.height-e.height}),t=s.filter(function(e){return e.height==s[0].height})),t.sort(function(e,t){return e.bandwidth-t.bandwidth}),t.length&&i.push(t[Math.floor(t.length/2)]),i.push.apply(i,e.filter(function(e){return"text"==e.type})),i},So.prototype.m=function(e){e.forEach(this.w.bind(this))},So.prototype.w=function(e){var t={};if(this.j){var i=this.j.filter(function(e){return"variant"==e.type}),n=null;i.length&&(n=nt(e,i[0])),n&&(n.video&&(t.video=n.video),n.audio&&(t.audio=n.audio))}Ze(this.c,t,e),Qe(e,this.g.getConfiguration().restrictions,{width:1/0,height:1/0})},So.prototype.C=function(e){var t,i,n=tt(e,null,null),r=it(e,null),n=this.b.trackSelectionCallback(n.concat(r));for(this.j||(this.j=n,this.m(this.f.periods)),r=n.length-1;0<r;--r){var o=!1;for(i=r-1;0<=i;--i)if(n[r].type==n[i].type&&n[r].kind==n[i].kind&&n[r].language==n[i].language){o=!0;break}if(o)break}for(o=[],r=0;r<n.length;r++)(t=nt(e,n[r]))?(t.audio&&((i=o.filter(function(e){return e.id==t.audio.id})[0])?i.variantIds.push(t.id):(i=t.video?t.bandwidth/2:t.bandwidth,o.push(xo(this,e,t.audio,i,t.id)))),t.video&&((i=o.filter(function(e){return e.id==t.video.id})[0])?i.variantIds.push(t.id):(i=t.audio?t.bandwidth/2:t.bandwidth,o.push(xo(this,e,t.video,i,t.id))))):o.push(xo(this,e,rt(e,n[r]),0));return{startTime:e.startTime,streams:o}},Rs.offline=_o,t("shaka.polyfill.installAll",function(){for(var e=0;e<Ds.length;++e)Ds[e]()});var Ds=[];t("shaka.polyfill.register",Mo),Mo(function(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,t=Document.prototype,t.exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitExitFullscreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Ro),document.addEventListener("webkitfullscreenerror",Ro),document.addEventListener("mozfullscreenchange",Ro),document.addEventListener("mozfullscreenerror",Ro),document.addEventListener("MSFullscreenChange",Ro),document.addEventListener("MSFullscreenError",Ro)}}),Mo(function(){var t=navigator.userAgent;t&&0<=t.indexOf("CrKey")&&delete e.indexedDB});var Os;Mo(function(){0>navigator.userAgent.indexOf("Trident/")||HTMLInputElement.prototype.addEventListener==Do||(Os=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=Do)}),Mo(function(){if(4503599627370497!=Math.round(4503599627370497)){var e=Math.round;Math.round=function(t){var i=t;return 4503599627370496>=t&&(i=e(t)),i}}}),Oo.prototype.c=function(e){if(!(1<e.version)){var t=ue(e.u.Ja(16)),i=[];if(0<e.version)for(var n=e.u.F(),r=0;r<n;++r){var o=ue(e.u.Ja(16));i.push(o)}n=e.u.F(),e.u.I(n),this.b.push.apply(this.b,i),this.f.push(t),this.a.push({start:e.start,end:e.start+e.size-1})}},Fo.prototype.createMediaKeys=function(){var e=new jo(this.keySystem);return Promise.resolve(e)},Fo.prototype.getConfiguration=function(){return this.a},jo.prototype.createSession=function(e){if("temporary"!=(e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Go(this.a)},jo.prototype.setServerCertificate=function(){return Promise.resolve(!1)},i(Go),Xa=Go.prototype,Xa.generateRequest=function(e,t){this.a=new b;try{this.c=this.g.createSession("video/mp4",new Uint8Array(t),null),V(this.f,this.c,"mskeymessage",this.Fd.bind(this)),V(this.f,this.c,"mskeyadded",this.Dd.bind(this)),V(this.f,this.c,"mskeyerror",this.Ed.bind(this)),Ko(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},Xa.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},Xa.update=function(e){this.b=new b;try{this.c.update(new Uint8Array(e))}catch(e){this.b.reject(e)}return this.b},Xa.close=function(){try{this.c.close(),this.closed.resolve(),$(this.f)}catch(e){this.closed.reject(e)}return this.closed},Xa.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},Xa.Fd=function(e){this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new H("message",{messageType:void 0==this.keyStatuses.a?"licenserequest":"licenserenewal",message:e.message.buffer}))},Xa.Dd=function(){this.a?(Ko(this,"usable"),this.a.resolve(),this.a=null):this.b&&(Ko(this,"usable"),this.b.resolve(),this.b=null)},Xa.Ed=function(){var e=Error("EME PatchedMediaKeysMs key error");if(e.errorCode=this.c.error,this.a)this.a.reject(e),this.a=null;else if(this.b)this.b.reject(e),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:Ko(this,"output-not-allowed");default:Ko(this,"internal-error")}};var Us;Xa=zo.prototype,Xa.forEach=function(e){this.a&&e(this.a,Us)},Xa.get=function(e){if(this.has(e))return this.a},Xa.has=function(e){var t=Us;return!(!this.a||!ce(new Uint8Array(e),new Uint8Array(t)))},Xa.entries=function(){},Xa.keys=function(){},Xa.values=function(){},Yo.prototype.createSession=function(){},Yo.prototype.setServerCertificate=function(){},Jo.prototype.getConfiguration=function(){},Jo.prototype.createMediaKeys=function(){};var Fs="";ia.prototype.createMediaKeys=function(){var e=new na(this.a);return Promise.resolve(e)},ia.prototype.getConfiguration=function(){return this.b},Xa=na.prototype,Xa.createSession=function(e){var t=e||"temporary";if("temporary"!=t&&"persistent-license"!=t)throw new TypeError("Session type "+e+" is unsupported on this platform.");return e=this.b||document.createElement("video"),e.src||(e.src="about:blank"),t=new aa(e,this.g,t),this.c.push(t),t},Xa.setServerCertificate=function(){return Promise.resolve(!1)},Xa.Sd=function(e){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="webm",t.initData=e.initData,this.b.dispatchEvent(t)},Xa.Rd=function(e){var t=oa(this,e.sessionId);t&&(e=new H("message",{messageType:void 0==t.keyStatuses.a?"licenserequest":"licenserenewal",message:e.message}),t.b&&(t.b.resolve(),t.b=null),t.dispatchEvent(e))},Xa.Pd=function(e){(e=oa(this,e.sessionId))&&(la(e,"usable"),e.a&&e.a.resolve(),e.a=null)},Xa.Qd=function(e){var t=oa(this,e.sessionId);if(t){var i=Error("EME v0.1b key error");i.errorCode=e.errorCode,i.errorCode.systemCode=e.systemCode,!e.sessionId&&t.b?(i.method="generateRequest",45==e.systemCode&&(i.message="Unsupported session type."),t.b.reject(i),t.b=null):e.sessionId&&t.a?(i.method="update",t.a.reject(i),t.a=null):(i=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?la(t,"output-restricted"):1==i?la(t,"expired"):la(t,"internal-error"))}},i(aa),Xa=aa.prototype,Xa.Ub=function(e,t){if(this.a)this.a.then(this.Ub.bind(this,e,t)).catch(this.Ub.bind(this,e,t));else{if(this.a=e,"webkit-org.w3.clearkey"==this.c){var i=Z(t),n=JSON.parse(i);"oct"!=n.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),i=le(n.keys[0].k),n=le(n.keys[0].kid)}else i=new Uint8Array(t),n=null;var r=Zo("addKey");try{this.f[r](this.c,i,n,this.sessionId)}catch(e){this.a.reject(e),this.a=null}}},Xa.generateRequest=function(e,t){return sa(this,t,null)},Xa.load=function(e){return"persistent-license"==this.g?sa(this,null,e):Promise.reject(Error("Not a persistent session."))},Xa.update=function(e){var t=new b;return this.Ub(t,e),t},Xa.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Zo("cancelKeyRequest");try{this.f[e](this.c,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},Xa.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()};var Vs;Xa=ha.prototype,Xa.forEach=function(e){this.a&&e(this.a,Vs)},Xa.get=function(e){if(this.has(e))return this.a},Xa.has=function(e){var t=Vs;return!(!this.a||!ce(new Uint8Array(e),new Uint8Array(t)))},Xa.entries=function(){},Xa.keys=function(){},Xa.values=function(){},Mo(function(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?Qo("webkit"):HTMLMediaElement.prototype.generateKeyRequest?Qo(""):e.MSMediaKeys?(Us=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Vo,e.MediaKeys=jo,e.MediaKeySystemAccess=Fo,navigator.requestMediaKeySystemAccess=Uo):(navigator.requestMediaKeySystemAccess=Wo,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Xo,e.MediaKeys=Yo,e.MediaKeySystemAccess=Jo))}),Mo(function(){if(e.MediaSource)if(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType)va();else if(navigator.vendor&&0<=navigator.vendor.indexOf("Apple")){var t=navigator.appVersion;ga(),0<=t.indexOf("Version/8")?e.MediaSource=null:0<=t.indexOf("Version/9")?ua():0<=t.indexOf("Version/10")?(ua(),da()):0<=t.indexOf("Version/11")&&(ua(),ca())}});var js=0;ma.prototype.then=function(e,t){var i=new ma;switch(this.za){case 1:Ea(this,i,e);break;case 2:Ea(this,i,t);break;case js:this.c.push({N:i,wb:e}),this.b.push({N:i,wb:t})}return i},ma.prototype.catch=function(e){return this.then(void 0,e)},ma.prototype.ma=function(e){if(this.za==js){for(this.f=e,this.za=1,e=0;e<this.c.length;++e)Ea(this,this.c[e].N,this.c[e].wb);this.c=[],this.b=[]}},ma.prototype.a=function(e){if(this.za==js){for(this.f=e,this.za=2,e=0;e<this.b.length;++e)Ea(this,this.b[e].N,this.b[e].wb);this.c=[],this.b=[]}};var $s=null,Gs=[];Mo(function(t){e.setImmediate?(Sa=function(t){return e.setImmediate(t)},_a=function(t){return e.clearImmediate(t)}):(Sa=function(t){return e.setTimeout(t,0)},_a=function(t){return e.clearTimeout(t)}),e.Promise&&!t||(e.Promise=ma,e.Promise.resolve=ya,e.Promise.reject=ba,e.Promise.all=Ca,e.Promise.race=Ta,e.Promise.prototype.then=ma.prototype.then,e.Promise.prototype.catch=ma.prototype.catch)}),Mo(function(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this,arguments);return e&&e.catch(function(){}),e}}}),Mo(function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in t&&(t.getVideoPlaybackQuality=Ia)}}),Mo(function(){if(!e.VTTCue&&e.TextTrackCue){var t=TextTrackCue.length;if(3==t)e.VTTCue=ka;else if(6==t)e.VTTCue=Aa;else{try{var i=!!ka(1,2,"")}catch(e){i=!1}i&&(e.VTTCue=ka)}}}),t("shaka.text.Cue",La);var Hs="auto";La.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Hs};var qs="center",Ks={LEFT:"left",RIGHT:"right",CENTER:qs,START:"start",END:"end"};La.textAlign=Ks;var zs="before",Ws={BEFORE:zs,CENTER:"center",AFTER:"after"};La.displayAlign=Ws;var Xs=0,Ys=2,Js=3;La.writingDirection={HORIZONTAL_LEFT_TO_RIGHT:Xs,HORIZONTAL_RIGHT_TO_LEFT:1,VERTICAL_LEFT_TO_RIGHT:Ys,VERTICAL_RIGHT_TO_LEFT:Js};var Qs=0,Zs=1;La.lineInterpretation={LINE_NUMBER:Qs,PERCENTAGE:Zs};var el="center",tl={CENTER:el,START:"start",END:"end"};La.lineAlign=tl;var il=400;La.fontWeight={NORMAL:il,BOLD:700};var nl="normal",rl={NORMAL:nl,ITALIC:"italic",OBLIQUE:"oblique"};La.fontStyle=rl,La.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},Na.prototype.parseInit=function(){},Na.prototype.parseMedia=function(e,t){var i=Z(e),n=[],r=new DOMParser,o=null;try{o=r.parseFromString(i,"text/xml")}catch(e){throw new h(2,2,2005)}if(o){var a=o.getElementsByTagName("tt")[0];if(!a)throw new h(2,2,2005);r=a.getAttribute("ttp:frameRate"),o=a.getAttribute("ttp:subFrameRate");var s=a.getAttribute("ttp:frameRateMultiplier"),l=a.getAttribute("ttp:tickRate");if("default"!=(i=a.getAttribute("xml:space")||"default")&&"preserve"!=i)throw new h(2,2,2005);for(i="default"==i,r=new ja(r,o,s,l),o=xa(a.getElementsByTagName("styling")[0]),s=xa(a.getElementsByTagName("layout")[0]),a=xa(a.getElementsByTagName("body")[0]),l=0;l<a.length;l++){var u=a[l],c=t.periodStart,d=r,p=o,f=s,g=i;if(u.hasAttribute("begin")||u.hasAttribute("end")||!/^\s*$/.test(u.textContent)){Ba(u,g);var g=Fa(u.getAttribute("begin"),d),v=Fa(u.getAttribute("end"),d),d=Fa(u.getAttribute("dur"),d),m=u.textContent;if(null==v&&null!=d&&(v=g+d),null==g||null==v)throw new h(2,2,2001);c=new La(g+c,v+c,m),g=Ua(u,"region",f),f=c,"rtl"==Ra(u,g,p,"tts:direction")&&(f.writingDirection=1),v=Ra(u,g,p,"tts:writingMode"),"tb"==v||"tblr"==v?f.writingDirection=Ys:"tbrl"==v?f.writingDirection=Js:"rltb"==v||"rl"==v?f.writingDirection=1:v&&(f.writingDirection=Xs),(v=Ra(u,g,p,"tts:origin"))&&(v=cl.exec(v))&&(f.region.x=Number(v[1]),f.region.y=Number(v[2])),(v=Ra(u,g,p,"tts:extent"))&&(v=cl.exec(v))&&(f.region.width=Number(v[1]),f.region.height=Number(v[2])),(v=Ra(u,g,p,"tts:textAlign"))&&(f.positionAlign=fl[v],f.lineAlign=pl[v],f.textAlign=Ks[v.toUpperCase()]),(v=Ra(u,g,p,"tts:displayAlign"))&&(f.displayAlign=Ws[v.toUpperCase()]),(v=Ra(u,g,p,"tts:color"))&&(f.color=v),(v=Ra(u,g,p,"tts:backgroundColor"))&&(f.backgroundColor=v),(v=Ra(u,g,p,"tts:fontFamily"))&&(f.fontFamily=v),(v=Ra(u,g,p,"tts:fontWeight"))&&"bold"==v&&(f.fontWeight=700),(v=Ra(u,g,p,"tts:wrapOption"))&&"noWrap"==v&&(f.wrapLine=!1),(v=Ra(u,g,p,"tts:lineHeight"))&&v.match(dl)&&(f.lineHeight=v),(v=Ra(u,g,p,"tts:fontSize"))&&v.match(dl)&&(f.fontSize=v),(v=Ra(u,g,p,"tts:fontStyle"))&&(f.fontStyle=rl[v.toUpperCase()]),(g=Da(g,p,"tts:textDecoration"))&&Ma(f,g),(u=Oa(u,p,"tts:textDecoration"))&&Ma(f,u)}else c=null;c&&n.push(c)}}return n};var ol=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,al=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,sl=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,ll=/^(\d*\.?\d*)f$/,hl=/^(\d*\.?\d*)t$/,ul=/^(?:(\d*\.?\d*)h)?(?:(\d*\.?\d*)m)?(?:(\d*\.?\d*)s)?(?:(\d*\.?\d*)ms)?$/,cl=/^(\d{1,2}|100)% (\d{1,2}|100)%$/,dl=/^(\d+px|\d+em)$/,pl={left:"start",center:"center",right:"end",start:"start",end:"end"},fl={left:"line-left",center:"center",right:"line-right"};Re("application/ttml+xml",Na),$a.prototype.parseInit=function(e){var t=!1;if((new oi).G("moov",ai).G("trak",ai).G("mdia",ai).G("minf",ai).G("stbl",ai).ca("stsd",si).G("stpp",function(){t=!0}).parse(e),!t)throw new h(2,2,2007)},$a.prototype.parseMedia=function(e,t){var i=!1,n=[];if((new oi).G("mdat",li(function(e){i=!0,n=n.concat(this.a.parseMedia(e.buffer,t))}.bind(this))).parse(e),!i)throw new h(2,2,2007);return n},Re('application/mp4; codecs="stpp"',$a),Re('application/mp4; codecs="stpp.TTML.im1t"',$a),Ga.prototype.parseInit=function(){},Ga.prototype.parseMedia=function(e,t){var i=Z(e),i=i.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n"),i=i.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(i[0]))throw new h(2,2,2e3);var n=t.segmentStart;if(0<=i[0].indexOf("X-TIMESTAMP-MAP")){var r=i[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),o=i[0].match(/MPEGTS:(\d+)/m);r&&o&&(n=qa(new ln(r[1])),n=t.periodStart+(Number(o[1])/9e4-n))}for(o=[],r=1;r<i.length;r++){var a=i[r].split("\n"),s=n;if(1==a.length&&!a[0]||/^NOTE($|[ \t])/.test(a[0])||"STYLE"==a[0])var l=null;else{l=null,0>a[0].indexOf("--\x3e")&&(l=a[0],a.splice(0,1));var u=new ln(a[0]),c=qa(u),d=hn(u,/[ \t]+--\x3e[ \t]+/g),p=qa(u);if(null==c||!d||null==p)throw new h(2,2,2001);for(a=new La(c+s,p+s,a.slice(1).join("\n").trim()),hn(u,/[ \t]+/gm),s=un(u);s;)Ha(a,s),hn(u,/[ \t]+/gm),s=un(u);null!=l&&(a.id=l),l=a}l&&o.push(l)}return o},Re("text/vtt",Ga),Re('text/vtt; codecs="vtt"',Ga),Ka.prototype.parseInit=function(e){var t=!1;if((new oi).G("moov",ai).G("trak",ai).G("mdia",ai).ca("mdhd",function(e){0==e.version?(e.u.I(4),e.u.I(4),this.a=e.u.F(),e.u.I(4)):(e.u.I(8),e.u.I(8),this.a=e.u.F(),e.u.I(8)),e.u.I(4)}.bind(this)).G("minf",ai).G("stbl",ai).ca("stsd",si).G("wvtt",function(){t=!0}).parse(e),!this.a)throw new h(2,2,2008);if(!t)throw new h(2,2,2008)},Ka.prototype.parseMedia=function(e,t){var i=0,n=[],r=[],o=[],a=!1,s=!1,l=!1,u=null;if((new oi).G("moof",ai).G("traf",ai).ca("tfdt",function(e){a=!0,i=e.version?e.u.Va():e.u.F()}).ca("tfhd",function(e){var t=e.ec;e=e.u,e.I(4),1&t&&e.I(8),2&t&&e.I(4),u=8&t?e.F():null}).ca("trun",function(e){s=!0;var t=e.version,i=e.ec;e=e.u;var r=e.F();1&i&&e.I(4),4&i&&e.I(4);for(var o=[],a=0;a<r;a++){var l={duration:null,Vb:null};256&i&&(l.duration=e.F()),512&i&&e.I(4),1024&i&&e.I(4),2048&i&&(l.Vb=t?e.xc():e.F()),o.push(l)}n=o}).G("vtte",function(){r.push(null)}).G("vttc",li(function(e){r.push(e.buffer)})).G("mdat",function(e){l=!0,ai(e)}).parse(e),!l&&!a&&!s)throw new h(2,2,2008);for(var c=i,d=0;d<n.length;d++){var p=n[d],f=r[d],g=p.duration||u;g&&(p=p.Vb?i+p.Vb:c,c=p+g,f&&o.push(za(f,t.periodStart+p/this.a,t.periodStart+c/this.a)))}return o.filter(L)},Re('application/mp4; codecs="wvtt"',Ka)}).call(r,this),void 0!==e&&e.exports?e.exports=r.shaka:void 0!==(n=function(){return r.shaka}.call(t,i,t,e))&&(e.exports=n)}()},948:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i(e.activePlayerComponent,{tag:"component"}),e._v(" "),i("player-sharing",{directives:[{name:"show",rawName:"v-show",value:e.showSharing,expression:"showSharing"}]}),e._v(" "),i("popup-prompt-firstpc",{directives:[{name:"show",rawName:"v-show",value:e.showPromptFirstPcPopup,expression:"showPromptFirstPcPopup"}]}),e._v(" "),i("popup-enable-pcprompt",{directives:[{name:"show",rawName:"v-show",value:e.showEnablePcPopup,expression:"showEnablePcPopup"}]})],1)},staticRenderFns:[]}},95:function(e,t,i){e.exports=i.p+"backward.png"},96:function(e,t,i){e.exports=i.p+"forward.png"},97:function(e,t,i){e.exports=i.p+"ic_Next_Episode.png"},98:function(e,t,i){e.exports=i.p+"ic_VideoQuality.png"},99:function(e,t,i){e.exports=i.p+"ic_episodes.png"},992:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("player-screen",{ref:"playerScreen"}),e._v(" "),i("div",{staticClass:"trailer-details"},[i("detail-buttons"),e._v(" "),i("related-seasons")],1)],1)},staticRenderFns:[]}}});