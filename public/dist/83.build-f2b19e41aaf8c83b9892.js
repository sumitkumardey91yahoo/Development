webpackJsonp([83],{640:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),s=i(5),n=i(4),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e};t.default={data:function(){return{showFirstPin:!0,firstPin:"",confirmPin:"",pinError:!1,invalidError:!1}},computed:a({},i.i(n.a)(["passphrase","altMessages"])),methods:a({},i.i(n.b)([]),i.i(n.c)(["actEditAccount","actCreateNewProfile","actCheckWithAccount","actGetProfileSwitch"]),{validateFirstPin:function(e){e.target.value.length>3&&(this.showFirstPin=!1)},validateConfimPin:function(e){var t=this;if(e.target.value.length>3)if(this.firstPin==this.confirmPin){var i=JSON.parse(localStorage.getItem("altUser"));this.actEditAccount({marketingConsent:!1,pin:this.firstPin,details:{},Account_Id:i.accountId,Profile_Id:i.profileId}).then(function(e){e.status&&"ok"==e.status&&t.createKidsProfile()},function(e){t.invalidError=e.message,t.pinError=!1})}else this.pinError="Incorrect PIN",this.invalidError=!1},createKidsProfile:function(){var e=this,t=void 0;localStorage.getItem("altUser")&&(t=JSON.parse(localStorage.getItem("altUser")));var i={parental_control:"R",password:t.login,type:"regular",username:"kids"+t.login};this.actCreateNewProfile(i).then(function(i){t.profileId=i.id,t.username=i.username,localStorage.setItem("altUser",JSON.stringify(t)),e.switchProfile()},function(e){})},switchProfile:function(e){var t=this,i=void 0;localStorage.getItem("altUser")&&(i=JSON.parse(localStorage.getItem("altUser")));var s={pin:this.firstPin,id:i.profileId};this.actGetProfileSwitch(s).then(function(s){i.sessionToken=s.session_token,i.uuid=s.uuid,localStorage.setItem("altKidsUser",JSON.stringify(e)),localStorage.setItem("altProfileMode","kids"),t.$router.push({name:"kidsMode"}),localStorage.setItem("altUser",JSON.stringify(i)),r.eventBus.$emit("toggleAppModeChangeEvent","kids"),t.$router.push({name:"home"}),t.closeScreen()},function(e){})},closeScreen:function(){this.showFirstPin=!0,this.pinError=!1,this.firstPin="",this.confirmPin="",r.eventBus.$emit("togglePopupKidsCreatePin",!1),this.invalidError=!1,this.$router.push({name:"home"})}}),mixins:[s.a]}},80:function(e,t,i){e.exports=i.p+"close.svg"},899:function(e,t,i){var r=i(77)(i(640),i(975),null,null,null);e.exports=r.exports},975:function(e,t,i){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"kids-create-pin-screen alt-popup-bg dark-bg",attrs:{id:"kids-create-pin-screen"}},[r("div",{staticClass:"pin-screen-header"},[r("img",{staticClass:"kids-pin-close",attrs:{src:i(80),alt:"close"},on:{click:e.closeScreen}}),e._v(" "),r("div",{staticClass:"clearfix"})]),e._v(" "),r("div",{staticClass:"pin-screen-box"},[e.showFirstPin?r("div",[e.altMessages?r("p",[e._v(e._s(e.altMessages.kidsFirstPinMessage))]):e._e(),e._v(" "),r("div",{staticClass:"pin-control-box"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.firstPin,expression:"firstPin"}],staticClass:"pin-control",attrs:{type:"tel",size:"4",maxlength:"4",placeholder:"...."},domProps:{value:e.firstPin},on:{keyup:e.validateFirstPin,input:function(t){t.target.composing||(e.firstPin=t.target.value)}}})])]):r("div",[r("p",[e._v("CONFIRM PIN")]),e._v(" "),r("div",{staticClass:"pin-control-box"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmPin,expression:"confirmPin"}],staticClass:"pin-control",attrs:{type:"tel",size:"4",maxlength:"4",placeholder:"...."},domProps:{value:e.confirmPin},on:{keyup:e.validateConfimPin,input:function(t){t.target.composing||(e.confirmPin=t.target.value)}}})])]),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.pinError,expression:"pinError"}],staticClass:"pin-error"},[e._v(e._s(e.pinError))]),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.invalidError,expression:"invalidError"}],staticClass:"pin-error"},[e._v(e._s(e.invalidError))])])])},staticRenderFns:[]}}});