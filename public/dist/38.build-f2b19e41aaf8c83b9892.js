webpackJsonp([38],{1070:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"kids"},[o("section-nav"),e._v(" "),o("kids-contents"),e._v(" "),o("kids-load-more"),e._v(" "),o("kids-search",{directives:[{name:"show",rawName:"v-show",value:e.showKidsSearch,expression:"showKidsSearch"}]}),e._v(" "),o("alt-modals")],1)},staticRenderFns:[]}},33:function(e,t,o){var r=o(77)(o(578),o(1070),null,null,null);e.exports=r.exports},578:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),a=o(5),n=o(2),i=o(4),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},c=function(){return o.e(133).then(o.bind(null,861))},l=function(){return o.e(131).then(o.bind(null,863))},d=function(){return o.e(86).then(o.bind(null,860))},u=function(){return o.e(132).then(o.bind(null,862))},m=function(){return o.e(47).then(o.bind(null,82))},g=function(){return o.e(59).then(o.bind(null,242))};t.default={data:function(){return{pinError:!1,pinErrorMessage:"",altKidsUser:void 0,username:void 0,password:void 0,altUser:void 0,altAccount:void 0,showKidsSearch:!1}},computed:s({},o.i(i.a)(["altKidsProfile","passphrase"])),methods:s({},o.i(i.b)(["setAltKidsUser","setUser","setAccount"]),o.i(i.c)(["actGetKidsProfileSwitch","actCheckWithAccount","actGetUserLogin","actGetAccountDetails","actGetDeviceList","actRegisterDevice","actGetOrders"]),{checkSwitchUser:function(e){var t=this;if(this.pinError=!1,this.pinErrorMessage="",4==e.target.value.length){var o=e.target.value;this.actGetKidsProfileSwitch(o).then(function(e){if("ok"==e.status){var o=JSON.parse(localStorage.getItem("altUser"));t.username=o.login,t.getLogin()}},function(e){"error"==e.status&&(t.pinErrorMessage=e.message,t.pinError=!0)})}},getLogin:function(){var e=this;this.toggleLoader(!0),this.actGetUserLogin({username:this.username,password:this.password}).then(function(t){var o=t.account,r=t.account.profile,a={sessionToken:t.session_token?t.session_token:"",dateCreated:o.date_created?o.date_created:"",email:o.email?o.email:"",accountId:o.id?o.id:"",isAdmin:o.is_admin?o.is_admin:"",login:o.login?o.login:"",username:r.username?r.username:"",profileId:r.id?r.id:"",password:encryptedPassword};localStorage.setItem("token",t.session_token),localStorage.setItem("user_email",t.account.email),localStorage.setItem("account_id",t.account.id),e.altUser=a,e.getAccountLookup()},function(t){if(e.toggleAltPopup(!0,t.message),e.toggleLoader(!1),window.mobileAnalyticsClient){var o={},r=localStorage.getItem("geo_location"),a=JSON.parse(localStorage.getItem("altConfig"));r&&(r=JSON.parse(r),o=r),o.user_email=localStorage.getItem("user_email"),o.user_id=localStorage.getItem("account_id"),o.user_session=localStorage.getItem("token"),o.user_name=localStorage.getItem("user_name"),o.user_dob=localStorage.getItem("user_birthday"),o.user_gender=localStorage.getItem("user_gender"),o.app_env=a.environment.title,o.event_action="error",o.event_message=t.message,o.event_code=t.code.toString(),window.mobileAnalyticsClient.recordEvent("_user.login",o,{})}})},getAccountLookup:function(){var e=this;this.actGetAccountDetails(this.altUser).then(function(t){if(e.altAccount={dateCreated:e.formatIsoDate(t.date_created),details:t.details,emailVerified:t.email_verified,marketingConcent:t.marketing_consent,phoneNumber:t.phone_number,profile:t.profile},localStorage.setItem("user_name",t.name+" "+t.surname),localStorage.setItem("user_birthday",t.details.birthday?t.details.birthday:""),localStorage.setItem("user_gender",t.details.gender?t.details.gender:""),window.mobileAnalyticsClient){var o={},r=localStorage.getItem("geo_location"),a=JSON.parse(localStorage.getItem("altConfig"));r&&(r=JSON.parse(r),o=r),o.user_email=localStorage.getItem("user_email"),o.user_id=localStorage.getItem("account_id"),o.user_session=localStorage.getItem("token"),o.user_name=localStorage.getItem("user_name"),o.user_dob=localStorage.getItem("user_birthday"),o.user_gender=localStorage.getItem("user_gender"),o.app_env=a.environment.title,o.event_mode="email",window.mobileAnalyticsClient.recordEvent("_user.login",o,{})}e.getDevice()},function(e){})},getDevice:function(){var e=this,t=localStorage.getItem("altDeviceId");t||(t=this.generateRandomId(32)),this.actGetDeviceList(this.altUser).then(function(o){if(o.count){var r=o.devices,a=r.filter(function(e){return e.uuid==t});if(a&&a.length){var n=a[0];e.saveDevice(n),e.getOrder()}else e.registerDevice({user:e.altUser,deviceId:t})}else e.registerDevice({user:e.altUser,deviceId:t})},function(e){})},registerDevice:function(e){var t=this;this.actRegisterDevice(e).then(function(e){e&&(t.saveDevice(e),t.getOrder())},function(e){e&&(localStorage.removeItem("altDeviceId"),localStorage.setItem("altDeviceId",t.generateRandomId(32)),t.setUser(t.altUser),t.setAccount(t.altAccount),t.toggleLoader(!1),t.toggleClearDevicealert(!0))})},getOrder:function(){var e=this;this.actGetOrders(this.altUser).then(function(t){t.count&&t.orders?e.processOrders(t.orders[0]):(e.toggleLoader(!1),localStorage.removeItem("altUser"),localStorage.setItem("altProfileMode","default"),e.$router.push({name:"home"}))},function(e){})},processOrders:function(e){var t=(this.domain.toLowerCase(),e.price),o=e.product,r={accountId:e.account?e.account:"",orderId:e.id?e.id:"",inProcessing:e.in_processing,isTrial:e.is_trial,paymentType:e.payment_type?e.payment_type:"",amount:t.amount?t.amount:"",currency:t.currency?t.currency:"",domain:t.domain?t.domain:"",realAmount:t.real_amount?t.real_amount:"",productId:o.id,recurring:o.recurring,productType:o.type,productTitle:o.titles.default};localStorage.setItem("altOrder",JSON.stringify(r)),this.toggleLoader(!1),localStorage.setItem("altProfileMode","default"),this.$router.push({name:"home"})},saveDevice:function(e){var t={uuid:e.uuid,appVersion:e.app_version,deviceId:e.id,ipAddress:e.ip_address,name:e.name,type:e.type,userAgent:e.user_agent};localStorage.setItem("altUser",JSON.stringify(this.altUser)),localStorage.setItem("altAccount",JSON.stringify(this.altAccount)),localStorage.setItem("altDevice",JSON.stringify(t))}}),components:{"kids-header":c,"section-nav":l,"kids-contents":d,"alt-modals":m,"kids-search":g,"kids-load-more":u},created:function(){var e=this;r.eventBus.$on("toggleKidsSearchEvent",function(t){e.showKidsSearch=t})},beforeRouteEnter:function(e,t,o){function i(e){n.a.dispatch("actGetProfileSwitch",e).then(function(t){t.status&&"ok"==t.status&&(e.email=t.email,e.parentalControl=t.parental_control,e.sessionToken=t.session_token,e.username=t.username,e.uuid=t.uuid,localStorage.setItem("altProfileMode","kids"),localStorage.setItem("altKidsUser",JSON.stringify(e)),n.a.commit("setRouterToParam",void 0),n.a.commit("setRouterFromParam",void 0),o())},function(e){})}n.a.commit("setRouterFromParam",e),n.a.commit("setRouterToParam",e);var s=localStorage.getItem("altProfileMode");if("kids"==s)o();else if("default"==s){var c=(n.a.getters.accessToKidsMode,JSON.parse(localStorage.getItem("altUser")));if(c){var l=JSON.parse(localStorage.getItem("altOrder"));l&&l.subscription&&l.subscription.hasOrder&&0==l.subscription.expired?function(e){var t=JSON.parse(localStorage.getItem("altUser"));n.a.dispatch("actCheckWithAccount",t).then(function(t){if(t.count&&t.count>1){var o=t.profiles[1],n={username:o.username,type:o.type,profileId:o.id,email:o.email};t.account&&t.account.pin&&(n.pin=t.account.pin,e(n))}else r.eventBus.$emit("toggleCreateKidsPinEvent",!0),a.a.methods.toggleLoader(!1)},function(e){})}(i):a.a.methods.toggleKidsSubscribePopup(!0)}else n.a.commit("setRouterFromParam",{name:"kidsMode"}),a.a.methods.toggleKidsSigninPopup(!0)}else o({name:"home"})},beforeRouteLeave:function(e,t,o){n.a.commit("setRouterFromParam",t),n.a.commit("setAccessToKidsMode",!1),o()},beforeDestroy:function(){r.eventBus.$off("loadMoreKidsContentsEvent")},mixins:[a.a]}},77:function(e,t){e.exports=function(e,t,o,r,a){var n,i=e=e||{},s=typeof e.default;"object"!==s&&"function"!==s||(n=e,i=e.default);var c="function"==typeof i?i.options:i;t&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns),r&&(c._scopeId=r);var l;if(a?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):o&&(l=o),l){var d=c.functional,u=d?c.render:c.beforeCreate;d?c.render=function(e,t){return l.call(t),u(e,t)}:c.beforeCreate=u?[].concat(u,l):[l]}return{esModule:n,exports:i,options:c}}}});