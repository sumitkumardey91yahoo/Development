webpackJsonp([131],{1003:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("nav",{staticClass:"top-menu"},t._l(t.kidsSectionNavs,function(e){return i("a",{staticClass:"kids-menu",class:t.activeSectionClass(e),on:{click:function(i){t.getSectionContents(e)}}},[t._v(t._s(e.titles.default))])}))},staticRenderFns:[]}},580:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(1),n=i(5),o=i(4),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.default={data:function(){return{param:void 0,withUrl:!1,limit:10,theKidsContents:void 0,totalCount:void 0,itemsCount:void 0}},computed:a({},i.i(o.a)(["appActive","kidsSectionId","page","offset","kidsContents","kidsSectionNavs","kidsActiveSectionTitle"])),watch:{appActive:function(){this.initKidsMode()}},methods:a({},i.i(o.b)(["setKidsSectionNavs","setKidsActiveSectionTitle","setPage","setOffset","setKidsContents"]),i.i(o.c)(["actGetSections","actGetContentsByUrl","actGetContentsById","actGetKidsContentsByUrl"]),{initKidsMode:function(){this.getSections()},getSections:function(){var t=this;this.actGetSections(this.kidsSectionId).then(function(e){if(e&&e.length){t.setKidsSectionNavs(e);var i=e[0];t.setKidsActiveSectionTitle(i.titles.default),i.external_id?(t.param=i.external_id,t.withUrl=!0):(t.param=i.id,t.withUrl=!1),t.setPage(1),t.setOffset(0),t.getContents()}},function(t){})},getContents:function(){var t=this;this.withUrl?this.actGetKidsContentsByUrl({url:this.param,limit:this.limit,offset:this.offset}).then(function(e){t.totalCount=e.count,t.processKidsContents(e)},function(e){401==e.code&&(localStorage.removeItem("altKidsUser"),localStorage.setItem("altProfileMode","default"),t.$router.push({name:"home"}))}):this.actGetContentsById({id:this.param,limit:this.limit,offset:this.offset}).then(function(e){t.totalCount=e.elements.count,t.processKidsContents(e)},function(e){401==e.code&&(localStorage.removeItem("altKidsUser"),localStorage.setItem("altProfileMode","default"),t.$router.push({name:"home"}))})},processKidsContents:function(t){var e=this,i=(new Array,void 0);if(this.theKidsContents=this.theKidsContents?this.theKidsContents:new Array,t.history&&t.history.length){i=t.history;var n=new Array;for(var o in i){var a=i[o].media.details&&i[o].media.details.length?i[o].media.details.length:void 0,r=void 0;a&&i[o].playback_progress&&(r=Math.round(i[o].playback_progress/a*100));var d=i[o].media.id;n.push({mediaId:d,progress:r,length:a});var c=this.parseContents(i[o].media);i[o].playback_progress&&(c.progress=i[o].playback_progress/c.durationInSec*100),this.theKidsContents.push(c)}localStorage.setItem("mediaProgressList",JSON.stringify(n))}else if(t.elements&&t.elements.series&&t.elements.series.length){i=t.elements.series;for(var o in i)this.theKidsContents.push(this.parseContents(i[o]))}if(this.theKidsContents&&this.theKidsContents.length){var l=this.theKidsContents.filter(function(t){return t.kidsContent});if(l&&l.length)this.itemsCount=l.length,this.setKidsContents(l),this.totalCount<=this.itemsCount?s.eventBus.$emit("toggleLoadMoreBtn",!1):s.eventBus.$emit("toggleLoadMoreBtn",!0),this.toggleLoader(!1);else{this.setKidsContents(void 0);var h=this.kidsSectionNavs.findIndex(function(t){return t.titles.default==e.kidsActiveSectionTitle});this.getSectionContents(this.kidsSectionNavs[h+1]),this.kidsSectionNavs.splice(h,1),this.setKidsSectionNavs(this.kidsSectionNavs)}}else{this.setKidsContents(void 0);var h=this.kidsSectionNavs.findIndex(function(t){return t.titles.default==e.kidsActiveSectionTitle});this.getSectionContents(this.kidsSectionNavs[h+1]),this.kidsSectionNavs.splice(h,1),this.setKidsSectionNavs(this.kidsSectionNavs)}},activeSectionClass:function(t){return this.kidsActiveSectionTitle==t.titles.default?"active":""},getSectionContents:function(t){this.toggleLoader(!0),this.theKidsContents=void 0,this.setKidsActiveSectionTitle(t.titles.default),t.external_id?(this.param=t.external_id,this.withUrl=!0):(this.param=t.id,this.withUrl=!1),this.setPage(1),this.setOffset(0),this.getContents()},loadMoreContentsCB:function(){this.setOffset(this.offset+this.limit),this.getContents()}}),created:function(){this.appActive&&this.kidsSectionId&&this.initKidsMode(),s.eventBus.$on("loadMoreKidsContentsEvent",this.loadMoreContentsCB)},mixins:[n.a]}},863:function(t,e,i){var s=i(77)(i(580),i(1003),null,null,null);t.exports=s.exports}});