webpackJsonp([17],{46:function(e,t,n){var i=n(77)(n(606),n(999),null,null,null);e.exports=i.exports},606:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(5),s=n(4),c=this,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=function(){return n.e(80).then(n.bind(null,874))},a=function(){return n.e(47).then(n.bind(null,82))},d=function(){return n.e(96).then(n.bind(null,920))};t.default={data:function(){return{limit:50,offset:0,recentItems:void 0,recentShows:void 0,recentMovies:void 0,recentVideos:void 0,activeContent:void 0,activeTitle:void 0,recentSections:["SHOWS","MOVIES","VIDEOS"],selectedItem:void 0,deleteMode:!1,altOrder:void 0,itemsToDelete:[],showRecentDeleteCheck:!1,rcntDelCheckIdPrefix:"del-check rcnt-del-check-",slctdRecentDelItemsLength:0,rcntSlctdDeletedItems:0,slctdRecentDelError:!1,slctdRecentDelErrorCount:0,showClearAllBtn:!1,showClearSelectedBtn:!1,showCreateKidsPin:!1,showPopupDeleteVideo:!1,deleteButtonType:void 0,redirectionFlag:!1}},computed:r({},n.i(s.a)(["appActive","recentDeleteMode","recentlyWatched"]),{contents:function(){return this.activeContent}}),watch:{appActive:function(){this.initRecentWatched()},itemsToDelete:function(e){this.watchItemsToDeleteCB(e)}},methods:r({},n.i(s.b)(["setPlayerContent","setRecentlyWatched"]),n.i(s.c)(["actGetRecentWatched","actDeleteRecentItem","actDeleteRecentItems"]),{setRecentPageHeader:function(){this.setHeaderTitle("Recently Watched");var e=document.getElementById("header-search-ico");e&&(e.style.display="none");var t=document.getElementById("delete-ico");t&&(t.addEventListener("click",this.recentDeleteIcoClickCB),t.style.display="inline");var n=document.getElementById("header-close-ico-default");n&&(n.addEventListener("click",this.recentCloseDeleteIcoClickCB),n.style.display="none")},recentDeleteIcoClickCB:function(){var e=document.getElementById("delete-ico");e&&(e.style.display="none"),this.redirectionFlag=!0;var t=document.getElementById("header-close-ico-default");t&&(t.style.display="inline"),this.deleteMode=!0,this.showRecentDeleteCheck=!0,this.showClearAllBtn=!0,this.showClearSelectedBtn=!1,this.itemsToDelete=[]},recentCloseDeleteIcoClickCB:function(){var e=document.getElementById("header-close-ico-default");e&&(e.style.display="none");var t=document.getElementById("delete-ico");t&&(t.style.display="inline"),this.redirectionFlag=!1,this.deleteMode=!1,this.showRecentDeleteCheck=!1,this.showClearAllBtn=!1,this.showClearSelectedBtn=!1,this.itemsToDelete=[]},deleteAllRecentPopup:function(){document.getElementById("alt-app")&&(document.getElementById("alt-app").style.position="fixed"),this.deleteButtonType="ALL",this.showPopupDeleteVideo=!0},deleteSelectedRecentPopup:function(){document.getElementById("alt-app")&&(document.getElementById("alt-app").style.position="fixed"),this.deleteButtonType="SELECTED",this.showPopupDeleteVideo=!0},initRecentWatched:function(){var e=this;this.toggleLoader(!0),this.actGetRecentWatched({limit:this.limit,offset:this.offset}).then(function(t){if(t.count){var n=new Array,i=new Array;for(var o in t.history){var s=e.parseContents(t.history[o].media),c=t.history[o].media.details&&t.history[o].media.details.length?t.history[o].media.details.length:void 0,r=!1;c&&t.history[o].playback_progress&&(r=Math.ceil(t.history[o].playback_progress/c*100)),r=r>100?100:r;var l=t.history[o].media.id;i.push({mediaId:l,progress:r,length:c}),s.progress=!1,t.history[o].playback_progress&&(s.progress=Math.ceil(t.history[o].playback_progress/s.durationInSec*100)),n.push(s)}e.recentItems=n}else{e.recentShows=void 0,e.recentMovies=void 0,e.recentShows=void 0,e.recentItems=void 0,e.deleteMode=!1,e.setRecentlyWatched([]);var a=document.getElementById("delete-ico");a&&(a.style.display="none");var d=document.getElementById("header-close-ico-default");d&&(d.style.display="none")}e.setActiveSection("SHOWS")},function(e){})},setActiveSection:function(e){this.activeTitle=e;var t=void 0;if(!this.recentItems||!this.recentItems.length)return void this.toggleLoader(!1);switch(e){case"SHOWS":t=this.recentItems.filter(function(e){return"episode"==e.contentType});break;case"MOVIES":t=this.recentItems.filter(function(e){return"movie"==e.contentType});break;case"VIDEOS":t=this.recentItems.filter(function(e){return"video"==e.contentType})}if(this.setRecentlyWatched(t),this.toggleLoader(!1),window.mobileAnalyticsClient){var n=this.getAWSMACommonAttributes();n.category_title=e,n.category_id="N.A",n.category_url="N.A",window.mobileAnalyticsClient.recordEvent("_category.select",n,{})}},isActiveClass:function(e){return this.activeTitle==e?"active":""},playRecentItem:function(e){this.selectedItem=this.recentlyWatched[e],this.setPlayerContent(this.selectedItem);var t={name:this.selectedItem.contentName,params:{id:this.selectedItem.id}};localStorage.setItem("AWSMA_content_source","recently-watched"),this.redirectionFlag||this.$router.push(t)},isFreeContent:function(e){return!(!this.altUser||!this.altOrder||0!=this.altOrder.hasOrder)||!(this.altOrder&&this.altOrder.subscription&&this.altOrder.subscription.hasOrder&&0==this.altOrder.subscription.expired)&&e.isFreeContent},getRecentDeleteCheckID:function(e){if(e.contentType)switch(e.contentType){case"series":return this.rcntDelCheckIdPrefix+"series-"+e.seriesId;default:return this.rcntDelCheckIdPrefix+"media-"+e.contentId}return this.generateRandomId(10)},getRecentDeleteCheckValue:function(e,t){if(e.contentType)switch(e.contentType){case"series":return{type:"series",id:e.seriesId,index:t};default:return{type:"media",id:e.contentId,index:t}}return!1},toggleRecentDeleteModeCB:function(e){var t=document.getElementById("delete-ico");t&&(t.style.display=e?"none":"inline"),this.redirectionFlag=!1;var n=document.getElementById("header-close-ico-default");n&&(n.style.display=e?"inline":"none"),this.deleteMode=e,this.showRecentDeleteCheck=e,this.showClearAllBtn=e,this.showClearSelectedBtn=!1,this.itemsToDelete=[]},deleteRecentItem:function(e,t){var n=this;this.actDeleteRecentItem(t.contentId).then(function(i){switch(n.activeTitle){case"SHOWS":case"MOVIES":case"VIDEOS":n.recentlyWatched.splice(e,1)}if(window.mobileAnalyticsClient){var o=n.getAWSMACommonAttributes();o.content_id=t&&t.id?t.id:"N.A",o.content_title=t&&t.title?t.title.toLowerCase():"N.A",o.content_url=t&&t.stream&&t.stream.streamUrl?t.stream.streamUrl:"N.A",o.content_type=t&&t.contentType?t.contentType:"N.A",o.event_action="remove",window.mobileAnalyticsClient.recordEvent("_content.recently-watched",o,{})}},function(e){if(window.mobileAnalyticsClient){var t=n.getAWSMACommonAttributes();t.event_action="error",t.event_message=e.message?e.message:"N.A",t.event_code=e.code?e.code.toString():"",window.mobileAnalyticsClient.recordEvent("_content.recently-watched",t,{})}})},deleteAllRecent:function(){var e=this;if(this.toggleLoader(!0),this.actDeleteRecentItems().then(function(t){t.status&&"ok"==t.status?e.initRecentWatched():e.toggleLoader(!1)},function(t){if(window.mobileAnalyticsClient){var n=e.getAWSMACommonAttributes();n.event_action="error",n.event_message=t.message?t.message:"N.A",n.event_code=t.code?t.code.toString():"",window.mobileAnalyticsClient.recordEvent("_content.recently-watched",n,{})}e.toggleLoader(!1)}),window.mobileAnalyticsClient){var t=this.getAWSMACommonAttributes();t.event_action="ClearAll",window.mobileAnalyticsClient.recordEvent("_content.recently-watched",t,{})}},deleteSelectedRecent:function(){var e=this;if(this.toggleLoader(!0),!this.itemsToDelete||!this.itemsToDelete.length)return void this.toggleLoader(!1);for(var t in this.itemsToDelete){if(window.mobileAnalyticsClient){var n=this.getAWSMACommonAttributes();n.content_id=this.itemsToDelete[t].id,n.content_type=this.itemsToDelete[t].type,n.event_action="remove",window.mobileAnalyticsClient.recordEvent("_content.recently-watched",n,{})}this.actDeleteRecentItem(this.itemsToDelete[t].id).then(function(e){},function(e){})}for(var o=document.getElementsByClassName("rcnt-del-check"),s=(new Array,new Array),t=0;t<o.length;t++)o[t].checked&&s.push(t);for(var c in s)delete this.recentlyWatched[s[c]];this.setRecentlyWatched(this.recentlyWatched.filter(function(e){return e})),i.eventBus.$emit("toggleRecentDeleteModeEvent",!1),this.itemsToDelete=[],setTimeout(function(){e.initRecentWatched()},2e3)},getProgressText:function(e){return 100==e?"WATCHED":"WATCHING"},watchItemsToDeleteCB:function(e){e&&e.length?(this.showClearAllBtn=!1,this.showClearSelectedBtn=!0):(this.showClearAllBtn=!0,this.showClearSelectedBtn=!1)},stuffCommonAttributes:function(){var e={},t=localStorage.getItem("geo_location"),n=JSON.parse(localStorage.getItem("altConfig"));return t&&(t=JSON.parse(t),e=t),e.user_email=localStorage.getItem("user_email"),e.user_id=localStorage.getItem("account_id"),e.user_session=localStorage.getItem("token"),e.user_name=localStorage.getItem("user_name"),e.user_dob=localStorage.getItem("user_birthday"),e.user_gender=localStorage.getItem("user_gender"),e.app_env=n.environment.title,e},stuffMenuSelectAttributes:function(e,t){var n={};return n=this.stuffCommonAttributes(),n.page_title=e,n.section_id=t.toString(),n},stuffPageViewAttributes:function(e,t){var n={};return n=this.stuffCommonAttributes(),n.page_title=e,n.page_url=t,n},stuffErrorAttributes:function(e,t){var n={};return n=this.stuffCommonAttributes(),n.error_code=e.toString(),n.error_message=t,n.event_action="error",n},stuffRecentlyWatchedAttributes:function(e,t){var n={};return n=this.stuffCommonAttributes(),void 0==t.contentId?"series"==t.contentType&&(n.content_id=t.seriesId):n.content_id=t.contentId,n.content_title=t.title.toLowerCase(),n.content_url=t.content_url,n.content_type=t.contentType,n.event_action=e,n},popupDeleteVideoCB:function(e){this.showPopupDeleteVideo=!1,this.deleteButtonType&&("SELECTED"==this.deleteButtonType?this.deleteSelectedRecent():this.deleteAllRecent())}}),created:function(){var e=this;this.setRecentPageHeader(),i.eventBus.$on("popupDeleteVideoEventRecent",this.popupDeleteVideoCB),i.eventBus.$on("togglePopupDeleteVideoRecent",function(t){e.showPopupDeleteVideo=t}),i.eventBus.$on("toggleVideoDeleteConformationPopupEvent",function(t){e.showPopupDeleteVideo=t}),i.eventBus.$on("toggleCreateKidsPinEvent",function(t){e.showCreateKidsPin=t,t||e.$router.push({name:"home"})}),i.eventBus.$on("toggleRecentDeleteModeEvent",this.toggleRecentDeleteModeCB);localStorage.getItem("altOrder")&&(this.altOrder=JSON.parse(localStorage.getItem("altOrder"))),window.mobileAnalyticsClient,this.appActive&&this.initRecentWatched()},mounted:function(){this.toggleLoader(!0),i.eventBus.$emit("toggleVideoBlockPopupEvent",!1)},components:{"recent-header":l,"alt-modals":a,"popup-delete-video":d},beforeRouteEnter:function(e,t,n){var i=document.getElementById("delete-ico");i&&i.removeEventListener("click",c.recentDeleteIcoClickCB);var o=document.getElementById("header-close-ico-default");(o&&o.removeEventListener("click",c.recentCloseDeleteIcoClickCB),"kids"==localStorage.getItem("altProfileMode"))?n({name:"kidsMode"}):localStorage.getItem("altUser")&&n()},beforeDestroy:function(){i.eventBus.$off("toggleVideoDeleteConformationPopupEvent"),i.eventBus.$off("toggleVideoDelete"),i.eventBus.$off("popupDeleteVideoEventRecent")},mixins:[o.a]}},77:function(e,t){e.exports=function(e,t,n,i,o){var s,c=e=e||{},r=typeof e.default;"object"!==r&&"function"!==r||(s=e,c=e.default);var l="function"==typeof c?c.options:c;t&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns),i&&(l._scopeId=i);var a;if(o?(a=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},l._ssrRegister=a):n&&(a=n),a){var d=l.functional,h=d?l.render:l.beforeCreate;d?l.render=function(e,t){return a.call(t),h(e,t)}:l.beforeCreate=h?[].concat(h,a):[a]}return{esModule:s,exports:c,options:l}}},87:function(e,t,n){e.exports=n.p+"alt-cover.jpg"},999:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"recently-watched"},[i("nav",{staticClass:"top-menu"},e._l(e.recentSections,function(t){return i("a",{staticClass:"scroll-menu",class:e.isActiveClass(t),on:{click:function(n){e.setActiveSection(t)}}},[e._v(e._s(t))])})),e._v(" "),e.recentlyWatched&&e.recentlyWatched.length?i("div",{staticClass:"container"},e._l(e.recentlyWatched,function(t,o){return i("div",{staticClass:"mvi-data"},[i("label",{attrs:{for:e.getRecentDeleteCheckID(t)}},[i("div",{staticClass:"mvi-item",on:{click:function(t){e.playRecentItem(o)}}},[i("div",{staticClass:"mvi-img-sec"},[t.images&&t.images.cover?i("img",{staticClass:"mvi-img",attrs:{src:t.images.cover}}):i("img",{attrs:{src:n(87),alt:""}}),e._v(" "),t.progress&&100!=t.progress?i("div",{staticClass:"line-progress"},[i("div",{staticClass:"progress",style:{width:t.progress+"%"}})]):i("div",{staticClass:"color-line"})]),e._v(" "),i("div",{staticClass:"mvi-detail-sec"},[t.title?i("h3",[e._v(e._s(t.title))]):e._e(),e._v(" "),i("ul",{staticClass:"info-tags"},[!t.noShow&&t.seasonNumber?i("li",[e._v("S"+e._s(t.seasonNumber))]):e._e(),e._v(" "),!t.noShow&&t.episodeNumber?i("li",[e._v("E"+e._s(t.episodeNumber))]):e._e(),e._v(" "),t.duration?i("li",[e._v(e._s(t.duration))]):e._e(),e._v(" "),t.mainLanguage?i("li",[e._v(e._s(t.mainLanguage))]):e._e()]),e._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:e.isFreeContent(t)&&!t.progress,expression:"isFreeContent(content) && !(content.progress)"}],staticClass:"alt-tag"},[e._v("Free")]),e._v(" "),t.progress?i("p",{staticClass:"alt-tag"},[100!=t.progress?i("span",[e._v("watching")]):i("span",[e._v("watched")])]):e._e()]),e._v(" "),i("div",{staticClass:"clearfix"})])]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.itemsToDelete,expression:"itemsToDelete"},{name:"show",rawName:"v-show",value:e.showRecentDeleteCheck,expression:"showRecentDeleteCheck"}],staticClass:"del-check rcnt-del-check",attrs:{type:"checkbox",id:e.getRecentDeleteCheckID(t)},domProps:{value:e.getRecentDeleteCheckValue(t,o),checked:Array.isArray(e.itemsToDelete)?e._i(e.itemsToDelete,e.getRecentDeleteCheckValue(t,o))>-1:e.itemsToDelete},on:{change:function(n){var i=e.itemsToDelete,s=n.target,c=!!s.checked;if(Array.isArray(i)){var r=e.getRecentDeleteCheckValue(t,o),l=e._i(i,r);s.checked?l<0&&(e.itemsToDelete=i.concat([r])):l>-1&&(e.itemsToDelete=i.slice(0,l).concat(i.slice(l+1)))}else e.itemsToDelete=c}}})])})):i("div",{staticClass:"alt-empty-msg"},[i("p",{staticClass:"empty-msg"},[e._v("You've not watched anything yet.")])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.deleteMode,expression:"deleteMode"}],staticClass:"bottom-box"},[i("div",{staticClass:"btn-box"},[i("button",{directives:[{name:"show",rawName:"v-show",value:e.showClearAllBtn,expression:"showClearAllBtn"}],staticClass:"btn btn-grad btn-lg",attrs:{type:"button"},on:{click:e.deleteAllRecentPopup}},[e._v("CLEAR ALL")]),e._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:e.showClearSelectedBtn,expression:"showClearSelectedBtn"}],staticClass:"btn btn-grad btn-lg",attrs:{type:"button"},on:{click:e.deleteSelectedRecentPopup}},[e._v("CLEAR SELECTED")])])]),e._v(" "),i("popup-delete-video",{directives:[{name:"show",rawName:"v-show",value:e.showPopupDeleteVideo,expression:"showPopupDeleteVideo"}]}),e._v(" "),i("alt-modals")],1)},staticRenderFns:[]}}});